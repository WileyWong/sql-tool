# 需求变更单

## 基本信息

| 项目 | 内容 |
|------|------|
| 变更编号 | RC-002 |
| 变更日期 | 2026-01-09 |
| 提出人 | |
| 优先级 | P0-紧急 |
| 影响范围 | 全栈 |

---

## 1. 变更概述

> 增加对sql语句编辑区的保存功能，及相关功能
> 
> 其他功能优化

---

## 2. 变更背景

### 2.1 现状问题

> 现在只有一个保存当前sql文件的功能，缺少打开

### 2.2 变更原因

> 对文件操作更方便

---

## 3. 变更内容

### 3.1 功能需求

> 详细描述需要实现的功能

| 序号 | 功能点 | 描述 | 验收标准 |
|------|--------|------|----------|
| 1 | 最近打开的文件 菜单| 在菜单“文件”->"新建查询"下方增加“最近打开的文件”菜单 | 显示最新打开的10个文件全路径，点击后打开 |
| 2 | 打开文件功能 和 本次新加的打开最近的文件功能优化 | 如果当前打开的编辑器是空的并且没有保存到磁盘，直接在当前编辑器中打开，否则新建一个编辑窗口打开 | |
| 3 | 未保存提醒功能 | 关闭编辑器或者程序的时候，如果存在文件有修改但是没有保存的编辑，提示用户是否保存 | |
| 4 | 去掉electron本身的菜单 | 只保留使用vue实现的菜单 | |

---

## 4. 测试用例

> 用于验证变更是否正确实现

| 用例ID | 场景 | 输入 | 期望结果 |
|--------|------|------|----------|
| TC01 | 新建一个查询文件显示在最近的文件菜单中 | 点击“新建查询”按钮，随便输入一些内容，点击“保存”按钮，保存到磁盘。 | 在“最近打开的文件”菜单中，显示该文件全路径 |
| TC02 | 点击“最近打开的文件”菜单打开文件 | 点击“最近打开的文件”菜单，选择文件刚才的文件，打开 | 打开该文件，内容与刚才保存的文件内容对应。如果当前已经在有个空白的没有保存的编辑器，直接在当前编辑器打开。否则在一个新编辑器打开 |
| TC03 | 未保存提醒功能 | 关闭编辑器的时候，如果存在文件有修改但是没有保存的编辑，提示用户是否保存 | 用户选择保存，按用户选择的地址保存文件。用户选择不保存，则直接关闭编辑器。用户选择取消，则不关闭，返回到编辑器 |
| TC04 | 未保存提醒功能 | 关闭整个程序的时候，如果存在文件有修改但是没有保存的编辑，提示用户是否保存 | 用户选择保存，按用户选择的地址保存文件。用户选择不保存，则直接关闭编辑器。用户选择取消，则不关闭，返回到编辑器 |
| TC04 | 去掉electron本身的菜单 | | 用只保留使用vue实现的菜单 |

---
