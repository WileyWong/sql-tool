---
name: document-generation-rules
description: 定义文档生成的核心原则，禁止主动生成汇总文档、分析报告，确保精简直接的响应方式
category: common
keywords: [文档生成, 响应原则, 禁止汇总, 精简输出, AI规范]
---

# 文档生成原则 ⭐ 必须遵守

## 核心规则 ⚠️

### **禁止主动生成文档** - 不生成汇总文档、分析报告、总结文档

**核心原则**:
- ❌ **禁止主动生成文档** - 不生成汇总文档、分析报告、总结文档
- ✅ **只在明确要求时生成** - 用户说"生成文档"、"总结"、"分析报告"才生成
- ✅ **精简直接回答** - 优先简洁回答，避免冗长输出
- ✅ **原地修改** - 指定生成文档时，在原文档中调整，不创建新文件

---

## 详细规则

### 1. 何时**不生成**文档

以下情况**禁止**生成任何形式的文档、报告、总结：

#### ❌ 完成任务后
```
用户: "帮我优化这个数据库设计"
AI: ✅ 直接修改设计文档，简洁说明改动
AI: ❌ 生成《数据库优化总结报告.md》
```

#### ❌ 分析代码后
```
用户: "分析这段代码的问题"
AI: ✅ 直接指出问题和解决方案
AI: ❌ 生成《代码分析报告.md》
```

#### ❌ 回答问题后
```
用户: "这个架构有什么问题？"
AI: ✅ 简洁列出问题和建议
AI: ❌ 生成《架构评审报告.md》
```

#### ❌ 实施变更后
```
用户: "实现这个功能"
AI: ✅ 实现功能，更新相关文档
AI: ❌ 生成《功能实现总结.md》
```

### 2. 何时**可以生成**文档

**只有**用户**明确要求**时才生成文档：

#### ✅ 明确的生成指令
```
用户: "生成一份数据库设计文档"
用户: "写一份架构分析报告"
用户: "总结一下这次重构"
用户: "创建一个变更提案文档"
```

#### ✅ 使用特定命令
```
/gen-db-design          # 生成数据库设计文档
/gen-architect-design   # 生成架构设计文档
/gen-api-docs          # 生成 API 文档
```

### 3. 文档生成方式

#### ✅ 原地修改优先
```
用户: "更新数据库设计"
AI: ✅ 在现有的 database-design.md 中修改
AI: ❌ 创建 database-design-v2.md
```

#### ✅ 指定位置生成
```
用户: "在 docs/ 下生成架构文档"
AI: ✅ 在 docs/architecture.md 生成
AI: ❌ 在根目录生成 ARCHITECTURE-SUMMARY.md
```

#### ✅ 使用标准模板
```
AI: ✅ 使用 global/templates/ 下的标准模板
AI: ❌ 自创文档格式
```

---

## 禁止生成的文档类型

### ❌ 总结类文档
- `SUMMARY.md`
- `总结报告.md`
- `完成总结.md`
- `实施总结.md`
- `变更总结.md`

### ❌ 分析类文档
- `ANALYSIS.md`
- `分析报告.md`
- `代码分析.md`
- `架构分析.md`

### ❌ 报告类文档
- `REPORT.md`
- `评审报告.md`
- `测试报告.md`
- `性能报告.md`

### ❌ 根目录文档
除了 `README.md` 外，**禁止**在项目根目录创建任何其他文档：
- ❌ `ARCHITECTURE.md` → 应放在 `docs/`
- ❌ `CHANGELOG.md` → 应放在 `docs/` 或 `changes/`
- ❌ `CONTRIBUTING.md` → 应放在 `docs/`
- ❌ 任何总结、分析、报告文档

---

## 正确的响应方式

### ✅ 场景 1: 完成任务
```
用户: "优化这个数据库设计"

❌ 错误响应:
"已完成优化，生成了《数据库优化总结.md》，包含..."

✅ 正确响应:
"已优化数据库设计：
1. 添加了 user_id 索引
2. 优化了 order_items 表结构
3. 调整了外键约束策略

详见 database-design.md 的更新。"
```

### ✅ 场景 2: 分析问题
```
用户: "这个架构有什么问题？"

❌ 错误响应:
"已生成《架构分析报告.md》，详细分析了..."

✅ 正确响应:
"发现以下问题：
1. 缺少缓存层，可能导致性能瓶颈
2. 数据库连接池配置不合理
3. 缺少限流机制

建议：
1. 引入 Redis 缓存
2. 调整连接池参数
3. 添加 API 限流"
```

### ✅ 场景 3: 实施变更
```
用户: "实现用户登录功能"

❌ 错误响应:
"已实现登录功能，生成了《登录功能实现总结.md》..."

✅ 正确响应:
"已实现用户登录功能：
- 创建了 UserController.login()
- 添加了 JWT 认证
- 更新了 API 文档

可以通过 POST /api/login 测试。"
```

---

## 例外情况

### ✅ 允许的文档类型

以下文档类型**允许**生成（但仍需用户明确要求）：

1. **设计文档** (使用标准模板)
   - `database-design.md`
   - `architecture-design.md`
   - `interface-design.md`

2. **API 文档** (使用标准模板)
   - `api-docs.md`
   - `openapi.yaml`

3. **变更提案** (使用变更管理流程)
   - `changes/active/YYYY-MM-DD-feature-name/proposal.md`
   - `changes/active/YYYY-MM-DD-feature-name/design.md`

4. **项目模板** (初始化项目时)
   - `README.md`
   - `package.json`
   - `pom.xml`

---

## 验证清单

在生成任何文档前，检查：

- [ ] 用户是否**明确要求**生成文档？
- [ ] 是否使用了特定的**生成命令**（如 `/gen-db-design`）？
- [ ] 是否可以通过**简洁回答**代替文档？
- [ ] 是否可以**原地修改**现有文档？
- [ ] 文档类型是否在**允许列表**中？
- [ ] 文档位置是否符合**目录规范**？
- [ ] 是否使用了**标准模板**？

**如果以上任何一项为"否"，则不应生成文档。**

---

## 常见错误示例

### ❌ 错误 1: 自动生成总结
```
用户: "帮我重构这段代码"
AI: "已完成重构，生成了《重构总结.md》"
```
**正确做法**: 直接说明重构内容，不生成文档。

### ❌ 错误 2: 在根目录创建文档
```
AI: "已生成 ARCHITECTURE-SUMMARY.md"
```
**正确做法**: 如需生成，应放在 `docs/` 目录。

### ❌ 错误 3: 创建新版本文档
```
AI: "已生成 database-design-v2.md"
```
**正确做法**: 在原文档 `database-design.md` 中修改。

### ❌ 错误 4: 未经要求生成报告
```
用户: "分析一下性能问题"
AI: "已生成《性能分析报告.md》"
```
**正确做法**: 直接列出性能问题和建议。

---

## 相关规范

- [项目宪章](../../memory/constitution.md) - II. 文档优先原则
- [开发指南](../../memory/guidelines.md) - 文档编写最佳实践
- [贡献指南](../../docs/CONTRIBUTING-GUIDE.md) - 文档贡献规范

---

**版本**: 1.0.0  
**制定日期**: 2025-11-02  
**适用范围**: 所有 Skills、Commands、AI 助手交互  
**优先级**: 最高 ⭐
