# AI辅助业务分析 Step by Step 教程

## 文档信息

- **作者**: johnsonyang
- **创建日期**: 2025-12-15
- **案例项目**: 面试官年度H5数据展示系统
- **使用工具**: CodeBuddy AI + BA技能链（ba-01 ~ ba-05）
- **目标读者**: 业务分析师、产品经理、技术团队

---

## 概述

本教程记录了使用AI辅助完成业务分析全流程的实践过程。通过6个BA技能的串联使用，从原始需求文档出发，逐步完成业务需求提取、Epic分析、用户故事生成、INVEST评估和验收标准编写。

### BA工作流全景

```
ba-01 业务需求提取
    ↓ 输出：业务目标、顶层用例、非功能需求
ba-02 Epic 分析
    ↓ 输出：拆解策略、用户角色分析、MVP 定义
ba-03 用户故事生成
    ↓ 输出：用户故事列表
ba-04 INVEST 评估
    ↓ 输出：评估报告、优先级排序
ba-05 验收标准
    ↓ 输出：GWT格式验收标准
ba-06 UI原型（可选）
    ↓ 输出：HTML原型
```

---

## 环节1：业务需求提取

### 当前环节
使用 `ba-01-business-requirement-extraction` 技能从原始需求材料中提取结构化业务需求。

### 目的
- 从非结构化的原始需求信息中提取结构化业务需求
- 生成 SMART 业务目标和顶层业务用例清单
- 识别非功能需求（NFR）和约束条件

### 操作过程
1. 准备原始需求材料（会议记录、Excel字段表、访谈内容等）
2. 调用 ba-01 技能进行需求提取
3. 输出业务需求文档

### 技能：ba-01-business-requirement-extraction

**技能描述**: 从会议记录、访谈、需求文档中提取结构化业务需求，生成 SMART 业务目标和顶层用例。

**上下文内容清单**:
- 原始需求材料：`For SHEEN 年度H5文案包装及字段确认表.xlsx`
- 测试数据样本：`「test脱敏」面试官信息-集团本部.xlsx`
- 会议沟通记录

### 提示词：原始提示词

```
使用技能ba-01对rq/下的所有需求文档进行分析，输出业务需求文档
```

### AI输出：对AI输出进行总结和摘要

**输出摘要**:
- 生成1个SMART业务目标
- 定义1个高层业务用例（包含3种访问场景）
- 识别59个数据字段
- 提取6项非功能需求
- 识别4项约束条件和3项假设依赖

**原始输出**: `business-requirements.md`

```markdown
# 面试官年度H5 - 业务需求提取文档

## 第1部分：业务目标（SMART原则）

### 业务目标1：为供应商提供面试官年度H5数据接口

- **Specific（具体）**: 
  - 开发面试官年度H5页面所需的数据接口
  - 提供面试官年度数据展示（统计截止至2025年12月15日）
  - 数据范围：集团正式员工针对集团本部岗位的线上面试数据
  - 支持7个页面场景的数据展示
  
- **Measurable（可量化）**: 
  - 完成数据接口文档交付给供应商（SHEEN）
  - 接口覆盖53个数据字段
  - 支持3种用户权限场景判断
  - 支持4种面试官TAG标签计算
  
- **Achievable（可实现）**: 
  - 基于已有面试官数据系统
  - 数据已完成脱敏处理
  
- **Relevant（相关性）**: 
  - 满足年度面试官H5页面展示需求
  - 增强面试官感知和认可度
  
- **Time-bound（时限）**: 
  - 本周需提供接口文档给供应商
  - 数据统计截止日期：2025年12月15日

## 第2部分：高层业务用例

### 业务用例1：面试官查看年度数据H5页面

**主要业务流程**:
- 场景A：正常访问流程（有权限且有数据）
- 场景B：非面试官访问流程
- 场景C：面试官但无数据记录

**扩展流程（低数据版本）**:
- E1.第三页低数据版本
- E2.第三页单日最大面试无数据版本
- E3.第四页低数据版本
- E4.第五页低数据版本
- E5.第六页低数据版本

**业务规则**:
- BR1: 数据统计截止日期为2025年12月15日
- BR2: 数据范围为集团正式员工针对集团本部岗位的线上面试数据
- BR3: 不区分GM级别，统一展示规则
- BR4: 展示维度为集团维度，非部门维度
- BR5: 担任面试官时长展示规则：年/月无数据时不展示对应单位
- BR6: 入职人最长在职年限展示规则：取年月日展示
- BR7: 总面试时长单位转换：小时，四舍五入
- BR8: 总面评字数单位转换：万

## 第3部分：数据字段清单

- 面试官基本信息字段（18个）
- 2025年面试统计字段（15个）
- 历史累计统计字段（20个）
- 好评词条数据（3个）
- 集团维度汇总数据（3个）

## 第4部分：非功能需求（NFR）

| 质量属性 | 需求描述 | 量化指标 | 优先级 |
|---------|---------|---------|--------|
| 响应时间 | H5页面数据接口响应快速 | P95<3秒 | High |
| 缓存策略 | 引入缓存应对流量突增 | 10000人缓存支持 | High |
| 身份鉴权 | 需增加鉴权接口判断用户权限 | 3种权限场景 | High |
| 数据脱敏 | 敏感数据需脱敏处理 | 测试数据已脱敏 | High |
| 数据完整性 | 数据覆盖全量面试官 | 截止2025.12.15全量数据 | High |
| 低数据兼容 | 支持低数据/无数据场景展示 | 5种低数据版本 | High |
```

---

## 环节2：Epic分析

### 当前环节
使用 `ba-02-epic-analysis` 技能对业务需求进行Epic分析和拆解策略制定。

### 目的
- 深入分析 Epic 的业务价值和复杂度
- 识别用户角色和使用场景
- 制定科学合理的拆解策略
- 定义 MVP 范围和验证指标

### 操作过程
1. 读取 ba-01 输出的业务需求文档
2. 调用 ba-02 技能进行 Epic 分析
3. 输出 Epic 分析报告

### 技能：ba-02-epic-analysis

**技能描述**: 分析大型 Epic 需求并制定拆解策略，识别用户角色、评估业务价值、选择拆解维度、识别依赖风险。

**上下文内容清单**:
- 上游输入：`business-requirements.md`
- 数据字段确认表

### 提示词：原始提示词

```
使用技能ba-02-epic-analysis对rq/下的所有需求文档进行分析，输出到rq/
```

### AI输出：对AI输出进行总结和摘要

**输出摘要**:

| 维度 | 结果 |
|-----|------|
| **Epic 类型** | 业务 Epic（直接交付面试官用户价值） |
| **复杂度** | 中等（59字段、7页面、逻辑清晰） |
| **Feature 数** | 7个 |
| **预估故事数** | 19个 |
| **MVP 范围** | 14个故事（鉴权+个人数据+词条+汇总+TAG） |
| **建议迭代** | 2个迭代 |

**7个 Feature 定义**:

| ID | Feature | 优先级 |
|----|---------|-------|
| F001 | 用户鉴权与权限判断 | Must |
| F002 | 面试官个人数据接口 | Must |
| F003 | 好评词条数据接口 | Must |
| F004 | 集团汇总数据接口 | Must |
| F005 | TAG标签计算 | Must |
| F006 | 低数据版本处理 | Should |
| F007 | 缓存策略实现 | Should |

**原始输出**: `epic-analysis.md`

```markdown
# 面试官年度H5 - Epic 分析报告

## 第1部分：Epic 概述分析

| 分析维度 | 内容 |
|---------|------|
| Epic 名称 | 面试官年度H5数据展示系统 |
| Epic 类型 | 业务 Epic - 直接交付面试官用户价值 |
| 业务价值 | 通过年度数据回顾H5页面，展示面试官个人贡献数据 |
| 核心目标 | 为供应商提供完整的数据接口，支撑7个页面场景 |
| 成功标准 | ①接口文档按时交付 ②数据覆盖全量10000名面试官 ③支持3种权限场景和5种低数据版本 |
| 复杂度评估 | 中等 - 数据字段多(59个)但业务逻辑清晰 |

## 第2部分：用户角色分析

| 用户角色 | 角色描述 | 核心诉求 | 使用频率 |
|---------|---------|---------|---------|
| 面试官（有数据） | 集团正式员工，担任面试官且有面试记录 | 查看个人年度面试贡献 | 低（一次性活动） |
| 面试官（无数据） | 集团正式员工，担任面试官但无面试记录 | 了解活动内容 | 低 |
| 非面试官 | 集团正式员工，非面试官身份 | 好奇心驱动访问 | 低 |
| 供应商开发人员 | SHEEN公司H5开发人员 | 获取清晰的接口文档 | 高（开发期间） |
| 技术团队 | 内部开发人员 | 设计并实现数据接口 | 高（开发期间） |
| 业务运营团队 | 招聘团队 | 活动顺利上线 | 中 |

## 第3部分：Feature 定义（SAFe 实践）

| Feature ID | Feature 名称 | 业务价值 | 预估故事数 | 优先级 |
|------------|-------------|---------|-----------|--------|
| F001 | 用户鉴权与权限判断 | 区分3种用户类型 | 3个 | Must |
| F002 | 面试官个人数据接口 | 提供53个字段的面试官年度数据 | 5个 | Must |
| F003 | 好评词条数据接口 | 展示候选人正向评价TOP1 | 2个 | Must |
| F004 | 集团汇总数据接口 | 展示集团维度面试官整体贡献 | 2个 | Must |
| F005 | TAG标签计算 | 根据4种规则计算面试官标签 | 2个 | Must |
| F006 | 低数据版本处理 | 支持5种低数据场景的降级展示 | 3个 | Should |
| F007 | 缓存策略实现 | 应对10000人流量突增 | 2个 | Should |

## 第4部分：拆解策略

**推荐拆解维度**: 按功能模块 + 按使用场景（混合拆解）

**理由**: 
1. 接口边界清晰，适合按功能模块拆解
2. 低数据版本涉及多个页面场景，需按使用场景补充拆解
3. 供应商对接需要接口维度清晰

## 第5部分：MVP 定义

| 维度 | 内容 |
|------|------|
| MVP 范围 | F001鉴权 + F002个人数据 + F003好评词条 + F004集团汇总 + F005 TAG计算（共14个故事） |
| 核心假设 | ①面试官会主动访问H5页面 ②年度数据回顾能增强面试官荣誉感 |
| 验证指标 | ①H5页面访问率（目标≥50%面试官） ②分享海报生成率（目标≥10%） |
| 预计交付 | 1个迭代（接口开发） |

## 第6部分：依赖与风险

| 风险点 | 风险等级 | 缓解措施 |
|--------|---------|---------|
| 数据未按时清洗 | 中 | 提前确认数据清洗进度 |
| 流量突增导致性能问题 | 中 | 引入缓存策略，提前压测 |
| 供应商接口理解偏差 | 低 | 提供测试数据和接口示例 |
```

---

## 环节3：用户故事生成

### 当前环节
使用 `ba-03-user-story-generation` 技能基于Epic分析结果生成用户故事列表。

### 目的
- 生成符合敏捷开发标准的用户故事列表
- 遵循"作为...我希望...以便..."格式
- 包含功能要点、业务规则和粒度评估

### 操作过程
1. 读取 ba-02 输出的 Epic 分析报告
2. 调用 ba-03 技能生成用户故事
3. 输出用户故事列表

### 技能：ba-03-user-story-generation

**技能描述**: 基于 Epic 分析结果生成符合敏捷开发标准的用户故事列表，遵循"作为...我希望...以便..."格式。

**上下文内容清单**:
- 上游输入：`epic-analysis.md`
- Feature 列表（7个）
- 用户角色定义（6个）

### 提示词：原始提示词

```
使用ba-03-user-story-generation技能，生成详细用户故事，输出到rq/
```

### AI输出：对AI输出进行总结和摘要

**输出摘要**:

| 维度 | 结果 |
|-----|------|
| **故事总数** | 19个 |
| **Feature 覆盖** | 7个全覆盖 |
| **粒度分布** | S(13个 68%), M(6个 32%) |
| **角色分布** | 面试官(16), 非面试官(1), 技术团队(2) |

**故事按Feature分布**:

| Feature | 故事数 | 故事ID |
|---------|-------|--------|
| F001 用户鉴权 | 3个 | US001-US003 |
| F002 个人数据 | 5个 | US004-US008 |
| F003 好评词条 | 2个 | US009-US010 |
| F004 集团汇总 | 2个 | US011-US012 |
| F005 TAG计算 | 2个 | US013-US014 |
| F006 低数据处理 | 3个 | US015-US017 |
| F007 缓存优化 | 2个 | US018-US019 |

**原始输出**: `user-stories.md`

```markdown
# 面试官年度H5 - 用户故事列表

## 故事列表总览

| 故事ID | 故事标题 | 所属 Feature | 用户角色 | 粒度 |
|--------|---------|-------------|---------|------|
| US001 | 用户身份识别 | F001 | 面试官 | S |
| US002 | 面试官权限判断 | F001 | 面试官 | S |
| US003 | 非面试官访问提示 | F001 | 非面试官 | S |
| US004 | 面试官基本信息查询 | F002 | 面试官 | M |
| US005 | 2025年面试统计数据查询 | F002 | 面试官 | M |
| US006 | 历史累计统计数据查询 | F002 | 面试官 | M |
| US007 | 面试时长单位转换 | F002 | 面试官 | S |
| US008 | 担任面试官时长格式化 | F002 | 面试官 | S |
| US009 | 好评词条TOP1查询 | F003 | 面试官 | S |
| US010 | 好评词条次数统计 | F003 | 面试官 | S |
| US011 | 集团面试官人数查询 | F004 | 面试官 | S |
| US012 | 集团汇总数据单位转换 | F004 | 面试官 | S |
| US013 | 面试官年限TAG计算 | F005 | 面试官 | S |
| US014 | 多维度TAG组合计算 | F005 | 面试官 | M |
| US015 | 第三页低数据版本处理 | F006 | 面试官 | S |
| US016 | 第四页低数据版本处理 | F006 | 面试官 | S |
| US017 | 第五六页低数据版本处理 | F006 | 面试官 | S |
| US018 | 面试官数据缓存 | F007 | 技术团队 | M |
| US019 | 集团汇总数据缓存 | F007 | 技术团队 | S |

## 用户故事示例

### US001: 用户身份识别

**用户故事**
> 作为 面试官，
> 我希望 系统能够自动识别我的企业身份，
> 以便 无需手动登录即可访问年度H5页面。

**功能要点**
- 通过企业SSO/Token获取用户身份信息
- 解析用户ID用于后续权限判断
- 支持企业微信等入口的身份透传

**业务规则**
- BR1: 仅支持集团正式员工访问
- BR2: 用户身份信息需与面试官维度表匹配

**粒度评估**: S - 调用现有企业认证系统，工作量约1-2天

### US004: 面试官基本信息查询

**用户故事**
> 作为 面试官，
> 我希望 能够查看我的基本信息和担任面试官时长，
> 以便 在H5第二页看到个性化的欢迎内容。

**功能要点**
- 查询面试官姓名（中英文名）
- 查询初任面试官时间
- 计算担任面试官时长（天数、年月日格式）
- 查询组织信息（BG、部门等）

**业务规则**
- BR5: 担任面试官时长展示规则：年/月无数据时不展示对应单位
- 示例：3年2个月、5个月、15天

**粒度评估**: M - 涉及18个基本信息字段，需格式化处理，工作量约3天
```

---

## 环节4：INVEST评估与优先级排序

### 当前环节
使用 `ba-04-invest-evaluation` 技能对用户故事进行INVEST原则评估和MoSCoW优先级排序。

### 目的
- 对用户故事进行INVEST六维度评估
- 识别质量问题并提出改进建议
- 按MoSCoW方法进行优先级排序
- 制定迭代规划建议

### 操作过程
1. 读取 ba-03 输出的用户故事列表
2. 调用 ba-04 技能进行 INVEST 评估
3. 输出评估报告和优先级排序

### 技能：ba-04-invest-evaluation

**技能描述**: 对用户故事进行 INVEST 原则评估和 MoSCoW 优先级排序，识别质量问题并提出改进建议。

**INVEST原则说明**:

| 维度 | 含义 | 评估标准 |
|------|------|---------|
| **I** - Independent | 独立性 | 故事之间尽量减少依赖 |
| **N** - Negotiable | 可协商 | 实现方式可以讨论调整 |
| **V** - Valuable | 有价值 | 对用户有明确的业务价值 |
| **E** - Estimable | 可估算 | 可以估算工作量 |
| **S** - Small | 小粒度 | 粒度适中，1-5天可完成 |
| **T** - Testable | 可测试 | 有明确的验收标准 |

**MoSCoW优先级说明**:

| 优先级 | 含义 | 占比要求 |
|-------|------|---------|
| 🔴 Must Have | 必须有 | ≤60% |
| 🟡 Should Have | 应该有 | - |
| 🟢 Could Have | 可以有 | - |
| ⚪ Won't Have | 暂不实现 | - |

**上下文内容清单**:
- 上游输入：`user-stories.md`
- 19个用户故事

### 提示词：原始提示词

```
使用 ba-04-evaluating-invest 技能进行INVEST评估和优先级排序
```

### AI输出：对AI输出进行总结和摘要

**输出摘要**:

| 维度 | 结果 |
|-----|------|
| **通过（≥85分）** | 18个 |
| **需改进（70-84分）** | 1个（US018缓存策略） |
| **故事点总计** | 39点 |

**MoSCoW优先级分布**:

| 优先级 | 数量 | 占比 | 故事点 |
|-------|------|------|--------|
| 🔴 Must Have | 8个 | 42% | 19点 |
| 🟡 Should Have | 7个 | 37% | 13点 |
| 🟢 Could Have | 4个 | 21% | 7点 |

**迭代规划建议**:

| 迭代 | 故事 | 故事点 | 累计完成度 |
|------|------|--------|-----------|
| Sprint 1 | 鉴权+核心数据接口 | 19点 | 49% |
| Sprint 2 | 格式化+TAG+缓存 | 13点 | 82% |
| Sprint 3 | 低数据版本 | 7点 | 100% |

**原始输出**: `invest-evaluation.md`

```markdown
# 面试官年度H5 - INVEST评估与优先级排序

## 第一部分：INVEST评估总览

| 故事ID | 故事标题 | I | N | V | E | S | T | 综合分 | 故事点 | 状态 |
|--------|---------|---|---|---|---|---|---|--------|--------|------|
| US001 | 用户身份识别 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 90 | 2 | 通过 |
| US002 | 面试官权限判断 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 90 | 2 | 通过 |
| US003 | 非面试官访问提示 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 100 | 1 | 通过 |
| US004 | 面试官基本信息查询 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 90 | 3 | 通过 |
| US005 | 2025年面试统计数据查询 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 90 | 3 | 通过 |
| US006 | 历史累计统计数据查询 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 90 | 5 | 通过 |
| ... | ... | ... | ... | ... | ... | ... | ... | ... | ... | ... |
| US018 | 面试官数据缓存 | ⚠️ | ✅ | ✅ | ⚠️ | ✅ | ⚠️ | 80 | 5 | 需改进 |

**图例**: ✅符合要求(20分) ⚠️部分符合，需改进(15分) ❌不符合要求(≤10分)

## 第二部分：问题故事详细分析

### US018: 面试官数据缓存

**综合评分**: 80分

**问题维度**: I(独立性)、E(可估算)、T(可测试)

**问题描述**:
- **独立性问题**: 依赖US004-US006个人数据接口完成后才能实施缓存策略
- **可估算问题**: 缓存架构设计涉及技术选型，需技术评审后才能准确估算
- **可测试问题**: 缓存命中率≥95%的验收标准需要压测环境支持

**改进建议**:
1. 将缓存策略设计与缓存实现拆分为两个故事
2. 在技术设计阶段明确缓存方案后再进行精确估算
3. 补充具体的缓存测试场景和验收标准

## 第三部分：MoSCoW优先级分类

### 🔴 Must Have（必须有）- 第一优先级

| 故事ID | 故事标题 | 故事点 | 排序理由 |
|--------|---------|--------|---------|
| US001 | 用户身份识别 | 2 | 核心鉴权功能，是所有功能的入口前提 |
| US002 | 面试官权限判断 | 2 | 区分3种用户类型，决定页面展示逻辑 |
| US003 | 非面试官访问提示 | 1 | 保证非目标用户的友好体验 |
| US004 | 面试官基本信息查询 | 3 | H5第二页核心数据 |
| US005 | 2025年面试统计数据查询 | 3 | H5第五页核心数据 |
| US006 | 历史累计统计数据查询 | 5 | H5第三四页核心数据 |
| US009 | 好评词条TOP1查询 | 2 | H5第六页核心数据 |
| US011 | 集团面试官人数查询 | 1 | 个人总结页核心数据 |

**Must Have统计**: 8/19 = **42%** ✅ 符合≤60%要求

### 🟡 Should Have（应该有）- 第二优先级

| 故事ID | 故事标题 | 故事点 | 排序理由 |
|--------|---------|--------|---------|
| US007 | 面试时长单位转换 | 1 | 数据展示格式化 |
| US008 | 担任面试官时长格式化 | 1 | 数据展示格式化 |
| US010 | 好评词条次数统计 | 1 | 补充词条详情 |
| US012 | 集团汇总数据单位转换 | 1 | 集团数据格式化 |
| US013 | 面试官年限TAG计算 | 1 | 分享页标签展示 |
| US014 | 多维度TAG组合计算 | 3 | 分享页多标签展示 |
| US018 | 面试官数据缓存 | 5 | 性能优化 |

### 🟢 Could Have（可以有）- 第三优先级

| 故事ID | 故事标题 | 故事点 | 排序理由 |
|--------|---------|--------|---------|
| US015 | 第三页低数据版本处理 | 2 | 降级展示，非核心路径 |
| US016 | 第四页低数据版本处理 | 1 | 降级展示，非核心路径 |
| US017 | 第五六页低数据版本处理 | 2 | 降级展示，非核心路径 |
| US019 | 集团汇总数据缓存 | 2 | 性能优化，集团数据量小 |

## 第四部分：DoR 检查与迭代规划

### 建议迭代安排

| 迭代 | 故事ID | 故事点 | 预估工作量 | 累计完成度 |
|------|--------|--------|-----------|-----------|
| Sprint 1 | US001-US006, US009, US011 | 19点 | 8-10天 | 49% |
| Sprint 2 | US007-US008, US010, US012-US014, US018 | 13点 | 5-7天 | 82% |
| Sprint 3 | US015-US017, US019 | 7点 | 3-4天 | 100% |
```

---

## 环节5：验收标准编写

### 当前环节
使用 `ba-05-acceptance-criteria` 技能为高优先级故事编写验收标准。

### 目的
- 为Must Have故事编写详细的验收标准（AC）
- 使用Given-When-Then格式
- 覆盖正常流程、异常情况和边界条件
- 确保开发和测试团队对"完成"有一致理解

### 操作过程
1. 读取 ba-04 输出的 Must Have 故事列表
2. 读取业务需求文档获取业务规则
3. 调用 ba-05 技能编写验收标准
4. 输出验收标准文档

### 技能：ba-05-acceptance-criteria

**技能描述**: 为高优先级用户故事编写详细的验收标准，使用 Given-When-Then 格式，覆盖正常流程、异常情况和边界条件。

**Given-When-Then格式说明**:

| 元素 | 含义 | 示例 |
|------|------|------|
| **Given** | 前置条件 | 用户已登录系统 |
| **When** | 用户操作 | 点击"提交订单"按钮 |
| **Then** | 预期结果 | 显示订单确认页面 |

**上下文内容清单**:
- 上游输入：`invest-evaluation.md`（8个Must Have故事）
- 业务规则：`business-requirements.md`

### 提示词：原始提示词

```
使用 ba-05-acceptance-criteria 技能为8个Must Have故事编写验收标准
```

### AI输出：对AI输出进行总结和摘要

**输出摘要**:

| 维度 | 结果 |
|-----|------|
| **故事数** | 8个 Must Have 故事 |
| **AC 总数** | 26条验收标准 |
| **格式** | 全部使用 Given-When-Then |

**各故事 AC 分布**:

| 故事ID | 故事标题 | AC 数量 | 覆盖场景 |
|--------|---------|--------|---------|
| US001 | 用户身份识别 | 3条 | 正常识别、Token无效、非企业员工 |
| US002 | 面试官权限判断 | 4条 | 有数据、无数据、非面试官、数据驱动 |
| US003 | 非面试官访问提示 | 2条 | 正常展示、交互限制 |
| US004 | 面试官基本信息查询 | 3条 | 正常查询、时长格式化、字段为空 |
| US005 | 2025年面试统计 | 3条 | 正常查询、数据汇总、低数据判断 |
| US006 | 历史累计统计 | 4条 | 正常查询、年限格式化、E1/E2/E3判断 |
| US009 | 好评词条TOP1 | 3条 | 正常查询、次数相同、低数据判断 |
| US011 | 集团面试官人数 | 3条 | 正常查询、单位转换、数据一致性 |

**原始输出**: `acceptance-criteria.md`

```markdown
# 面试官年度H5 - 验收标准文档

## US001: 用户身份识别

### 用户故事
> 作为 面试官，
> 我希望 系统能够自动识别我的企业身份，
> 以便 无需手动登录即可访问年度H5页面。

---

### 验收标准

#### AC1: 正常身份识别 - 企业微信入口

**场景描述**: 用户通过企业微信入口访问H5页面，系统自动识别身份

**Given** 前置条件
- 用户已登录企业微信
- 用户为集团正式员工
- 系统SSO/Token服务正常运行

**When** 用户操作
- 用户点击H5页面链接
- 系统接收到访问请求

**Then** 预期结果
- 系统成功获取用户Token/Cookie
- 系统解析出用户ID（员工工号）
- 用户ID传递给后续权限判断接口
- 无需用户手动输入任何登录信息

---

#### AC2: 异常场景 - Token无效或过期

**场景描述**: 用户Token无效或已过期时的处理

**Given** 前置条件
- 用户访问H5页面
- 用户Token无效或已过期

**When** 用户操作
- 系统尝试解析用户身份

**Then** 预期结果
- 系统返回身份识别失败状态
- 系统引导用户重新登录企业微信
- 不展示任何面试官数据

---

#### AC3: 异常场景 - 非企业员工访问

**场景描述**: 非集团员工尝试访问H5页面

**Given** 前置条件
- 访问者非集团正式员工
- 无有效企业身份凭证

**When** 用户操作
- 用户尝试访问H5页面

**Then** 预期结果
- 系统无法获取有效用户ID
- 系统返回身份识别失败状态
- 页面展示访问受限提示

---

### 边界条件

| 边界场景 | 输入条件 | 预期行为 |
|---------|---------|---------|
| Token即将过期 | Token有效期<5分钟 | 正常识别，不影响本次访问 |
| 多端同时访问 | 同一用户在多设备访问 | 各端独立识别，互不影响 |
| 网络中断 | 身份识别过程中网络断开 | 显示网络错误提示，支持重试 |

---

### 性能要求

| 性能指标 | 要求 | 测试方法 |
|---------|------|---------|
| 身份识别响应时间 | <500ms | 接口压测 |
| 成功率 | ≥99.9% | 监控统计 |

---

### 测试建议

**测试类型**: 集成测试
**测试数据**: 有效Token、无效Token、过期Token
**自动化建议**: 高优先级，适合自动化

---

## US002: 面试官权限判断

### 验收标准

#### AC4: 权限判断 - 数据驱动测试

**Scenario Outline**: 验证不同用户类型的权限判断结果

**Given** 用户身份已识别
- 用户ID为 <用户ID>

**When** 系统查询权限
- 调用权限判断接口

**Then** 系统返回
- 权限状态为 <权限状态>
- 展示页面为 <展示页面>

**Examples**:
| 用户ID | 用户类型 | 权限状态 | 展示页面 |
|--------|---------|----------|----------|
| user_001 | 面试官有数据 | INTERVIEWER_WITH_DATA | 完整数据页 |
| user_002 | 面试官无数据 | INTERVIEWER_NO_DATA | 无数据提示页 |
| user_003 | 非面试官 | NOT_INTERVIEWER | 无权限提示页 |
```

---

## 核心理论简介

### SMART原则

用于定义业务目标的5要素标准：

| 要素 | 含义 | 示例 |
|------|------|------|
| **S**pecific | 具体的 | "开发面试官年度H5数据接口" |
| **M**easurable | 可量化的 | "接口覆盖53个数据字段" |
| **A**chievable | 可实现的 | "基于已有面试官数据系统" |
| **R**elevant | 相关的 | "满足年度面试官H5展示需求" |
| **T**ime-bound | 有时限的 | "本周交付接口文档" |

### INVEST原则

用于评估用户故事质量的6维度标准：

| 维度 | 含义 | 评分标准 |
|------|------|---------|
| **I**ndependent | 独立性 | 故事之间尽量减少依赖 |
| **N**egotiable | 可协商 | 实现方式可以讨论调整 |
| **V**aluable | 有价值 | 对用户有明确的业务价值 |
| **E**stimable | 可估算 | 可以估算工作量 |
| **S**mall | 小粒度 | 粒度适中，1-5天可完成 |
| **T**estable | 可测试 | 有明确的验收标准 |

**评分规则**:
- 每维度20分，满分100分
- ≥85分：通过，可进入开发
- 70-84分：需改进，修正后再评估
- <70分：需重写，问题较多

### MoSCoW优先级

用于需求优先级排序的4级分类法：

| 优先级 | 含义 | 占比要求 | 说明 |
|-------|------|---------|------|
| 🔴 **M**ust Have | 必须有 | ≤60% | 核心功能，没有则无法上线 |
| 🟡 **S**hould Have | 应该有 | - | 重要功能，影响用户体验 |
| 🟢 **C**ould Have | 可以有 | - | 锦上添花，可后续迭代 |
| ⚪ **W**on't Have | 暂不实现 | - | 本版本不做，未来考虑 |

### Given-When-Then格式

用于编写验收标准的BDD（行为驱动开发）格式：

```gherkin
Given 前置条件（系统状态）
  - 用户已登录系统
  - 购物车中有商品

When 用户操作（触发行为）
  - 点击"提交订单"按钮

Then 预期结果（系统响应）
  - 显示订单确认页面
  - 订单状态为"待支付"
  - 库存减少相应数量
```

**场景覆盖要求**:

| 场景类型 | 最少数量 |
|---------|---------|
| Happy Path（正常流程） | 1 |
| 异常处理（错误输入、权限不足等） | 2 |
| 边界条件（空值、最大值、超时等） | 2 |

---

## 最佳实践总结

### Do's（推荐做法）

| 环节 | 推荐做法 |
|------|---------|
| 需求提取 | 标注来源，使用SMART原则 |
| Epic分析 | 识别完整用户角色，定义MVP范围 |
| 故事编写 | 使用标准格式，控制粒度S/M |
| INVEST评估 | 量化评分，Must Have≤60% |
| 验收标准 | GWT格式，覆盖异常和边界 |

### Don'ts（避免做法）

| 环节 | 避免做法 |
|------|---------|
| 需求提取 | 模糊表达、缺少来源追溯 |
| Epic分析 | 只关注功能，忽略用户价值 |
| 故事编写 | 角色模糊、粒度过大（XL） |
| INVEST评估 | 主观判断、Must Have过多 |
| 验收标准 | 不可测试、缺少异常场景 |

---

## 输出文档清单

| 序号 | 文档名称 | 生成技能 | 主要内容 |
|------|---------|---------|---------|
| 1 | `business-requirements.md` | ba-01 | SMART目标、顶层用例、NFR |
| 2 | `epic-analysis.md` | ba-02 | Feature定义、拆解策略、MVP |
| 3 | `user-stories.md` | ba-03 | 19个用户故事详细列表 |
| 4 | `invest-evaluation.md` | ba-04 | INVEST评分、MoSCoW排序 |
| 5 | `acceptance-criteria.md` | ba-05 | 26条GWT格式验收标准 |

---

## 后续步骤

完成ba-01到ba-05的业务分析后，可继续：

1. **ba-06 UI原型**: 使用 `ba-06-ui-html-prototype` 技能生成HTML原型
2. **技术设计**: 进入技术设计阶段，设计接口和缓存策略
3. **开发实施**: 按迭代规划进行开发
4. **测试验收**: 基于验收标准进行测试

---

## 附录：技能调用命令参考

```bash
# 业务需求提取
使用技能ba-01对rq/下的所有需求文档进行分析

# Epic分析
使用技能ba-02-epic-analysis对需求文档进行分析

# 用户故事生成
使用ba-03-user-story-generation技能，生成详细用户故事

# INVEST评估
使用ba-04-evaluating-invest技能进行INVEST评估和优先级排序

# 验收标准编写
使用ba-05-acceptance-criteria技能为Must Have故事编写验收标准

# UI原型生成（可选）
使用ba-06-ui-html-prototype技能生成页面原型
```
