# 面试官年度H5 - 验收标准文档

## 文档信息

- **作者**: johnsonyang
- **文档版本**: v1.0
- **创建日期**: 2025-12-12
- **上游依赖**: invest-evaluation.md (v1.0)
- **下游使用**: 测试用例设计、开发验收

---

## Must Have 故事验收标准

---

## US001: 用户身份识别

### 用户故事
> 作为 面试官，
> 我希望 系统能够自动识别我的企业身份，
> 以便 无需手动登录即可访问年度H5页面。

---

### 验收标准

#### AC1: 正常身份识别 - 企业微信入口

**场景描述**: 用户通过企业微信入口访问H5页面，系统自动识别身份

**Given** 前置条件
- 用户已登录企业微信
- 用户为集团正式员工
- 系统SSO/Token服务正常运行

**When** 用户操作
- 用户点击H5页面链接
- 系统接收到访问请求

**Then** 预期结果
- 系统成功获取用户Token/Cookie
- 系统解析出用户ID（员工工号）
- 用户ID传递给后续权限判断接口
- 无需用户手动输入任何登录信息

---

#### AC2: 异常场景 - Token无效或过期

**场景描述**: 用户Token无效或已过期时的处理

**Given** 前置条件
- 用户访问H5页面
- 用户Token无效或已过期

**When** 用户操作
- 系统尝试解析用户身份

**Then** 预期结果
- 系统返回身份识别失败状态
- 系统引导用户重新登录企业微信
- 不展示任何面试官数据

---

#### AC3: 异常场景 - 非企业员工访问

**场景描述**: 非集团员工尝试访问H5页面

**Given** 前置条件
- 访问者非集团正式员工
- 无有效企业身份凭证

**When** 用户操作
- 用户尝试访问H5页面

**Then** 预期结果
- 系统无法获取有效用户ID
- 系统返回身份识别失败状态
- 页面展示访问受限提示

---

### 边界条件

| 边界场景 | 输入条件 | 预期行为 |
|---------|---------|---------|
| Token即将过期 | Token有效期<5分钟 | 正常识别，不影响本次访问 |
| 多端同时访问 | 同一用户在多设备访问 | 各端独立识别，互不影响 |
| 网络中断 | 身份识别过程中网络断开 | 显示网络错误提示，支持重试 |

---

### 性能要求

| 性能指标 | 要求 | 测试方法 |
|---------|------|---------|
| 身份识别响应时间 | <500ms | 接口压测 |
| 成功率 | ≥99.9% | 监控统计 |

---

### 测试建议

**测试类型**: 集成测试
**测试数据**: 有效Token、无效Token、过期Token
**自动化建议**: 高优先级，适合自动化

---

## US002: 面试官权限判断

### 用户故事
> 作为 面试官，
> 我希望 系统能够判断我是否有面试数据记录，
> 以便 决定展示完整数据页面还是无数据提示页。

---

### 验收标准

#### AC1: 权限判断 - 面试官有数据

**场景描述**: 用户为面试官且有有效面试数据

**Given** 前置条件
- 用户身份已识别成功
- 用户ID已传入权限判断接口

**When** 系统操作
- 系统查询面试官维度表
- 系统判断用户是否为面试官
- 系统判断用户是否有面试数据（截止2025.12.15）

**Then** 预期结果
- 系统返回权限状态：`INTERVIEWER_WITH_DATA`
- 系统允许访问完整H5数据页面
- 后续接口可正常获取面试官数据

---

#### AC2: 权限判断 - 面试官无数据

**场景描述**: 用户为面试官但无有效面试数据

**Given** 前置条件
- 用户身份已识别成功
- 用户在面试官维度表中存在记录
- 用户无截止2025.12.15的面试数据

**When** 系统操作
- 系统查询面试官维度表

**Then** 预期结果
- 系统返回权限状态：`INTERVIEWER_NO_DATA`
- 系统展示无数据提示页
- 提示文案："Hi，同学：本数据回顾统计范围截止至2025.12.15，抱歉目前暂时无法对你开放查看。期待未来再见！"

---

#### AC3: 权限判断 - 非面试官

**场景描述**: 用户不是面试官

**Given** 前置条件
- 用户身份已识别成功
- 用户不在面试官维度表中

**When** 系统操作
- 系统查询面试官维度表

**Then** 预期结果
- 系统返回权限状态：`NOT_INTERVIEWER`
- 系统展示无权限提示页
- 提示文案："Hi，同学：本数据回顾仅向面试官群体开放，抱歉目前无法对你开放查看。期待未来有机会以鹅厂面试官的身份再与你重逢。"

---

#### AC4: 权限判断 - 数据驱动测试

**Scenario Outline**: 验证不同用户类型的权限判断结果

**Given** 用户身份已识别
- 用户ID为 <用户ID>

**When** 系统查询权限
- 调用权限判断接口

**Then** 系统返回
- 权限状态为 <权限状态>
- 展示页面为 <展示页面>

**Examples**:
| 用户ID | 用户类型 | 权限状态 | 展示页面 |
|--------|---------|----------|----------|
| user_001 | 面试官有数据 | INTERVIEWER_WITH_DATA | 完整数据页 |
| user_002 | 面试官无数据 | INTERVIEWER_NO_DATA | 无数据提示页 |
| user_003 | 非面试官 | NOT_INTERVIEWER | 无权限提示页 |

---

### 边界条件

| 边界场景 | 输入条件 | 预期行为 |
|---------|---------|---------|
| 用户ID不存在 | 传入无效用户ID | 返回NOT_INTERVIEWER状态 |
| 数据刚好截止日期 | 面试数据日期=2025.12.15 | 计入有效数据 |
| 离职员工 | 员工状态为离职 | 根据面试官维度表判断，不受员工状态影响 |

---

### 性能要求

| 性能指标 | 要求 | 测试方法 |
|---------|------|---------|
| 权限判断响应时间 | <1秒 | 接口压测 |
| 查询成功率 | ≥99.9% | 监控统计 |

---

### 测试建议

**测试类型**: 功能测试、集成测试
**测试数据**: 面试官有数据用户、面试官无数据用户、非面试官用户
**自动化建议**: 高优先级，核心功能必须自动化

---

## US003: 非面试官访问提示

### 用户故事
> 作为 非面试官员工，
> 我希望 在访问H5页面时看到友好的提示信息，
> 以便 了解本活动仅向面试官群体开放。

---

### 验收标准

#### AC1: 正常展示无权限提示页

**场景描述**: 非面试官访问H5页面时展示友好提示

**Given** 前置条件
- 用户身份已识别成功
- 权限判断结果为`NOT_INTERVIEWER`

**When** 系统操作
- 系统渲染无权限提示页面

**Then** 预期结果
- 页面展示提示文案："Hi，同学：本数据回顾仅向面试官群体开放，抱歉目前无法对你开放查看。期待未来有机会以鹅厂面试官的身份再与你重逢。"
- 提示信息居中展示
- 页面风格与整体H5保持一致
- 无任何面试官数据展示

---

#### AC2: 页面交互限制

**场景描述**: 非面试官在提示页面的交互限制

**Given** 前置条件
- 用户在无权限提示页面

**When** 用户操作
- 用户尝试滑动/点击页面

**Then** 预期结果
- 页面不跳转到数据展示页
- 无法通过任何方式访问面试官数据
- 可正常关闭/退出页面

---

### 边界条件

| 边界场景 | 输入条件 | 预期行为 |
|---------|---------|---------|
| 页面刷新 | 用户刷新无权限页面 | 重新进行权限判断，仍展示提示页 |
| 直接访问数据接口 | 非面试官直接调用数据接口 | 接口返回无权限错误 |

---

### 界面要求

**必要元素**:
- 提示文案（居中展示）
- 页面背景（与H5整体风格一致）

**交互行为**:
- 支持页面关闭/返回操作
- 不支持向下滑动进入数据页

---

### 测试建议

**测试类型**: 功能测试、UI测试
**测试数据**: 非面试官用户
**自动化建议**: 中优先级，UI验证可手动

---

## US004: 面试官基本信息查询

### 用户故事
> 作为 面试官，
> 我希望 能够查看我的基本信息和担任面试官时长，
> 以便 在H5第二页看到个性化的欢迎内容。

---

### 验收标准

#### AC1: 正常查询基本信息

**场景描述**: 面试官成功查询个人基本信息

**Given** 前置条件
- 用户权限判断为`INTERVIEWER_WITH_DATA`
- 用户ID已传入数据接口

**When** 系统操作
- 系统查询面试官维度表
- 系统返回基本信息字段

**Then** 预期结果
- 返回面试官中英文名（如"张三 zhangsan"）
- 返回初任面试官时间（如"2020-03-15"）
- 返回担任面试官时长（天数，如"1735"）
- 返回担任面试官时长格式化（如"4年9个月"）
- 返回BG、部门、工作地等组织信息

---

#### AC2: 担任面试官时长格式化展示

**场景描述**: 验证时长格式化规则（年/月无数据时不展示对应单位）

**Given** 前置条件
- 系统已获取担任面试官时长（天数）

**When** 系统操作
- 系统将天数转换为年月日格式

**Then** 预期结果
- 符合BR5规则：年/月无数据时不展示对应单位

**Examples**:
| 担任天数 | 格式化结果 | 说明 |
|---------|-----------|------|
| 1095 | 3年 | 整年，不展示月和日 |
| 400 | 1年1个月 | 有年有月，不展示日 |
| 25 | 25天 | 不足月，只展示天 |
| 365 | 1年 | 整年 |
| 60 | 2个月 | 不足年，只展示月 |
| 395 | 1年1个月 | 有年有月 |

---

#### AC3: 异常场景 - 部分字段为空

**场景描述**: 某些非必填字段为空时的处理

**Given** 前置条件
- 用户为面试官
- 部分组织信息字段为空

**When** 系统操作
- 系统查询并返回数据

**Then** 预期结果
- 必填字段（姓名、时长）正常返回
- 空字段返回空字符串或null
- 不影响页面正常展示

---

### 边界条件

| 边界场景 | 输入条件 | 预期行为 |
|---------|---------|---------|
| 刚成为面试官 | 担任时长=0天 | 展示"0天"或"今天" |
| 超长时长 | 担任时长>10年 | 正常展示"10年X个月" |
| 中英文名相同 | 中文名=英文名 | 正常展示，不去重 |

---

### 性能要求

| 性能指标 | 要求 | 测试方法 |
|---------|------|---------|
| 数据查询响应时间 | <1秒 | 接口压测 |
| 缓存命中时响应时间 | <200ms | 接口压测 |

---

### 测试建议

**测试类型**: 功能测试、数据验证测试
**测试数据**: 不同时长的面试官（新进/熟练/资深）
**自动化建议**: 高优先级，数据转换逻辑需自动化验证

---

## US005: 2025年面试统计数据查询

### 用户故事
> 作为 面试官，
> 我希望 能够查看我2025年的面试统计数据，
> 以便 在H5第五页了解今年的面试贡献。

---

### 验收标准

#### AC1: 正常查询2025年面试统计

**场景描述**: 面试官成功查询2025年面试统计数据

**Given** 前置条件
- 用户权限判断为`INTERVIEWER_WITH_DATA`
- 数据统计截止日期为2025年12月15日

**When** 系统操作
- 系统查询面试官维度表
- 系统返回2025年统计字段

**Then** 预期结果
- 返回2025年面试总场次（社招+校招汇总）
- 返回2025年集团面试时长（分钟）
- 返回2025年集团面评总字数
- 返回2025年问卷点赞数
- 返回2025年问卷好评数
- 社招和校招数据分别返回，同时返回汇总值

---

#### AC2: 数据汇总计算验证

**场景描述**: 验证社招+校招数据汇总正确性

**Given** 前置条件
- 系统已获取社招和校招分项数据

**When** 系统操作
- 系统计算汇总值

**Then** 预期结果
- 2025年面试总场次 = 2025年社招面试总场次 + 2025年校招面试总场次
- 数据类型为整数
- 无精度丢失

---

#### AC3: 第五页低数据版本判断

**场景描述**: 判断是否需要展示低数据版本

**Given** 前置条件
- 系统已获取2025年面试总人数

**When** 系统操作
- 系统判断E4条件

**Then** 预期结果
- 当2025年面试总人数=0时，返回低数据版本标识
- 当2025年面试总人数>0时，返回正常版本标识

---

### 边界条件

| 边界场景 | 输入条件 | 预期行为 |
|---------|---------|---------|
| 仅有社招数据 | 校招数据全为0 | 正常展示社招数据，汇总=社招 |
| 仅有校招数据 | 社招数据全为0 | 正常展示校招数据，汇总=校招 |
| 数据全为0 | 所有2025年数据为0 | 展示低数据版本 |
| 超大数值 | 面试场次>1000 | 正常展示，不截断 |

---

### 性能要求

| 性能指标 | 要求 | 测试方法 |
|---------|------|---------|
| 数据查询响应时间 | <1秒 | 接口压测 |
| 数据准确性 | 100% | 数据核对 |

---

### 测试建议

**测试类型**: 功能测试、数据验证测试
**测试数据**: 有完整数据用户、仅社招用户、仅校招用户、无数据用户
**自动化建议**: 高优先级，数据汇总逻辑需自动化验证

---

## US006: 历史累计统计数据查询

### 用户故事
> 作为 面试官，
> 我希望 能够查看我成为面试官以来的累计统计数据，
> 以便 在H5第三、四页了解历史面试贡献。

---

### 验收标准

#### AC1: 正常查询历史累计数据

**场景描述**: 面试官成功查询历史累计统计数据

**Given** 前置条件
- 用户权限判断为`INTERVIEWER_WITH_DATA`
- 用户ID已传入数据接口

**When** 系统操作
- 系统查询面试官维度表
- 系统返回历史累计字段

**Then** 预期结果
- 返回成为面试官以来完成的面试场次
- 返回成为面试官以来累计面试时长（分钟）
- 返回成为面试官以来单日最多面试人次（不限时间段）
- 返回单日最大面试量的日期
- 返回面试人数最终入职人数
- 返回入职人数最长年限

---

#### AC2: 入职人最长年限格式化展示

**场景描述**: 验证入职人最长年限格式化规则

**Given** 前置条件
- 系统已获取入职人数最长年限（浮点数，单位年）

**When** 系统操作
- 系统将年限转换为年月日格式

**Then** 预期结果
- 符合BR6规则：年/月为0不展示对应单位

**Examples**:
| 年限值 | 格式化结果 | 说明 |
|-------|-----------|------|
| 3.5 | 3年6个月 | 正常展示 |
| 2.0 | 2年 | 整年，不展示月 |
| 0.5 | 6个月 | 不足年，只展示月 |
| 0.08 | 1个月 | 约1个月 |
| 5.25 | 5年3个月 | 正常展示 |

---

#### AC3: 第三页低数据版本判断

**场景描述**: 判断第三页是否需要展示低数据版本

**Given** 前置条件
- 系统已获取面试人数和总面试时长

**When** 系统操作
- 系统判断E1、E2条件

**Then** 预期结果
- E1：当【成为面试官以来完成的面试人数】或【总面试时长】任意为0时，返回E1低数据版本标识
- E2：当【成为面试官以来单日最多面试人次】为0时，返回E2低数据版本标识

---

#### AC4: 第四页低数据版本判断

**场景描述**: 判断第四页是否需要展示低数据版本

**Given** 前置条件
- 系统已获取总入职人数

**When** 系统操作
- 系统判断E3条件

**Then** 预期结果
- E3：当【总入职人数】为0时，返回E3低数据版本标识

---

### 边界条件

| 边界场景 | 输入条件 | 预期行为 |
|---------|---------|---------|
| 单日最大面试=1 | 单日最多面试1人 | 正常展示"1人" |
| 入职年限<1个月 | 年限=0.02 | 展示"1个月"或最小单位 |
| 无入职数据 | 入职人数=0 | 展示第四页低数据版本 |
| 单日最大日期为空 | 无单日最大记录 | 日期字段返回空，触发E2 |

---

### 性能要求

| 性能指标 | 要求 | 测试方法 |
|---------|------|---------|
| 数据查询响应时间 | <1.5秒 | 接口压测 |
| 数据准确性 | 100% | 数据核对 |

---

### 测试建议

**测试类型**: 功能测试、数据验证测试
**测试数据**: 完整数据用户、部分数据用户、边界数据用户
**自动化建议**: 高优先级，格式化逻辑和低数据判断需自动化

---

## US009: 好评词条TOP1查询

### 用户故事
> 作为 面试官，
> 我希望 能够查看候选人对我的高频正向评价词条，
> 以便 在H5第六页了解候选人对我的认可。

---

### 验收标准

#### AC1: 正常查询好评词条TOP1

**场景描述**: 面试官成功查询好评词条TOP1

**Given** 前置条件
- 用户权限判断为`INTERVIEWER_WITH_DATA`
- 用户在2025年度好评词条表中有记录

**When** 系统操作
- 系统查询2025年度好评词条表
- 系统按次数排序取TOP1

**Then** 预期结果
- 返回好评词条内容（4种标准词条之一）
- 返回该词条出现次数
- 词条内容完整，不截断

**好评词条类型**:
1. 面试官对我的阐述和提问积极反馈，友好交流，让我感受到了平等尊重
2. 面试官给予了我充分阐述过往经历或自身优势的机会
3. 面试官详细介绍了岗位和业务，让我更期待加入腾讯
4. 面试官有很强的个人专业魅力，让我更期待与之共事

---

#### AC2: 多词条次数相同时的处理

**场景描述**: 多个词条次数相同时的TOP1选择

**Given** 前置条件
- 用户有多个好评词条
- 多个词条次数相同

**When** 系统操作
- 系统按次数排序

**Then** 预期结果
- 返回其中任意一个作为TOP1（或按词条ID顺序取第一个）
- 返回的词条和次数正确
- 结果稳定，多次查询返回相同结果

---

#### AC3: 第六页低数据版本判断

**场景描述**: 判断是否需要展示低数据版本

**Given** 前置条件
- 系统查询用户好评词条

**When** 系统操作
- 系统判断E5条件

**Then** 预期结果
- 当用户无好评词条记录或2025年问卷点赞数=0时，返回E5低数据版本标识
- 当用户有好评词条时，返回正常版本标识和TOP1数据

---

### 边界条件

| 边界场景 | 输入条件 | 预期行为 |
|---------|---------|---------|
| 仅1个词条 | 只有1条好评记录 | 返回该词条作为TOP1 |
| 次数=1 | TOP1词条次数仅1次 | 正常返回，次数显示"1" |
| 无好评记录 | 好评词条表无该用户 | 返回E5低数据版本标识 |
| 词条次数超大 | 次数>100 | 正常返回，不截断 |

---

### 性能要求

| 性能指标 | 要求 | 测试方法 |
|---------|------|---------|
| 查询响应时间 | <500ms | 接口压测 |
| 排序准确性 | 100% | 数据验证 |

---

### 测试建议

**测试类型**: 功能测试、数据验证测试
**测试数据**: 有多词条用户、单词条用户、无词条用户、次数相同用户
**自动化建议**: 高优先级，排序逻辑需自动化验证

---

## US011: 集团面试官人数查询

### 用户故事
> 作为 面试官，
> 我希望 能够查看集团整体的面试官人数和贡献数据，
> 以便 在个人总结页了解自己在集团中的位置。

---

### 验收标准

#### AC1: 正常查询集团汇总数据

**场景描述**: 面试官成功查询集团维度汇总数据

**Given** 前置条件
- 用户权限判断为`INTERVIEWER_WITH_DATA`
- 集团维度表数据已准备

**When** 系统操作
- 系统查询集团维度表
- 系统返回集团汇总字段

**Then** 预期结果
- 返回2025年集团面试官总人数（整数）
- 返回2025年集团总面试时长（已转换为小时，四舍五入）
- 返回2025年集团总面评字数（已转换为万，保留适当精度）
- 数据为集团维度，非部门维度

---

#### AC2: 单位转换验证

**场景描述**: 验证集团数据单位转换正确性

**Given** 前置条件
- 系统已获取原始集团数据

**When** 系统操作
- 系统进行单位转换

**Then** 预期结果
- 面试时长：分钟→小时，四舍五入（符合BR7）
- 面评字数：字→万字（符合BR8）

**Examples**:
| 原始值 | 单位 | 转换后 | 转换单位 |
|-------|------|--------|---------|
| 1500000 | 分钟 | 25000 | 小时 |
| 50000000 | 字 | 5000 | 万字 |
| 1234567 | 分钟 | 20576 | 小时 |

---

#### AC3: 数据一致性验证

**场景描述**: 验证集团数据对所有用户一致

**Given** 前置条件
- 多个面试官用户访问

**When** 系统操作
- 不同用户查询集团汇总数据

**Then** 预期结果
- 所有用户获取的集团数据完全相同
- 数据来源于同一份集团维度表
- 数据不随用户ID变化

---

### 边界条件

| 边界场景 | 输入条件 | 预期行为 |
|---------|---------|---------|
| 面试官人数为0 | 集团无面试官 | 返回0（理论上不会发生） |
| 超大数值 | 面试官>100000 | 正常返回，不截断 |
| 时长转换边界 | 29分钟 | 转换为0小时（四舍五入） |
| 时长转换边界 | 30分钟 | 转换为1小时（四舍五入） |

---

### 性能要求

| 性能指标 | 要求 | 测试方法 |
|---------|------|---------|
| 查询响应时间 | <300ms | 接口压测 |
| 缓存命中时响应时间 | <50ms | 接口压测 |
| 数据一致性 | 100% | 多用户并发测试 |

---

### 测试建议

**测试类型**: 功能测试、数据验证测试、并发测试
**测试数据**: 集团维度表数据
**自动化建议**: 高优先级，单位转换和数据一致性需自动化验证

---

## 场景覆盖检查

### 覆盖矩阵

| 故事ID | Happy Path | 异常处理 | 边界条件 | 权限控制 | 状态 |
|--------|-----------|---------|---------|---------|------|
| US001 | ✅ AC1 | ✅ AC2, AC3 | ✅ 3项 | ✅ | 完整 |
| US002 | ✅ AC1 | ✅ AC2, AC3 | ✅ 3项 | ✅ AC4 | 完整 |
| US003 | ✅ AC1 | ✅ AC2 | ✅ 2项 | N/A | 完整 |
| US004 | ✅ AC1 | ✅ AC3 | ✅ 3项 | N/A | 完整 |
| US005 | ✅ AC1 | ✅ AC3 | ✅ 4项 | N/A | 完整 |
| US006 | ✅ AC1 | ✅ AC3, AC4 | ✅ 4项 | N/A | 完整 |
| US009 | ✅ AC1 | ✅ AC2, AC3 | ✅ 4项 | N/A | 完整 |
| US011 | ✅ AC1 | ✅ AC3 | ✅ 4项 | N/A | 完整 |

---

## 质量验证

### 验证清单

- ✅ 每个故事有3-5条核心验收标准
- ✅ 每条标准使用Given-When-Then格式
- ✅ 覆盖正常流程和至少2种异常情况
- ✅ 包含必要的性能和界面要求
- ✅ 验收标准可直接转化为测试用例

### 格式规范检查

| 检查项 | 结果 |
|-------|------|
| 所有AC使用GWT格式 | ✅ 通过 |
| Given描述完整前置条件 | ✅ 通过 |
| When描述具体操作 | ✅ 通过 |
| Then描述可验证结果 | ✅ 通过 |

### 可测试性检查

| 检查项 | 结果 |
|-------|------|
| 预期结果具体明确 | ✅ 通过 |
| 无主观性描述 | ✅ 通过 |
| 可通过测试验证 | ✅ 通过 |

---

## 技术协作接口

| 协作角色 | 协作内容 | 协作时机 |
|---------|---------|---------|
| 测试团队 | AC可测试性确认、测试用例转化 | AC编写后 |
| 开发团队 | 技术实现可行性确认 | AC编写后 |
| 供应商（SHEEN） | 接口字段格式对齐 | AC确认后 |

---

## 下一步行动

1. **测试团队评审**: 确认AC可测试性，转化为测试用例
2. **开发团队评审**: 确认技术实现可行性
3. **ba-06 UI原型**: 可使用UI原型技能生成页面原型
4. **技术设计**: 进入技术设计阶段，设计接口和缓存策略
