# 使用示例 - doc-extract-knowledge

## 示例1：小型项目（自动选择 top-down）

**用户请求**：
```
为这个项目生成知识库
```

**AI 执行**：
```
📊 项目规模分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
正在扫描项目规模...
使用工具: list_files
扫描路径: src/main/java/com/xxx/

发现 8 个目录，精确统计 65 个 Java 文件

文件数量: 65 个（< 100）
推荐策略: top-down（分类汇总）

策略说明:
- 生成 19 个分类汇总文档
- 适合快速了解项目结构
- 输出少量文档，便于阅读

是否使用推荐策略？
1) 使用推荐策略（top-down）
2) 使用 bottom-up（文件级 + 依赖分析）
3) 使用 by-module（文件级 + 分批处理）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

**用户选择 1 后**：
```
✅ 使用 top-down 策略

执行详情请参考: strategies/top-down/strategy.md

开始执行...
[扫描代码规划分类] → [生成 README.md] → [逐章生成19个分类文档]
```

---

## 示例2：大型项目（自动选择 by-module）

**用户请求**：
```
为这个项目生成知识库
```

**AI 执行**：
```
📊 项目规模分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
正在扫描项目规模...
使用工具: search_file
扫描路径: src/main/java/

发现 45 个目录，精确统计 380 个 Java 文件

文件数量: 380 个（> 200）
推荐策略: by-module（文件级 + 分批处理）

策略说明:
- 为每个文件生成独立文档
- 3 个一批处理，避免上下文过载
- 强大的断点续传支持

是否使用推荐策略？
1) 使用推荐策略（by-module）
2) 使用 top-down（分类汇总）
3) 使用 bottom-up（文件级 + 依赖分析）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 示例3：需要依赖分析（手动选择 bottom-up）

**用户请求**：
```
为这个项目生成知识库，需要依赖分析和架构图
```

**AI 执行**：
```
📊 项目规模分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
正在扫描项目规模...
发现 12 个目录，精确统计 85 个 Java 文件

文件数量: 85 个
用户需求: 需要依赖分析和架构图
推荐策略: bottom-up（文件级 + 依赖分析）

策略说明:
- 为每个文件生成独立文档
- 包含完整依赖关系图
- 自动生成架构图（architecture.md）

确认使用 bottom-up 策略？(Y/n)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 示例4：指定模块（自动选择 by-module）

**用户请求**：
```
为 src/main/java/com/xxx/user 模块生成文档
```

**AI 执行**：
```
📊 模块规模分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
正在扫描模块规模...
模块路径: src/main/java/com/xxx/user
发现 45 个 Java 文件

用户需求: 指定具体模块目录
推荐策略: by-module（按模块处理）

策略说明:
- 为模块内每个文件生成独立文档
- 3 个一批处理
- 支持断点续传

确认使用 by-module 策略？(Y/n)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 示例5：中等规模项目（用户选择）

**用户请求**：
```
为这个项目生成知识库
```

**AI 执行**：
```
📊 项目规模分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
正在扫描项目规模...
发现 18 个目录，精确统计 150 个 Java 文件

文件数量: 150 个（100-200 之间）
推荐策略: top-down（默认）或 by-module 皆可

策略对比:
┌─────────────┬────────────────────────┬────────────────────────┐
│ 维度        │ top-down               │ by-module              │
├─────────────┼────────────────────────┼────────────────────────┤
│ 输出文档数  │ 19 个分类文档          │ 150 个文件级文档       │
│ 阅读体验    │ 快速概览               │ 详细查阅               │
│ 生成时间    │ 较快                   │ 较慢                   │
│ 断点续传    │ 支持                   │ 强支持                 │
└─────────────┴────────────────────────┴────────────────────────┘

请选择策略:
1) top-down（分类汇总，推荐）
2) by-module（文件级文档）
3) bottom-up（文件级 + 依赖分析）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## 断点续传示例

**用户请求**：
```
继续上次的文档生成
```

**AI 执行**：
```
🔍 检测断点信息
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
检测到进度文件: kb/.task-progress.md

进度统计:
  - 已完成: 85 个 (56.7%)
  - 待处理: 65 个 (43.3%)
  - 当前策略: by-module

下一批文件:
  - 序号: 86-88
  - 文件: service/impl/OrderServiceImpl.java 等3个

⚠️ 检测到未完成的任务，将从断点继续执行

✅ 自动从文件 86 开始处理（每批3个）
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```
