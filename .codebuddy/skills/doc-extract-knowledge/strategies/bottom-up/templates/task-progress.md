# 执行进度

> **项目**: {{PROJECT_NAME}}  
> **开始时间**: {{START_TIME}}  
> **当前状态**: {{STATUS}} （进行中 / 已暂停 / 已完成）  
> **最后更新**: {{LAST_UPDATE}}  
> **当前批次**: {{CURRENT_BATCH}} / {{TOTAL_BATCH}}

---

## 📊 总体进度

```
████████████░░░░░░░░░░░░░░░░░░░░░░░░░░░░  30% (30/100)
```

| 指标 | 当前 | 目标 | 进度 |
|------|------|------|------|
| 已处理文件 | {{PROCESSED}} | {{TOTAL}} | {{PERCENT}}% |
| 已完成批次 | {{BATCH_DONE}} | {{BATCH_TOTAL}} | {{BATCH_PERCENT}}% |
| 已生成文档 | {{DOC_COUNT}} | {{DOC_TOTAL}} | {{DOC_PERCENT}}% |

---

## 📋 文件级进度清单

```
┌─────────────────────────────────────────────────────────────────┐
│              ⚠️ 进度更新规则（严格遵守）⭐⭐⭐                    │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  📌 条目不可变原则：                                             │
│     ├── 此清单与计划文件一一对应                                 │
│     ├── ❌ 禁止新增任何文件条目                                  │
│     ├── ❌ 禁止删除任何文件条目                                  │
│     ├── ❌ 禁止修改文件路径                                      │
│     ├── ❌ 禁止修改文件序号                                      │
│     ├── ❌ 禁止修改批次分配                                      │
│     └── ✅ 仅允许更新：状态、生成文档、方法数                    │
│                                                                  │
│  📌 更新时机：                                                   │
│     ├── 每生成一个文档后【立即】更新对应条目                     │
│     ├── 必须在处理下一个文件【之前】完成更新                     │
│     ├── ❌ 禁止等批次完成后批量更新                              │
│     └── ❌ 禁止跳过更新直接处理下一个文件                        │
│                                                                  │
│  📌 更新内容：                                                   │
│     ├── 状态：基于实际生成结果（成功✅/失败❌）                  │
│     ├── 生成文档：填写实际生成的文档路径                         │
│     ├── 方法数：填写实际提取的方法数量                           │
│     └── ❌ 禁止填写预估值、估算值或虚假值                        │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 完整文件状态

| 序号 | 文件路径 | 类型 | 批次 | 状态 | 生成文档 | 方法数 |
|------|----------|------|------|------|----------|--------|
| 1 | {{FILE_PATH_1}} | {{TYPE}} | 1 | ✅ | {{DOC_PATH}} | {{N}} |
| 2 | {{FILE_PATH_2}} | {{TYPE}} | 1 | ✅ | {{DOC_PATH}} | {{N}} |
| 3 | {{FILE_PATH_3}} | {{TYPE}} | 1 | ✅ | {{DOC_PATH}} | {{N}} |
| 4 | {{FILE_PATH_4}} | {{TYPE}} | 1 | ✅ | {{DOC_PATH}} | {{N}} |
| 5 | {{FILE_PATH_5}} | {{TYPE}} | 1 | ✅ | {{DOC_PATH}} | {{N}} |
| 6 | {{FILE_PATH_6}} | {{TYPE}} | 1 | ✅ | {{DOC_PATH}} | {{N}} |
| 7 | {{FILE_PATH_7}} | {{TYPE}} | 1 | ✅ | {{DOC_PATH}} | {{N}} |
| 8 | {{FILE_PATH_8}} | {{TYPE}} | 1 | ✅ | {{DOC_PATH}} | {{N}} |
| 9 | {{FILE_PATH_9}} | {{TYPE}} | 1 | ✅ | {{DOC_PATH}} | {{N}} |
| 10 | {{FILE_PATH_10}} | {{TYPE}} | 1 | ✅ | {{DOC_PATH}} | {{N}} |
| 11 | {{FILE_PATH_11}} | {{TYPE}} | 2 | ✅ | {{DOC_PATH}} | {{N}} |
| 12 | {{FILE_PATH_12}} | {{TYPE}} | 2 | ✅ | {{DOC_PATH}} | {{N}} |
| 13 | {{FILE_PATH_13}} | {{TYPE}} | 2 | ✅ | {{DOC_PATH}} | {{N}} |
| 14 | {{FILE_PATH_14}} | {{TYPE}} | 2 | ✅ | {{DOC_PATH}} | {{N}} |
| 15 | {{FILE_PATH_15}} | {{TYPE}} | 2 | ✅ | {{DOC_PATH}} | {{N}} |
| 16 | {{FILE_PATH_16}} | {{TYPE}} | 2 | ✅ | {{DOC_PATH}} | {{N}} |
| 17 | {{FILE_PATH_17}} | {{TYPE}} | 2 | ✅ | {{DOC_PATH}} | {{N}} |
| 18 | {{FILE_PATH_18}} | {{TYPE}} | 2 | ✅ | {{DOC_PATH}} | {{N}} |
| 19 | {{FILE_PATH_19}} | {{TYPE}} | 2 | ✅ | {{DOC_PATH}} | {{N}} |
| 20 | {{FILE_PATH_20}} | {{TYPE}} | 2 | ✅ | {{DOC_PATH}} | {{N}} |
| 21 | {{FILE_PATH_21}} | {{TYPE}} | 3 | ✅ | {{DOC_PATH}} | {{N}} |
| 22 | {{FILE_PATH_22}} | {{TYPE}} | 3 | ✅ | {{DOC_PATH}} | {{N}} |
| 23 | {{FILE_PATH_23}} | {{TYPE}} | 3 | ✅ | {{DOC_PATH}} | {{N}} |
| 24 | {{FILE_PATH_24}} | {{TYPE}} | 3 | ✅ | {{DOC_PATH}} | {{N}} |
| 25 | {{FILE_PATH_25}} | {{TYPE}} | 3 | ✅ | {{DOC_PATH}} | {{N}} |
| 26 | {{FILE_PATH_26}} | {{TYPE}} | 3 | ✅ | {{DOC_PATH}} | {{N}} |
| 27 | {{FILE_PATH_27}} | {{TYPE}} | 3 | ✅ | {{DOC_PATH}} | {{N}} |
| 28 | {{FILE_PATH_28}} | {{TYPE}} | 3 | ✅ | {{DOC_PATH}} | {{N}} |
| 29 | {{FILE_PATH_29}} | {{TYPE}} | 3 | ✅ | {{DOC_PATH}} | {{N}} |
| 30 | {{FILE_PATH_30}} | {{TYPE}} | 3 | ✅ | {{DOC_PATH}} | {{N}} |
| 31 | {{FILE_PATH_31}} | {{TYPE}} | 4 | ✅ | {{DOC_PATH}} | {{N}} |
| 32 | {{FILE_PATH_32}} | {{TYPE}} | 4 | ✅ | {{DOC_PATH}} | {{N}} |
| 33 | {{FILE_PATH_33}} | {{TYPE}} | 4 | ✅ | {{DOC_PATH}} | {{N}} |
| 34 | {{FILE_PATH_34}} | {{TYPE}} | 4 | ✅ | {{DOC_PATH}} | {{N}} |
| 35 | {{FILE_PATH_35}} | {{TYPE}} | 4 | ✅ | {{DOC_PATH}} | {{N}} |
| 36 | {{FILE_PATH_36}} | {{TYPE}} | 4 | ✅ | {{DOC_PATH}} | {{N}} |
| 37 | {{FILE_PATH_37}} | {{TYPE}} | 4 | ✅ | {{DOC_PATH}} | {{N}} |
| 38 | {{FILE_PATH_38}} | {{TYPE}} | 4 | ✅ | {{DOC_PATH}} | {{N}} |
| 39 | {{FILE_PATH_39}} | {{TYPE}} | 4 | ✅ | {{DOC_PATH}} | {{N}} |
| 40 | {{FILE_PATH_40}} | {{TYPE}} | 4 | ✅ | {{DOC_PATH}} | {{N}} |
| 41 | {{FILE_PATH_41}} | {{TYPE}} | 5 | 🔄 | - | - |
| 42 | {{FILE_PATH_42}} | {{TYPE}} | 5 | 🔄 | - | - |
| 43 | {{FILE_PATH_43}} | {{TYPE}} | 5 | ⏳ | - | - |
| 44 | {{FILE_PATH_44}} | {{TYPE}} | 5 | ⏳ | - | - |
| 45 | {{FILE_PATH_45}} | {{TYPE}} | 5 | ⏳ | - | - |
| ... | ... | ... | ... | ... | ... | ... |

**状态说明**: ⏳ 待处理 | 🔄 处理中 | ✅ 完成 | ❌ 失败

---

## 📦 批次进度

| 批次 | 文件范围 | 状态 | 完成数 | 开始时间 | 完成时间 |
|------|----------|------|--------|----------|----------|
| 1 | 1-10 | ✅ 完成 | 10/10 | {{TIME}} | {{TIME}} |
| 2 | 11-20 | ✅ 完成 | 10/10 | {{TIME}} | {{TIME}} |
| 3 | 21-30 | 🔄 进行中 | 2/10 | {{TIME}} | - |
| 4 | 31-40 | ⏳ 待处理 | 0/10 | - | - |
| 5 | 41-50 | ⏳ 待处理 | 0/10 | - | - |
| ... | ... | ... | ... | ... | ... |

---

## 📝 批次执行日志

### 批次 3（当前）- {{DATE}} {{TIME}}

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📦 正在处理批次 3 (21-30)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📖 读取文件 21: UserServiceImpl.java (完整读取)
   - 代码行数: 256 行
   - 识别类型: Service
   - 方法数量: 12 个
✅ 生成文档: kb/service/UserServiceImpl.md
   - 已记录 12 个方法的完整签名

📖 读取文件 22: OrderServiceImpl.java (完整读取)
   - 代码行数: 189 行
   - 识别类型: Service
   - 方法数量: 8 个
✅ 生成文档: kb/service/OrderServiceImpl.md
   - 已记录 8 个方法的完整签名

🔄 读取文件 23: ProductServiceImpl.java...
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 批次 2 - {{DATE}} {{TIME}}

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📦 批次 2 完成 (11-20)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 文件 11-20 全部完成

📊 批次统计:
   - 处理文件: 10 个
   - 生成文档: 10 个
   - 总方法数: 82 个
   - 耗时: 4 分钟
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 批次 1 - {{DATE}} {{TIME}}

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📦 批次 1 完成 (1-10)
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 文件 1-10 全部完成
📊 批次统计:
   - 处理文件: 10 个
   - 生成文档: 10 个
   - 总方法数: 78 个
   - 耗时: 3.5 分钟
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

---

## ⚠️ 问题记录

| 序号 | 文件 | 问题描述 | 状态 | 解决方案 |
|------|------|----------|------|----------|
| {{N}} | {{FILE}} | {{ISSUE}} | 🔄/✅ | {{SOLUTION}} |

---

## 🔄 断点续传信息

| 项目 | 值 |
|------|-----|
| 当前批次 | {{CURRENT_BATCH}} |
| 批次内进度 | {{BATCH_PROGRESS}}/10 |
| 下一个文件序号 | {{NEXT_FILE_INDEX}} |
| 下一个文件路径 | {{NEXT_FILE_PATH}} |

**续传说明**:
1. 读取本文件，找到状态为 ⏳ 或 🔄 的第一个文件
2. ⚠️ **进度同步检查**（防止会话中断导致不一致）：
   - 对于状态为 ⏳ 或 🔄 的文件，检查对应文档是否已存在
   - 若文档已存在（kb/{type}/{className}.md）→ 更新状态为 ✅
   - 若文档不存在 → 保持原状态
3. 从第一个 ⏳ 状态的文件所在批次开始继续处理
4. ⚠️ **每个文件处理完成后立即更新状态**（不等批次完成）
5. ⚠️ **必须在处理下一个文件之前完成进度更新**

```
┌─────────────────────────────────────────────────────────────────┐
│              ⚠️ 进度更新严重错误警告 ⭐⭐⭐                       │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  以下行为将导致断点续传失败，严禁执行：                          │
│                                                                  │
│  ❌ 错误1：未按实际生成结果更新进度                              │
│     └── 文档未生成就将状态标记为 ✅                              │
│                                                                  │
│  ❌ 错误2：擅自修改进度文件条目                                  │
│     ├── 新增、删除、修改文件条目                                 │
│     ├── 修改文件路径、序号、批次                                 │
│     └── 重新排序或合并条目                                       │
│                                                                  │
│  ❌ 错误3：未在每个文件完成后立即更新                            │
│     ├── 等批次完成后批量更新                                     │
│     ├── 跳过更新直接处理下一个文件                               │
│     └── 预先批量更新多个文件状态                                 │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 📊 类型统计（实时更新）

| 类型 | 已完成 | 总数 | 方法总数 |
|------|--------|------|----------|
| Interface | {{N}} | {{TOTAL}} | {{METHODS}} |
| Abstract | {{N}} | {{TOTAL}} | {{METHODS}} |
| Controller | {{N}} | {{TOTAL}} | {{METHODS}} |
| Service | {{N}} | {{TOTAL}} | {{METHODS}} |
| Mapper | {{N}} | {{TOTAL}} | {{METHODS}} |
| Entity | {{N}} | {{TOTAL}} | {{METHODS}} |
| DTO | {{N}} | {{TOTAL}} | {{METHODS}} |
| VO/Response | {{N}} | {{TOTAL}} | {{METHODS}} |
| Request | {{N}} | {{TOTAL}} | {{METHODS}} |
| Config | {{N}} | {{TOTAL}} | {{METHODS}} |
| Utils | {{N}} | {{TOTAL}} | {{METHODS}} |
| Exception | {{N}} | {{TOTAL}} | {{METHODS}} |
| Enum | {{N}} | {{TOTAL}} | {{METHODS}} |
| Constants | {{N}} | {{TOTAL}} | {{METHODS}} |

---

## 📋 阶段进度

| 阶段 | 状态 | 备注 |
|------|------|------|
| 阶段一：扫描与建立清单 | ✅ 完成 | {{N}} 个文件 |
| 阶段二：分批生成文档 | 🔄 进行中 | 批次 {{N}}/{{TOTAL}} |
| 阶段三：汇总 | ⏳ 待处理 | - |
| 阶段四：质量检查 | ⏳ 待处理 | - |
| 阶段五：扩展文档 | ⏳ 待确认 | - |

---

## 📋 模板规范速查（生成前必查）

```
┌─────────────────────────────────────────────────────────────────┐
│              ⚠️ 模板规范速查说明 ⭐⭐⭐                            │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  📌 使用时机：                                                   │
│     ├── 每次生成文档前必须查阅对应类型的规范                     │
│     ├── 确保文档包含所有必填章节                                 │
│     ├── 确保方法签名格式完整准确                                 │
│     └── 确保依赖关系和统计信息完整                               │
│                                                                  │
│  📌 质量标准：                                                   │
│     ├── ✅ 所有必填章节必须存在                                  │
│     ├── ✅ 方法签名必须包含完整注解和参数                        │
│     ├── ✅ 参数说明必须使用表格格式                              │
│     ├── ✅ 依赖关系必须双向记录                                  │
│     └── ✅ 必须包含维护记录章节                                  │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

### 1️⃣ Controller 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、代码行数
2. **📊 统计信息** - 接口总数、GET/POST/PUT/DELETE数量、依赖服务数
3. **🏷️ 关键注解** - @RestController, @RequestMapping等
4. **📋 接口列表** - 每个接口方法的完整信息
5. **💻 关键代码片段** - 核心接口的实现逻辑
6. **📝 业务规则** - 参数验证、权限控制、业务约束
7. **🔗 依赖组件（我依赖谁）** - 依赖的Service列表
8. **🔙 被依赖方（谁依赖我）** - 调用此Controller的前端或网关
9. **📝 维护记录** - 时间、维护人、内容、版本

**方法签名格式**:
```java
// 必须包含完整注解和参数注解
@GetMapping("/{id}")
@PreAuthorize("hasRole('ADMIN')")
public Result<UserVO> getById(
    @PathVariable("id") @NotNull Long id
)
```

**必填字段**:
- HTTP方法、路径、参数说明（表格）、返回类型、权限、验证规则、说明

---

### 2️⃣ Service 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、代码行数
2. **📊 统计信息** - 业务方法总数、事务/无事务方法数、依赖Mapper/Service数
3. **🏷️ 关键注解** - @Service, @Transactional等
4. **📋 实现接口** - 实现的接口列表（如有）
5. **📋 业务方法** - 每个方法的完整信息
6. **⚙️ 事务配置** - 事务传播行为、隔离级别、超时设置
7. **💻 关键代码片段** - 核心业务逻辑实现
8. **📝 业务规则** - 业务约束、验证规则、异常处理
9. **📖 使用示例** - 典型业务场景的调用示例
10. **🔗 依赖组件（我依赖谁）** - 依赖的Mapper、Service、第三方组件
11. **🔙 被依赖方（谁依赖我）** - 调用此Service的Controller或其他Service
12. **📝 维护记录**

**方法签名格式**:
```java
// 必须包含事务注解和完整参数
@Transactional(rollbackFor = Exception.class)
@Cacheable(value = "user", key = "#id")
public UserVO getById(
    @NotNull Long id
)
```

**必填字段**:
- 参数说明（表格）、返回类型、事务配置、缓存注解、异常列表、说明

---

### 3️⃣ Mapper 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、映射表、代码行数
2. **📊 统计信息** - 方法总数、SELECT/INSERT/UPDATE/DELETE数量、关联实体数
3. **🏷️ 关键注解** - @Mapper, @Select, @Insert等
4. **📋 泛型参数** - BaseMapper<T>的泛型类型（如有）
5. **📋 数据访问方法** - 每个方法的完整信息
6. **💻 关键代码片段** - 复杂SQL的实现
7. **🔗 依赖组件（我依赖谁）** - 依赖的其他Mapper（如有联表查询）
8. **🔗 关联实体** - 关联的Entity类
9. **🔙 被依赖方（谁依赖我）** - 调用此Mapper的Service
10. **📝 维护记录**

**方法签名格式**:
```java
// 必须包含SQL注解和参数注解
@Select("SELECT * FROM user WHERE id = #{id}")
@Results(id = "userMap", value = {
    @Result(column = "id", property = "id"),
    @Result(column = "user_name", property = "userName")
})
User selectById(
    @Param("id") Long id
)
```

**必填字段**:
- 参数说明（表格）、返回类型、SQL类型、SQL语句、索引信息、说明

---

### 4️⃣ Entity 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、映射表、代码行数
2. **📊 统计信息** - 字段总数、主键索引数、唯一索引数、普通索引数、关联关系数、验证规则数
3. **🏷️ 关键注解** - @Entity, @Table, @Data等
4. **📋 字段列表** - 所有字段的详细信息（表格）
5. **📊 索引信息** - 每个索引的类型、字段、DDL、说明
6. **📋 Getter/Setter 方法** - 所有字段的访问方法
7. **🔗 关联关系** - OneToMany, ManyToOne等（如有）
8. **🔗 继承与接口** - 父类和接口（如有）
9. **📝 业务规则** - 数据约束、业务逻辑、状态流转
10. **🔙 被依赖方（谁依赖我）** - 使用此Entity的Mapper、Service
11. **📝 维护记录**

**字段表格格式**:
```markdown
| 字段名 | 类型 | 注解 | DB字段 | DB类型 | 说明 |
|--------|------|------|--------|--------|------|
| id | Long | @Id @GeneratedValue | id | BIGINT | 主键ID |
| userName | String | @Column(length=64) | user_name | VARCHAR(64) | 用户名 |
```

**必填字段**:
- 字段名、Java类型、注解、数据库字段名、数据库类型、说明

---

### 5️⃣ Interface 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、代码行数
2. **📊 统计信息** - 方法总数、默认/静态方法数、常量数、泛型参数
3. **📋 泛型参数** - 泛型类型、约束、说明（如有）
4. **📋 方法列表** - 每个方法的完整信息（含JavaDoc）
5. **🔗 实现类列表** - 实现此接口的类
6. **🔙 被依赖方（谁依赖我）** - 使用此接口的地方
7. **🏷️ 关键注解** - @FunctionalInterface等（如有）
8. **📝 维护记录**

**方法签名格式**:
```java
// 必须包含完整JavaDoc
/**
 * 根据ID查询用户
 * @param id 用户ID
 * @return 用户信息
 * @throws NotFoundException 用户不存在时抛出
 */
UserVO getById(
    @NotNull Long id
) throws NotFoundException
```

**必填字段**:
- JavaDoc、参数说明（表格）、返回类型、异常列表、默认实现、说明

---

### 6️⃣ Abstract 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、代码行数
2. **📊 统计信息** - 抽象/具体方法数、受保护方法数、字段数、泛型参数
3. **📋 泛型参数** - 泛型类型、约束、说明（如有）
4. **📋 继承关系** - 父类和子类的树形结构
5. **📋 抽象方法（子类必须实现）** - 抽象方法列表及实现要求
6. **📋 模板方法（可被子类覆盖）** - 可覆盖方法及默认行为
7. **📋 具体方法（子类继承）** - 完整实现的方法
8. **🔗 子类列表** - 继承此类的所有子类
9. **🔗 依赖组件** - 依赖的其他组件
10. **🔙 被依赖方（谁依赖我）** - 使用此类的地方
11. **🏷️ 关键注解**
12. **📝 维护记录**

**影响分析**:
- 必须标注"修改本类可能影响 N 个子类"

---

### 7️⃣ DTO/VO/Request 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、代码行数
2. **📊 统计信息** - 字段总数、必填字段数、可选字段数、验证规则数
3. **🏷️ 关键注解** - @Data, @Builder等
4. **📋 字段列表** - 所有字段的详细信息（表格）
5. **📋 验证规则** - @NotNull, @Size等验证注解
6. **📋 Getter/Setter 方法** - 所有字段的访问方法
7. **🔗 关联对象** - 嵌套的DTO/VO（如有）
8. **📖 使用场景** - 在哪些接口中使用
9. **📖 使用示例** - 数据格式示例（JSON）
10. **🔙 被依赖方（谁依赖我）** - 使用此DTO/VO的Controller/Service
11. **📝 维护记录**

**字段表格格式**:
```markdown
| 字段名 | 类型 | 验证注解 | 默认值 | 说明 |
|--------|------|----------|--------|------|
| userName | String | @NotBlank @Size(max=64) | - | 用户名 |
| age | Integer | @Min(0) @Max(150) | 0 | 年龄 |
```

---

### 8️⃣ Config 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、代码行数
2. **📊 统计信息** - Bean定义数、配置属性数、条件装配数、依赖组件数
3. **🏷️ 关键注解** - @Configuration, @EnableXxx等
4. **📋 Bean定义** - 每个@Bean方法的完整信息
5. **📋 配置属性** - @ConfigurationProperties绑定的属性
6. **💻 关键代码片段** - 核心配置的实现逻辑
7. **📖 使用示例** - 配置文件示例（application.yml）
8. **🔗 依赖组件** - 依赖的其他Bean
9. **🔙 被依赖方（谁依赖我）** - 使用此配置的组件
10. **📝 维护记录**

**Bean方法格式**:
```java
@Bean
@ConditionalOnMissingBean
public RedisTemplate<String, Object> redisTemplate(
    RedisConnectionFactory factory
)
```

---

### 9️⃣ Utils 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、代码行数
2. **📊 统计信息** - 方法总数、公共方法数、私有方法数、静态方法数
3. **🏷️ 关键注解** - @UtilityClass, @Slf4j等
4. **📋 工具方法** - 每个方法的完整信息
5. **🔙 被依赖方（谁依赖我）** - 使用此工具类的地方
6. **📝 维护记录**

**方法签名格式**:
```java
/**
 * 生成随机字符串
 * @param length 字符串长度
 * @return 随机字符串
 */
public static String randomString(int length)
```

---

### 🔟 Exception 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、代码行数
2. **📊 统计信息** - 构造方法数、字段数、错误码数量
3. **🏷️ 关键注解** - @ResponseStatus等（如有）
4. **📋 继承关系** - 父异常类
5. **📋 构造方法** - 所有构造方法的签名
6. **📋 字段列表** - 异常携带的额外字段（如错误码）
7. **🔙 被依赖方（谁依赖我）** - 抛出此异常的地方
8. **📝 维护记录**

---

### 1️⃣1️⃣ Enum 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、代码行数
2. **📊 统计信息** - 枚举值数量、字段数、方法数
3. **🏷️ 关键注解** - @JsonValue等
4. **📋 枚举值列表** - 所有枚举值及说明（表格）
5. **📋 构造方法** - 构造方法签名和参数
6. **📋 字段列表** - 枚举的字段
7. **📋 方法列表** - 枚举的方法（如转换方法）
8. **📊 状态流转图** - 状态之间的转换关系（如有状态流转）
9. **📝 业务规则** - 状态流转规则、验证规则
10. **🔙 被依赖方（谁依赖我）** - 使用此枚举的地方
11. **📝 维护记录**

**枚举表格格式**:
```markdown
| 枚举值 | code | 说明 |
|--------|------|------|
| PENDING | 0 | 待处理 |
| PROCESSING | 1 | 处理中 |
| COMPLETED | 2 | 已完成 |
```

---

### 1️⃣2️⃣ Constants 模板规范

**必填章节**:
1. **文档头部** - 类名、包路径、类型、职责、代码行数
2. **📊 统计信息** - 常量总数、字符串常量、数值常量、分组数
3. **🏷️ 关键注解**（如有）
4. **📋 常量列表（按分组）** - 所有常量的值和说明（表格）
5. **📋 错误码常量** - 错误码定义（如有）
6. **📋 配置常量** - 配置项常量（如有）
7. **📖 使用示例** - 常量在代码中的使用示例
8. **🔙 被依赖方（谁依赖我）** - 使用这些常量的地方
9. **📝 维护记录**

**常量表格格式**:
```markdown
### 系统配置常量
| 常量名 | 类型 | 值 | 说明 |
|--------|------|-----|------|
| DEFAULT_PAGE_SIZE | int | 10 | 默认分页大小 |
| MAX_PAGE_SIZE | int | 100 | 最大分页大小 |
```

---

### ⚠️ 通用必填要求（所有类型）

1. **完整方法签名**:
   - ✅ 必须包含所有注解（@Transactional、@Cacheable、@PreAuthorize等）
   - ✅ 必须包含所有参数注解（@Param、@PathVariable、@RequestBody等）
   - ✅ 必须包含throws子句（如有）
   - ✅ 必须包含泛型参数（如有）

2. **参数说明表格**:
   - ✅ 必须使用表格格式
   - ✅ 必须包含：参数名、类型、注解、说明
   - ✅ Controller还需包含：必填、默认值

3. **依赖关系**:
   - ✅ 必须有"我依赖谁"章节（除Entity、DTO、VO、Enum、Constants外）
   - ✅ 必须有"谁依赖我"章节
   - ✅ 必须是双向记录的

4. **统计信息**:
   - ✅ 必须准确统计各类型方法/字段数量
   - ✅ 必须基于实际代码，不能估算

5. **维护记录**:
   - ✅ 所有文档必须包含维护记录章节
   - ✅ 格式：| 时间 | 维护人 | 维护内容 | 版本 |

---

### 📌 生成流程检查清单

**生成前**:
- [ ] 读取task-progress.md，查阅对应类型的模板规范
- [ ] 确认文件类型（Controller/Service/Entity等）
- [ ] 完整读取源代码文件（不分段）
- [ ] 提取所有方法签名（包括注解）

**生成中**:
- [ ] 按模板规范生成所有必填章节
- [ ] 确保方法签名格式完整
- [ ] 确保参数说明使用表格
- [ ] 确保依赖关系记录完整
- [ ] 确保统计信息准确

**生成后**:
- [ ] 检查所有必填章节是否存在
- [ ] 检查维护记录章节是否存在
- [ ] 立即更新task-progress.md对应条目的状态为✅
- [ ] 填写实际生成的文档路径和方法数

---
