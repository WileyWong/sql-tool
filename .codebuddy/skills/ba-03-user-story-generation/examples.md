# 用户故事生成 - 示例

---

## 简单案例：智能访客管理系统

### 输入材料

> 以下输入来自 ba-02 Epic 分析的输出

```
【Epic名称】智能访客管理系统

【Feature 列表】（来自 ba-02 输出）
- F001: 访客预约申请（预估4个故事）
- F002: 被访人审批（预估3个故事）
- F003: 访客签到签退（预估4个故事）

【拆解策略】
- 主维度：按工作流/场景
- 拆解分组：预约阶段 → 审批阶段 → 签到阶段 → 离开阶段

【用户角色】
- 访客：外部来访人员，核心诉求是快速预约、减少等待
- 被访人：企业内部员工，核心诉求是快速审批、提前知晓
- 安保人员：园区安保，核心诉求是减少工作量、快速核验

【核心功能点】
- 访客填写预约信息、上传证件照片
- 被访人审批预约、支持自动审批规则
- 访客扫码签到、安保快速核验
- 签退记录、超时提醒

【故事数量要求】11-15个（MVP范围）

【重点覆盖的角色】访客、被访人

【重点覆盖的功能】预约申请、审批操作、签到核验
```

### 输出示例

## 故事列表总览

| 故事ID | 故事标题 | 所属 Feature | 用户角色 | 功能分组 | 粒度 |
|--------|---------|-------------|---------|---------|------|
| US001 | 填写预约基本信息 | F001 | 访客 | 预约阶段 | S |
| US002 | 上传证件照片 | F001 | 访客 | 预约阶段 | S |
| US003 | 搜索并选择被访人 | F001 | 访客 | 预约阶段 | M |
| US004 | 选择来访时间段 | F001 | 访客 | 预约阶段 | S |
| US005 | 提交预约申请 | F001 | 访客 | 预约阶段 | M |
| US006 | 查看预约状态 | F001 | 访客 | 预约阶段 | S |
| US007 | 接收预约审批通知 | F002 | 被访人 | 审批阶段 | S |
| US008 | 审批访客预约 | F002 | 被访人 | 审批阶段 | M |
| US009 | 配置自动审批规则 | F002 | 被访人 | 审批阶段 | M |
| US010 | 扫码签到 | F003 | 访客 | 签到阶段 | M |
| US011 | 核验访客身份 | F003 | 安保人员 | 签到阶段 | M |
| US012 | 处理异常访客 | F003 | 安保人员 | 签到阶段 | M |
| US013 | 访客签退 | F003 | 访客 | 离开阶段 | S |

**统计信息**:
- 故事总数: 13个
- Feature 分布: F001(6个), F002(3个), F003(4个)
- 角色分布: 访客(8个), 被访人(3个), 安保人员(2个)
- 粒度分布: S(6个), M(7个), L(0个)

**拆分策略说明**:
- **按工作流拆分**: 预约阶段 → 审批阶段 → 签到阶段 → 离开阶段
- **按角色拆分**: 访客操作 vs 被访人审批 vs 安保核验
- **按操作类型拆分**: 信息录入 → 审批操作 → 现场核验

## 详细故事列表

## Feature F001：访客预约申请

### 功能分组：预约阶段

### US001: 填写预约基本信息

**用户故事**
> 作为 访客，
> 我希望 填写我的基本信息（姓名、手机号、身份证号），
> 以便 系统能够识别我的身份并用于后续签到核验。

**功能要点**
- 输入姓名（必填，2-20个字符）
- 输入手机号（必填，11位手机号格式）
- 输入身份证号（必填，18位身份证格式）
- 系统自动校验格式正确性

**业务规则**
- BR1: 手机号格式校验，支持大陆手机号
- BR2: 身份证号格式校验，校验最后一位校验码
- BR3: 姓名不允许包含特殊字符

**界面要求**
- 表单布局清晰，必填项标注星号
- 输入框下方显示格式提示
- 实时校验并显示错误提示

**粒度评估**: S - 纯表单录入，约2天工作量

---

### US002: 上传证件照片

**用户故事**
> 作为 访客，
> 我希望 上传我的身份证照片，
> 以便 安保人员能够在签到时核验我的真实身份。

**功能要点**
- 支持拍照上传或从相册选择
- 支持身份证正反面上传
- 图片压缩处理（限制大小≤2MB）
- 上传进度显示

**业务规则**
- BR1: 图片格式支持 JPG、PNG
- BR2: 图片需清晰可辨，模糊图片提示重新上传
- BR3: 证件照片保留30天后自动删除（隐私保护）

**界面要求**
- 上传区域显示示例图片
- 上传成功后显示缩略图预览
- 支持删除重新上传

**粒度评估**: S - 标准文件上传，约2天工作量

---

### US003: 搜索并选择被访人

**用户故事**
> 作为 访客，
> 我希望 通过姓名或工号搜索被访人，
> 以便 准确选择我要拜访的企业员工。

**功能要点**
- 支持姓名模糊搜索
- 支持工号精确搜索
- 显示搜索结果列表（姓名、部门、工号）
- 选择被访人后显示确认信息

**业务规则**
- BR1: 搜索结果最多显示10条
- BR2: 被访人信息脱敏显示（手机号中间4位隐藏）
- BR3: 离职员工不显示在搜索结果中

**界面要求**
- 搜索框支持即时搜索（输入2个字符后触发）
- 搜索结果列表显示头像、姓名、部门
- 选中后高亮显示

**粒度评估**: M - 涉及搜索逻辑和员工数据查询，约3天工作量

---

### US004: 选择来访时间段

**用户故事**
> 作为 访客，
> 我希望 选择我的来访日期和时间段，
> 以便 被访人能够提前安排接待。

**功能要点**
- 选择来访日期（日历选择器）
- 选择时间段（上午/下午/全天）
- 显示预计停留时长
- 支持多日访问预约

**业务规则**
- BR1: 来访日期范围：今天 ~ 今天+30天
- BR2: 当天预约需提前2小时
- BR3: 节假日不可预约（根据企业日历配置）

**界面要求**
- 日历控件显示可选/不可选日期
- 时间段选择使用下拉或按钮组
- 选择后显示确认信息

**粒度评估**: S - 标准日期时间选择，约2天工作量

---

### US005: 提交预约申请

**用户故事**
> 作为 访客，
> 我希望 确认信息后提交预约申请，
> 以便 被访人能够收到通知并进行审批。

**功能要点**
- 显示预约信息确认页
- 提交按钮和返回修改按钮
- 提交成功后显示预约单号
- 推送审批通知给被访人

**业务规则**
- BR1: 同一访客每天只能提交1次预约
- BR2: 预约单号格式：VIS + 日期 + 4位序号
- BR3: 提交后状态变为"待审批"

**界面要求**
- 确认页显示所有填写信息
- 提交成功显示预约单号和二维码
- 引导访客保存二维码

**粒度评估**: M - 涉及状态流转和通知推送，约3天工作量

---

### US006: 查看预约状态

**用户故事**
> 作为 访客，
> 我希望 查看我的预约审批状态，
> 以便 了解预约是否通过以及后续签到安排。

**功能要点**
- 显示预约状态（待审批/已通过/已拒绝/已过期）
- 显示审批人和审批时间
- 通过后显示签到二维码
- 拒绝时显示拒绝原因

**业务规则**
- BR1: 预约通过后生成签到二维码
- BR2: 预约超过来访日期自动变为"已过期"
- BR3: 拒绝后可重新发起预约

**界面要求**
- 状态使用不同颜色区分
- 二维码支持放大和保存
- 显示来访注意事项

**粒度评估**: S - 状态查询展示，约2天工作量

---

## Feature F002：被访人审批

### 功能分组：审批阶段

### US007: 接收预约审批通知

**用户故事**
> 作为 被访人，
> 我希望 收到访客预约的审批通知，
> 以便 及时处理预约请求。

**功能要点**
- 微信/短信推送预约通知
- 通知内容包含访客姓名、来访时间、来访事由
- 点击通知跳转到审批页面
- 支持通知免打扰时段设置

**业务规则**
- BR1: 通知在预约提交后5分钟内推送
- BR2: 未处理预约每隔4小时提醒一次
- BR3: 超过24小时未处理自动提醒上级

**界面要求**
- 通知模板简洁清晰
- 支持一键跳转审批
- 显示紧急程度标识

**粒度评估**: S - 通知推送功能，约2天工作量

---

### US008: 审批访客预约

**用户故事**
> 作为 被访人，
> 我希望 查看访客信息并审批预约，
> 以便 确认是否接待该访客。

**功能要点**
- 查看访客详细信息（姓名、证件、来访事由）
- 审批操作：通过、拒绝
- 拒绝时填写原因（必填）
- 审批后自动通知访客

**业务规则**
- BR1: 审批通过后访客收到签到二维码
- BR2: 拒绝原因至少10个字符
- BR3: 审批记录保留用于审计

**界面要求**
- 审批页面显示访客照片和证件信息
- 通过/拒绝按钮明显区分
- 拒绝时弹出原因输入框

**粒度评估**: M - 标准审批功能，约3天工作量

---

### US009: 配置自动审批规则

**用户故事**
> 作为 被访人，
> 我希望 配置自动审批规则，
> 以便 常来访客无需每次手动审批。

**功能要点**
- 添加白名单访客（按手机号）
- 设置自动通过的时间范围
- 设置自动通过的来访事由类型
- 规则生效/失效开关

**业务规则**
- BR1: 白名单访客自动通过审批
- BR2: 自动审批规则仅对本人生效
- BR3: 规则变更即时生效

**界面要求**
- 规则列表显示当前配置
- 添加规则使用表单弹窗
- 支持规则启用/禁用切换

**粒度评估**: M - 规则配置功能，约4天工作量

---

## Feature F003：访客签到签退

### 功能分组：签到阶段

### US010: 扫码签到

**用户故事**
> 作为 访客，
> 我希望 在园区入口扫码签到，
> 以便 快速完成入园登记。

**功能要点**
- 扫描预约二维码
- 显示签到成功页面
- 生成访客通行证（电子/打印）
- 记录签到时间

**业务规则**
- BR1: 签到时间需在预约时间范围内（前后30分钟）
- BR2: 超时签到需安保人员确认
- BR3: 签到后状态变为"已签到"

**界面要求**
- 扫码成功显示绿色确认
- 通行证显示访客姓名、被访人、有效时间
- 支持通行证打印

**粒度评估**: M - 涉及二维码扫描和通行证生成，约3天工作量

---

### US011: 核验访客身份

**用户故事**
> 作为 安保人员，
> 我希望 核验访客的身份信息，
> 以便 确保入园人员与预约信息一致。

**功能要点**
- 扫描访客二维码获取预约信息
- 比对访客证件与预约信息
- 确认放行或标记异常
- 记录核验结果

**业务规则**
- BR1: 证件信息与预约信息需完全匹配
- BR2: 信息不符时标记为"待核实"
- BR3: 黑名单访客自动告警

**界面要求**
- 核验页面显示访客照片和证件信息
- 放行/异常按钮明显区分
- 异常情况显示红色警告

**粒度评估**: M - 身份核验功能，约3天工作量

---

### US012: 处理异常访客

**用户故事**
> 作为 安保人员，
> 我希望 处理签到异常的访客，
> 以便 确保园区安全。

**功能要点**
- 查看异常原因（超时、信息不符、黑名单）
- 联系被访人确认
- 手动放行或拒绝入园
- 记录处理结果和原因

**业务规则**
- BR1: 异常处理需填写处理说明
- BR2: 黑名单访客需主管审批才能放行
- BR3: 异常处理记录保留用于审计

**界面要求**
- 异常列表显示异常类型和时间
- 处理弹窗显示访客详情和异常原因
- 支持一键联系被访人

**粒度评估**: M - 异常处理流程，约4天工作量

---

### 功能分组：离开阶段

### US013: 访客签退

**用户故事**
> 作为 访客，
> 我希望 在离开园区时签退，
> 以便 完成本次访问记录。

**功能要点**
- 扫码签退或手动签退
- 记录签退时间
- 显示本次访问时长
- 通行证自动失效

**业务规则**
- BR1: 签退后通行证立即失效
- BR2: 超过预约时间未签退自动提醒被访人
- BR3: 当日23:59未签退系统自动签退

**界面要求**
- 签退成功显示访问时长统计
- 显示"感谢来访"提示
- 支持评价本次访问体验

**粒度评估**: S - 简单签退操作，约2天工作量

---

---

## 复杂案例：全球化员工入职管理平台 - 员工类型识别模块

### 输入材料

> 以下输入来自 ba-02 Epic 分析的输出

```
【Epic名称】全球化员工入职管理平台

【Feature 列表】（来自 ba-02 输出）
- F001: 员工类型识别与流程路由（预估8个故事）

【Feature 详细说明】
业务价值：减少SSC手动选择错误，提升员工类型判定准确率至99%
核心规则：员工类型判定规则矩阵（12种类型）

【员工类型判定规则矩阵（12种）】
| 合同类型 | 雇佣主体 | 用工方式 | 特殊条件 | 员工类型 |
|---------|---------|---------|---------|---------|
| 劳动合同 | 本公司 | 全职 | 社招 | 正式员工-社招 |
| 劳动合同 | 本公司 | 全职 | 校招 | 正式员工-校招 |
| 实习协议 | 本公司 | 实习 | - | 实习生 |
| 服务协议 | 第三方公司 | 驻场 | - | 外包人员 |
| 派遣协议 | 派遣公司 | 派遣 | - | 劳务派遣 |
| 劳务合同 | 本公司 | 顾问 | 退休返聘 | 返聘顾问 |
| 劳动合同 | 本公司 | 全职 | VP+ | 高管 |
| 博士后协议 | 本公司 | 科研 | - | 博士后 |
| 兼职协议 | 本公司 | 兼职 | - | 兼职员工 |
| 聘任协议 | 本公司 | 董事 | - | 董事/监事 |
| 当地劳动合同 | 海外实体 | 全职 | - | 海外本地雇员 |
| 派遣协议 | 本公司 | 跨境派遣 | - | 跨境派遣 |

【拆解策略】
- 主维度：按业务能力（Capability）
- 拆解分组：类型判定 → 流程路由 → 异常处理

【用户角色】
- SSC专员：共享服务中心专员，核心诉求是减少手动操作、降低错误
- 新员工：信息的主要提供者，核心诉求是快速完成信息填写
- COE专家：专家中心，核心诉求是政策规则可配置、快速响应变化

【核心功能点】
- 根据入职信息自动判定员工类型
- 判定失败时提供手动选择兜底
- 根据员工类型路由到对应入职流程
- 员工类型判定规则可配置

【故事数量要求】8-10个

【重点覆盖的角色】SSC专员、新员工

【重点覆盖的功能】自动类型判定、手动兜底、流程路由
```

### 输出示例

## 故事列表总览

| 故事ID | 故事标题 | 所属 Feature | 用户角色 | 功能分组 | 粒度 | 复杂度来源 |
|--------|---------|-------------|---------|---------|------|-----------|
| US-001 | 根据入职信息自动判定员工类型 | F001 | 系统 | 类型判定 | L | 12种类型规则矩阵 |
| US-002 | 查看员工类型判定结果 | F001 | 新员工 | 类型判定 | S | 结果展示 |
| US-003 | 手动选择员工类型 | F001 | SSC专员 | 类型判定 | M | 兜底机制 |
| US-004 | 申诉员工类型判定 | F001 | 新员工 | 类型判定 | M | 申诉流程 |
| US-005 | 根据员工类型路由入职流程 | F001 | 系统 | 流程路由 | L | 12种流程分支 |
| US-006 | 查看入职流程指引 | F001 | 新员工 | 流程路由 | S | 流程可视化 |
| US-007 | 配置员工类型判定规则 | F001 | COE专家 | 规则配置 | L | 规则引擎 |
| US-008 | 查看员工类型判定日志 | F001 | SSC专员 | 审计追溯 | S | 日志查询 |

**统计信息**:
- 故事总数: 8个
- Feature 分布: F001(8个)
- 角色分布: 系统(2个), 新员工(3个), SSC专员(2个), COE专家(1个)
- 粒度分布: S(3个), M(2个), L(3个)

**拆分策略说明**:
- **按业务能力拆分**: 类型判定 → 流程路由 → 规则配置 → 审计追溯
- **按角色拆分**: 系统自动处理 vs 新员工查看 vs SSC专员操作 vs COE专家配置
- **按正常/异常拆分**: 自动判定成功 vs 手动兜底 vs 申诉处理

## 详细故事列表

## Feature F001：员工类型识别与流程路由

### 功能分组：类型判定

### US-001: 根据入职信息自动判定员工类型

**用户故事**
> 作为 系统，
> 我希望 根据合同类型、雇佣主体、用工方式、特殊条件4个维度自动判定员工类型，
> 以便 减少SSC手动选择错误，提升员工类型判定准确率至99%。

**功能要点**
- 入职申请提交时，系统自动读取4维度信息
- 系统根据规则矩阵匹配对应员工类型
- 支持12种员工类型的精确判定
- 判定结果记录日志用于审计

**业务规则**

| 维度 | 取值范围 | 说明 |
|------|---------|------|
| 合同类型 | 劳动合同/实习协议/服务协议/派遣协议/劳务合同/博士后协议/兼职协议/聘任协议/当地劳动合同 | 合同性质 |
| 雇佣主体 | 本公司/第三方公司/派遣公司/海外实体 | 法律实体 |
| 用工方式 | 全职/实习/驻场/派遣/顾问/科研/兼职/董事/跨境派遣 | 用工形式 |
| 特殊条件 | 社招/校招/退休返聘/VP+/无 | 特殊标记 |

**判定规则示例**:

| 条件组合 | 判定结果 |
|---------|---------|
| 劳动合同 + 本公司 + 全职 + 社招 | 正式员工-社招 |
| 劳动合同 + 本公司 + 全职 + 校招 | 正式员工-校招 |
| 实习协议 + 本公司 + 实习 + 无 | 实习生 |
| 服务协议 + 第三方公司 + 驻场 + 无 | 外包人员 |
| 劳动合同 + 本公司 + 全职 + VP+ | 高管 |
| 当地劳动合同 + 海外实体 + 全职 + 无 | 海外本地雇员 |

**界面要求**
- 判定过程对用户透明，无需用户干预
- 判定完成后显示结果通知
- 判定失败时自动触发手动选择流程

**粒度评估**: L - 涉及12种类型规则矩阵和多维度匹配逻辑，约8天工作量

**拆分建议**（如需进一步拆分）:
- US-001a: 基础类型判定（正式员工、实习生）(3点)
- US-001b: 外部人员类型判定（外包、派遣）(2点)
- US-001c: 特殊类型判定（高管、博士后、海外）(3点)

---

### US-002: 查看员工类型判定结果

**用户故事**
> 作为 新员工，
> 我希望 查看系统判定的员工类型，
> 以便 确认我的入职类型是否正确。

**功能要点**
- 显示判定的员工类型名称
- 显示判定依据（合同类型、雇佣主体等）
- 显示对应的入职流程说明
- 提供"类型有误"反馈入口

**业务规则**
- BR1: 判定结果在入职申请提交后立即显示
- BR2: 员工可在24小时内发起类型申诉
- BR3: 类型确认后进入对应入职流程

**界面要求**
- 类型名称突出显示
- 判定依据以表格形式展示
- "类型有误"按钮明显但不突兀

**粒度评估**: S - 结果展示页面，约2天工作量

---

### US-003: 手动选择员工类型

**用户故事**
> 作为 SSC专员，
> 我希望 在系统无法自动判定时手动选择员工类型，
> 以便 确保特殊情况下入职流程不被阻塞。

**功能要点**
- 显示待处理的判定失败列表
- 查看入职申请详细信息
- 从12种类型中手动选择
- 填写手动选择原因

**业务规则**
- BR1: 手动选择需填写原因（≥20个字符）
- BR2: 手动选择记录保留用于审计
- BR3: 手动选择后自动触发流程路由

**界面要求**
- 待处理列表按提交时间排序
- 类型选择使用下拉或单选按钮
- 原因输入框显示字数统计

**粒度评估**: M - 手动兜底功能，约4天工作量

---

### US-004: 申诉员工类型判定

**用户故事**
> 作为 新员工，
> 我希望 对系统判定的员工类型提出申诉，
> 以便 纠正可能的判定错误。

**功能要点**
- 发起类型申诉
- 填写申诉原因和期望类型
- 上传证明材料（可选）
- 查看申诉处理进度

**业务规则**
- BR1: 申诉需在入职申请提交后24小时内发起
- BR2: 申诉由SSC专员处理
- BR3: 申诉处理结果通知员工

**界面要求**
- 申诉表单简洁明了
- 期望类型使用下拉选择
- 进度显示使用时间轴

**粒度评估**: M - 申诉流程，约3天工作量

---

### 功能分组：流程路由

### US-005: 根据员工类型路由入职流程

**用户故事**
> 作为 系统，
> 我希望 根据员工类型自动路由到对应的入职流程，
> 以便 不同类型员工按照差异化流程完成入职。

**功能要点**
- 根据员工类型加载对应流程模板
- 流程包含：信息采集、审批链、资源分配
- 支持12种员工类型的差异化流程
- 流程路由结果记录日志

**业务规则**

| 员工类型 | 入职流程特点 |
|---------|-------------|
| 正式员工-社招 | 标准流程：信息采集 → 背调 → 审批 → 资源分配 |
| 正式员工-校招 | 批量流程：批量导入 → 简化审批 → 批量资源分配 |
| 实习生 | 简化流程：基本信息 → 导师审批 → 临时权限 |
| 外包人员 | 供应商流程：供应商提交 → SSC审核 → 项目权限 |
| 高管 | 高管流程：保密处理 → 多级审批 → VIP资源 |
| 海外本地雇员 | 合规流程：当地合规字段 → 区域审批 → 当地资源 |

**界面要求**
- 路由过程对用户透明
- 流程加载完成后显示流程概览
- 异常路由时通知SSC专员

**粒度评估**: L - 涉及12种流程分支和流程引擎，约8天工作量

**拆分建议**（如需进一步拆分）:
- US-005a: 标准流程路由（正式员工）(3点)
- US-005b: 简化流程路由（实习生、兼职）(2点)
- US-005c: 特殊流程路由（高管、海外、外包）(3点)

---

### US-006: 查看入职流程指引

**用户故事**
> 作为 新员工，
> 我希望 查看我的入职流程步骤和进度，
> 以便 了解需要完成哪些事项以及当前进度。

**功能要点**
- 显示入职流程步骤列表
- 标识当前步骤和已完成步骤
- 显示每个步骤的预计时间
- 显示待办事项和截止时间

**业务规则**
- BR1: 流程步骤根据员工类型动态生成
- BR2: 已完成步骤显示完成时间
- BR3: 超时步骤显示红色警告

**界面要求**
- 流程使用进度条或时间轴展示
- 当前步骤高亮显示
- 待办事项显示操作入口

**粒度评估**: S - 流程可视化展示，约2天工作量

---

### 功能分组：规则配置

### US-007: 配置员工类型判定规则

**用户故事**
> 作为 COE专家，
> 我希望 可视化配置员工类型判定规则，
> 以便 业务规则变更时无需开发介入，快速响应政策调整。

**功能要点**
- 查看当前判定规则列表
- 新增/编辑/删除判定规则
- 规则条件配置：4维度条件组合
- 规则优先级配置
- 规则版本管理：保存草稿、发布、回滚
- 规则测试：输入条件，验证判定结果

**业务规则**
- BR1: 规则发布需COE主管审批
- BR2: 规则变更不影响进行中的入职申请
- BR3: 规则版本保留历史记录（至少10个版本）
- BR4: 规则删除需确认无引用

**界面要求**
- 规则列表显示条件和结果
- 条件配置使用可视化构建器
- 规则测试提供即时反馈

**粒度评估**: L - 规则引擎配置+版本管理，约10天工作量

**拆分建议**（如需进一步拆分）:
- US-007a: 规则列表与查看 (2点)
- US-007b: 规则条件配置 (3点)
- US-007c: 规则版本管理 (3点)
- US-007d: 规则测试功能 (2点)

---

### 功能分组：审计追溯

### US-008: 查看员工类型判定日志

**用户故事**
> 作为 SSC专员，
> 我希望 查看员工类型判定的历史日志，
> 以便 追溯判定过程和排查问题。

**功能要点**
- 按时间范围查询判定日志
- 按员工姓名/工号搜索
- 显示判定输入、规则匹配、判定结果
- 导出日志报表

**业务规则**
- BR1: 日志保留180天
- BR2: 日志包含自动判定和手动选择记录
- BR3: 敏感信息脱敏显示

**界面要求**
- 日志列表支持分页和筛选
- 详情页显示完整判定过程
- 导出支持Excel格式

**粒度评估**: S - 日志查询功能，约2天工作量
