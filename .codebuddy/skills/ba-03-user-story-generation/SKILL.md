---
name: ba-03-generating-user-stories
description: 基于 Epic 分析结果生成符合敏捷开发标准的用户故事列表，遵循"作为...我希望...以便..."格式，包含功能要点、业务规则和粒度评估。触发词：生成用户故事、故事编写、敏捷需求、User Story、编写故事、故事拆分。
---

# 用户故事生成

基于 Epic 分析结果，生成高质量的用户故事列表，每个故事都有明确的用户角色、功能描述和业务价值。

## 工作流位置

```
ba-01 业务需求提取
    ↓ 输出：业务目标、顶层用例、非功能需求
ba-02 Epic 分析
    ↓ 输出：拆解策略、用户角色分析、MVP 定义
ba-03 用户故事生成 ← 当前技能
    ↓ 输出：用户故事列表
ba-04 INVEST 评估
    ↓ 输出：评估报告、优先级排序
ba-05 验收标准
```

**上游依赖**: ba-02 输出的拆解策略和用户角色
**下游使用**: ba-04 将对生成的用户故事进行 INVEST 评估

## 输入材料

```
【Epic名称】

【Feature 列表】（来自 ba-02 输出）
- F001: {Feature 名称}
- F002: {Feature 名称}

【拆解策略】
- 主维度：
- 拆解分组：

【用户角色】
- 角色1：
- 角色2：
- 角色3：

【核心功能点】
- 
- 
- 

【故事数量要求】15-25个（默认）

【重点覆盖的角色】

【重点覆盖的功能】

【特殊约束】
```

## 核心输出

### 故事列表总览

| 故事ID | 故事标题 | 所属 Feature | 用户角色 | 功能分组 | 粒度 |
|--------|---------|-------------|---------|---------|------|
| US001 | {标题} | F001 | {角色} | {分组} | S/M/L |

**统计信息**:
- 故事总数: {N}个
- Feature 分布: F001({n1}个), F002({n2}个)
- 角色分布: {角色1}({n1}个), {角色2}({n2}个)
- 粒度分布: S({n}个), M({n}个), L({n}个)

### 详细故事列表（按 Feature 分组）

```markdown
## Feature F001：{Feature 名称}

### 功能分组1：{分组名称}

### US001: {故事标题}

**用户故事**
> 作为 {用户角色}，
> 我希望 {功能描述}，
> 以便 {业务价值}。

**功能要点**
- {要点1}
- {要点2}
- {要点3}

**业务规则**
- {规则1}
- {规则2}

**界面要求**（如适用）
- {界面要求}

**粒度评估**: {S/M/L} - {理由}
```

## 故事拆分模式示例

**按业务规则拆分**：
```
原始：作为用户，我希望系统计算折扣
拆分后：
- US001: 普通用户无折扣
- US002: VIP 用户享受 9 折
- US003: 超级 VIP 享受 8 折
```

**按数据变体拆分**：
```
原始：作为用户，我希望导出报告
拆分后：
- US001: 导出 Excel 格式
- US002: 导出 PDF 格式
- US003: 按时间范围筛选导出
```

**按操作类型拆分（CRUD）**：
```
原始：作为管理员，我希望管理用户
拆分后：
- US001: 创建新用户
- US002: 查看用户列表
- US003: 编辑用户信息
- US004: 删除/停用用户
```

**按用户角色拆分**：
```
原始：作为用户，我希望查看订单
拆分后：
- US001: 作为买家，查看我的订单
- US002: 作为卖家，查看店铺订单
- US003: 作为客服，查询任意订单
```

## 用户故事编写模式

**数据查询类**
```
作为{角色}，我希望能查询{数据对象}，以便{业务目的}。
示例：作为客户，我希望能查询我的订单状态，以便了解物流进度。
```

**数据录入类**
```
作为{角色}，我希望能录入/提交{数据对象}，以便{业务目的}。
示例：作为客服，我希望能录入客户反馈信息，以便跟踪问题处理进度。
```

**配置管理类**
```
作为{角色}，我希望能配置{配置项}，以便{业务目的}。
示例：作为系统管理员，我希望能配置自动回复规则，以便提高智能客服准确性。
```

**通知提醒类**
```
作为{角色}，我希望收到{事件}的通知，以便{业务目的}。
示例：作为客户，我希望收到问题处理进度通知，以便及时了解处理状态。
```

**数据分析类**
```
作为{角色}，我希望能查看{数据对象}的统计/分析，以便{业务目的}。
示例：作为运营经理，我希望能查看客服工作量统计，以便合理分配资源。
```

## 质量要求

### 格式规范（强制）
- 每个故事使用"作为...我希望...以便..."格式
- 用户角色具体明确（不是"用户"，而是"客服人员""系统管理员"）
- 功能描述清晰，使用用户语言而非技术术语
- 业务价值明确，回答"为什么需要这个功能"

### 粒度控制（强制）
- S (Small): 1-3天工作量
- M (Medium): 3-5天工作量
- L (Large): 5-10天工作量，考虑进一步拆分
- 避免XL故事（>10天），必须拆分

### 独立性（建议）
- 尽量减少故事间的依赖关系
- 如有依赖，在功能要点中标注
- 被依赖的故事优先排在前面

## 常见编写错误

❌ **错误1**: 缺少业务价值
```
错误：作为用户，我希望能登录系统。
正确：作为客户，我希望能登录系统，以便访问我的个人订单和服务记录。
```

❌ **错误2**: 角色过于模糊
```
错误：作为用户，我希望...
正确：作为客服人员/客户/系统管理员，我希望...
```

❌ **错误3**: 功能描述过于技术化
```
错误：作为用户，我希望系统调用API获取数据...
正确：作为客户，我希望能实时查看订单物流信息...
```

❌ **错误4**: 故事粒度过大
```
错误：作为管理员，我希望能管理所有用户（包含增删改查、权限、日志...）
正确：拆分为多个故事：用户创建、用户编辑、用户删除、权限分配...
```

## 信息不足处理

1. **角色不明确**: 基于功能特点推断可能的用户角色，标注`（推断）`
2. **功能点不完整**: 补充常见的增删改查、通知、统计等功能，标注`（补充）`
3. **业务规则缺失**: 基于行业最佳实践补充，标注`（建议）`

## 成功标准

- ✅ 生成15-25个用户故事（视Epic规模调整）
- ✅ 每个故事都遵循标准格式
- ✅ 每个故事都有明确的用户价值
- ✅ 故事粒度适中，无明显过大或过小
- ✅ 覆盖所有核心用户角色和主要功能

## 质量验证循环

完成初稿后，执行以下验证：

1. **格式检查**：每个故事是否遵循"作为...我希望...以便..."格式？
2. **价值检查**：每个故事的业务价值是否明确？
3. **粒度检查**：是否存在 XL 故事需要进一步拆分？

**验证→修正→重复**：如发现问题，修正后重新检查，只有全部通过才输出最终文档。

## 详细参考

- **完整示例**: 见 [examples.md](examples.md)
- **编写模式详解**: 见 [reference.md](reference.md)

## 输出格式

直接输出完整的用户故事列表，包含总览表格和详细故事列表。不要有任何前言或解释。

## 技术协作接口

本技能输出需与以下角色协作确认：

| 协作角色 | 协作内容 | 协作时机 |
|---------|---------|---------|
| Tech Lead | 技术可行性确认、粒度评估 | 故事列表初稿后 |
| UX 设计师 | 界面要求确认、交互设计 | 界面相关故事编写时 |
| 测试团队 | 测试策略初评、测试复杂度 | 故事列表完成后 |

## 📝 版本历史

- **v1.0** (2025-12-17): 初始版本
  - 标准用户故事格式（作为...我希望...以便...）
  - 故事拆分模式（按业务规则/数据变体/操作类型/用户角色）
  - 粒度评估（S/M/L）
  - Feature 分组和统计

---

**作者**: johnsonyang
