---
name: init-project-memory-checklist
description: 初始化项目记忆 Skill 的验证清单
---

# 验证清单：初始化项目记忆

## 使用前检查清单

### 前置条件检查

- [ ] 项目已创建（至少有 README.md）
- [ ] 项目目标已明确
- [ ] 技术栈已确定
- [ ] 项目结构已初始化
- [ ] Git 仓库已初始化

### 环境检查

- [ ] 有权限创建 `.spec-code/` 目录
- [ ] 有权限创建和编辑文件
- [ ] 项目根目录可访问

---

## 执行过程检查清单

### 步骤 1: 检测项目记忆状态

- [ ] 检查 `.spec-code/memory/` 目录是否存在
- [ ] 如果存在，检查是否包含 constitution.md
- [ ] 如果存在，检查是否包含 guidelines.md
- [ ] 如果存在，检查是否包含 context.md
- [ ] 根据检查结果决定是初始化还是更新

### 步骤 2: 检测用户语言

- [ ] 分析用户输入语言（中文/英文）
- [ ] 记录语言选择
- [ ] 确保所有输出使用统一的语言

### 步骤 3: 收集项目信息

- [ ] 收集项目名称
- [ ] 收集项目简介（1-2 句话）
- [ ] 收集项目类型（后端/前端/全栈/库/工具）
- [ ] 从 package.json/pom.xml/requirements.txt 提取技术栈
- [ ] 收集编程语言和版本
- [ ] 收集主要框架和版本
- [ ] 收集数据库类型和版本
- [ ] 收集其他关键技术
- [ ] 收集核心原则（可选）

### 步骤 4: 创建目录

- [ ] 创建 `.spec-code/` 目录
- [ ] 创建 `.spec-code/memory/` 目录
- [ ] 验证目录已创建

### 步骤 5: 生成 constitution.md

- [ ] 包含 YAML Frontmatter
- [ ] 包含项目基本信息
- [ ] 包含 4-6 条核心原则
- [ ] **包含文档生成约束** ⭐
- [ ] 包含技术约束
- [ ] 包含开发工作流
- [ ] 包含质量标准
- [ ] **包含输出目录规范** ⭐
- [ ] 技术约束基于项目的实际配置文件
- [ ] 使用用户的语言（中文/英文）

### 步骤 6: 生成 guidelines.md

- [ ] 包含 YAML Frontmatter
- [ ] 包含命名规范
- [ ] 包含代码格式规范
- [ ] 包含最佳实践
- [ ] 包含常见问题和解决方案
- [ ] 代码示例来自项目的实际代码
- [ ] 使用用户的语言（中文/英文）

### 步骤 7: 生成 context.md

- [ ] 包含 YAML Frontmatter
- [ ] 包含项目概述
- [ ] 包含活跃技术栈
- [ ] 包含项目结构
- [ ] 包含当前开发阶段
- [ ] 包含最近变更
- [ ] 项目结构基于实际的 src/ 目录结构
- [ ] 代码示例来自项目的实际代码
- [ ] 使用用户的语言（中文/英文）

### 步骤 8: 更新 AI 助手配置

- [ ] 检查是否存在 CLAUDE.md
- [ ] 检查是否存在 CODEBUDDY.md
- [ ] 如果存在，添加项目记忆引用
- [ ] 如果存在，添加核心原则摘要
- [ ] 如果存在，添加关键约束

### 步骤 9: 验证和报告

- [ ] 验证所有文件已创建
- [ ] 验证所有文件格式正确
- [ ] 验证所有必填字段已填充
- [ ] 生成完成报告

---

## 生成完成后检查清单

### 文件检查

- [ ] `.spec-code/memory/constitution.md` 已创建
- [ ] `.spec-code/memory/guidelines.md` 已创建
- [ ] `.spec-code/memory/context.md` 已创建
- [ ] 所有文件都是 Markdown 格式
- [ ] 所有文件都包含 YAML Frontmatter
- [ ] `.spec-code/memory`下只能包含名称为 `constitution.md`、`guidelines.md`、`context.md`的文件，如果有额外的其他文件，必须强制合并，必要时读取用户工程信息整合之后重新初始化

### 内容检查

#### constitution.md

- [ ] 包含 `name` 字段
- [ ] 包含 `description` 字段
- [ ] 包含 `created_at` 字段
- [ ] 包含 `author` 字段
- [ ] 包含项目基本信息
- [ ] 包含 4-6 条核心原则
- [ ] **包含文档生成约束** ⭐
- [ ] 包含技术约束
- [ ] 包含开发工作流
- [ ] 包含质量标准
- [ ] **包含输出目录规范** ⭐
- [ ] 技术约束具体明确（包含版本号）
- [ ] 所有内容使用了用户的语言

#### guidelines.md

- [ ] 包含 `name` 字段
- [ ] 包含 `description` 字段
- [ ] 包含 `created_at` 字段
- [ ] 包含 `author` 字段
- [ ] 包含命名规范
- [ ] 包含代码格式规范
- [ ] 包含最佳实践
- [ ] 包含常见问题和解决方案
- [ ] 代码示例来自项目的实际代码
- [ ] 所有内容使用了用户的语言

#### context.md

- [ ] 包含 `name` 字段
- [ ] 包含 `description` 字段
- [ ] 包含 `created_at` 字段
- [ ] 包含 `author` 字段
- [ ] 包含项目概述
- [ ] 包含活跃技术栈
- [ ] 包含项目结构
- [ ] 包含当前开发阶段
- [ ] 包含最近变更
- [ ] 项目结构基于实际的 src/ 目录结构
- [ ] 所有内容使用了用户的语言

### 质量检查

- [ ] 所有内容使用了统一的语言（中文或英文，不混合）
- [ ] 技术约束基于项目的实际 package.json/pom.xml 等
- [ ] 代码示例来自项目的实际代码，不是虚构的
- [ ] 项目结构基于实际的 src/ 目录结构
- [ ] 所有链接都是有效的
- [ ] 没有拼写错误
- [ ] 格式一致

### AI 助手配置检查

- [ ] CLAUDE.md 或 CODEBUDDY.md 已更新（如果存在）
- [ ] 项目记忆引用已添加
- [ ] 核心原则摘要已添加
- [ ] 关键约束已添加

---

## 常见问题排查清单

### 问题 1: 文档生成约束缺失

**症状**: constitution.md 中没有包含文档生成约束

**排查步骤**:
- [ ] 检查 constitution.md 是否包含"文档生成约束"部分
- [ ] 检查是否包含"禁止主动生成总结文档"的说明
- [ ] 检查是否包含"只在用户明确要求时生成文档"的说明

**解决方案**:
- [ ] 在 constitution.md 中添加文档生成约束部分
- [ ] 确保约束清晰明确

### 问题 2: 输出目录规范缺失

**症状**: constitution.md 中没有包含输出目录规范

**排查步骤**:
- [ ] 检查 constitution.md 是否包含"输出目录规范"部分
- [ ] 检查是否包含变更 ID 格式规则
- [ ] 检查是否包含输出路径规则
- [ ] 检查是否包含阶段分类
- [ ] 检查是否包含 YAML Frontmatter 必填字段

**解决方案**:
- [ ] 在 constitution.md 中添加输出目录规范部分
- [ ] 确保规范完整清晰

### 问题 3: 技术约束不具体

**症状**: constitution.md 中的技术约束过于模糊

**排查步骤**:
- [ ] 检查是否明确指定了编程语言版本
- [ ] 检查是否明确指定了框架版本
- [ ] 检查是否明确指定了数据库版本

**解决方案**:
- [ ] 更新技术约束，明确指定版本号
- [ ] 示例: "Java 17 或更高版本" 而不是 "Java"

### 问题 4: 代码示例虚构

**症状**: guidelines.md 中的代码示例不来自项目实际代码

**排查步骤**:
- [ ] 检查代码示例是否存在于项目中
- [ ] 检查代码示例是否与项目的实际代码风格一致

**解决方案**:
- [ ] 从项目中复制真实的代码片段
- [ ] 删除虚构的代码示例

### 问题 5: 语言混合

**症状**: 文件中混合使用中文和英文

**排查步骤**:
- [ ] 检查 constitution.md 是否混合使用中英文
- [ ] 检查 guidelines.md 是否混合使用中英文
- [ ] 检查 context.md 是否混合使用中英文

**解决方案**:
- [ ] 选择一种语言（中文或英文）
- [ ] 将所有内容翻译为选定的语言

### 问题 6: 项目结构不准确

**症状**: context.md 中的项目结构与实际不符

**排查步骤**:
- [ ] 检查 src/ 目录结构
- [ ] 检查是否遗漏了重要目录
- [ ] 检查是否包含了不存在的目录

**解决方案**:
- [ ] 扫描项目的实际目录结构
- [ ] 更新 context.md 中的项目结构部分

---

## 验证脚本

### 检查文件是否存在

```bash
# 检查目录
ls -la .spec-code/memory/

# 检查文件
ls -la .spec-code/memory/constitution.md
ls -la .spec-code/memory/guidelines.md
ls -la .spec-code/memory/context.md
```

### 检查文件格式

```bash
# 检查 YAML Frontmatter
head -5 .spec-code/memory/constitution.md
head -5 .spec-code/memory/guidelines.md
head -5 .spec-code/memory/context.md
```

### 检查文件内容

>注意 `.spec-code/memory`下只能包含名称为 `constitution.md`、`guidelines.md`、`context.md`的文件，如果有额外的其他文件，必须强制合并，必要时读取用户工程信息整合之后重新初始化
```bash
# 检查是否包含关键字
grep -n "文档生成约束" .spec-code/memory/constitution.md
grep -n "输出目录规范" .spec-code/memory/constitution.md
grep -n "核心原则" .spec-code/memory/constitution.md
```

---

## 成功标准

初始化完成后，应该满足以下所有条件：

### 必须满足

- [ ] `.spec-code/memory/` 目录已创建
- [ ] `constitution.md` 已创建并包含 YAML Frontmatter
- [ ] `guidelines.md` 已创建并包含 YAML Frontmatter
- [ ] `context.md` 已创建并包含 YAML Frontmatter
- [ ] `constitution.md` 包含 4-6 条核心原则
- [ ] `constitution.md` **必须包含文档生成约束** ⭐
- [ ] `constitution.md` **必须包含输出目录规范** ⭐
- [ ] `constitution.md` 包含明确的技术约束（包含版本号）
- [ ] `guidelines.md` 包含编码规范和最佳实践
- [ ] `context.md` 包含当前技术栈和项目结构
- [ ] 所有内容使用了统一的语言（中文或英文）
- [ ] 技术约束基于项目的实际配置文件
- [ ] 代码示例来自项目的实际代码
- [ ] 项目结构基于实际的 src/ 目录结构

### 应该满足

- [ ] AI 助手配置已更新（如果存在 CLAUDE.md 或 CODEBUDDY.md）
- [ ] 所有文件都有清晰的注释和说明
- [ ] 文档格式一致，易于阅读

### 可选

- [ ] 生成了完成报告
- [ ] 通知了团队成员
- [ ] 更新了项目 README

---

## 后续维护清单

### 定期维护（每月）

- [ ] 更新 context.md 中的最近变更
- [ ] 检查技术栈是否有更新
- [ ] 检查编码规范是否需要调整

### 技术栈变更时

- [ ] 更新 constitution.md 中的技术约束
- [ ] 更新 guidelines.md 中的相关规范
- [ ] 更新 context.md 中的活跃技术栈

### 编码规范调整时

- [ ] 更新 guidelines.md 中的相关规范
- [ ] 更新代码示例
- [ ] 通知团队成员

### 核心原则变更时

- [ ] 更新 constitution.md 中的核心原则
- [ ] 更新相关的工作流和质量标准
- [ ] 通知团队成员并进行讨论

---

## 检查清单总结

| 检查项 | 优先级 | 状态 |
|--------|--------|------|
| 文件已创建 | P0 | ⏳ |
| YAML Frontmatter 完整 | P0 | ⏳ |
| 文档生成约束已包含 | P0 | ⏳ |
| 输出目录规范已包含 | P0 | ⏳ |
| 技术约束具体明确 | P0 | ⏳ |
| 代码示例来自实际项目 | P0 | ⏳ |
| 语言一致性 | P0 | ⏳ |
| AI 助手配置已更新 | P1 | ⏳ |
| 格式一致 | P1 | ⏳ |
| 无拼写错误 | P1 | ⏳ |

---

## 完成标志

当以下所有项都打上 ✅ 时，项目记忆初始化完成：

- ✅ `.spec-code/memory/` 目录已创建
- ✅ `constitution.md` 已创建并验证
- ✅ `guidelines.md` 已创建并验证
- ✅ `context.md` 已创建并验证
- ✅ 所有文件都包含 YAML Frontmatter
- ✅ 所有必填字段已填充
- ✅ 文档生成约束已包含
- ✅ 输出目录规范已包含
- ✅ 技术约束基于项目的实际配置
- ✅ 代码示例来自项目的实际代码
- ✅ 所有内容使用了统一的语言
- ✅ AI 助手配置已更新（如果需要）
- ✅ 完成报告已生成
