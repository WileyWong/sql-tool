---
title: req-breakdown 质量检查清单
description: 需求拆解过程的完整验证清单
---

# 需求拆解质量检查清单

本文档提供需求拆解过程的完整验证清单，确保拆解结果的质量和完整性。

---

## 1. 前置条件检查

### 基础条件验证

- [ ] **需求文档来源已确定**
  - [ ] 用户指定文档路径（如果用户提供）
  - [ ] 需求审查技能输出路径（如果存在）
  - [ ] 需求解读技能输出路径（如果存在）
  - [ ] 至少有一个可用的需求文档来源

- [ ] **业务背景已明确**
  - [ ] 业务目标清晰
  - [ ] 用户角色明确
  - [ ] 使用场景完整

- [ ] **分析团队已分配**
  - [ ] 产品经理已确定
  - [ ] 业务分析师已确定
  - [ ] 架构师已确定（如需要）

- [ ] **分析环境已准备**
  - [ ] 协作工具已配置
  - [ ] 文档模板已准备
  - [ ] 输出路径已确定

---

## 2. 步骤 0: 确定需求文档来源 - 质量检查

### 文档来源确定验证

**检查用户指定文档**:
- [ ] 已检查用户在当前对话中是否已提供需求文档位置
- [ ] 如果用户已提供，已记录文档路径
- [ ] 如果用户未提供，已询问用户是否有指定的需求文档位置
- [ ] 已验证文档的可访问性（文件是否存在、是否可读）
- [ ] 已验证文档的完整性（文件是否为空、是否有内容）

**检查相关技能输出**:
- [ ] 已检查是否存在需求审查技能的输出文件
  - [ ] 文件路径: `workspace/{变更ID}/requirements/requirement-review.md`
- [ ] 已检查是否存在需求解读技能的输出文件
  - [ ] 文件路径: `workspace/{变更ID}/requirements/requirement.md`
- [ ] 已记录找到的技能输出文件路径

**确定文档使用策略**:
- [ ] 如果用户指定了文档，以用户文档为主，技能输出为辅
- [ ] 如果用户未指定文档，以技能输出为主要来源
- [ ] 确保至少有一个可用的需求文档来源
- [ ] 已记录最终确定的文档来源清单

**评估文档质量**:
- [ ] 已检查文档是否包含基本的需求要素（功能描述、业务场景、验收标准等）
- [ ] 已识别文档中的缺失信息或模糊描述
- [ ] 已评估文档的完整性和清晰度
- [ ] 如果文档质量不足，已建议用户先完成需求澄清或需求解读
- [ ] 已记录文档质量评估结果和需要补充的信息

**文档质量评估标准**:

| 质量等级 | 判断标准 | 后续操作 |
|---------|---------|---------|
| **优秀** | 包含完整的功能描述、业务场景、业务规则、验收标准、非功能需求、异常场景 | ✅ 可以直接进行拆解 |
| **良好** | 包含功能描述、业务场景、业务规则、验收标准，但非功能需求或异常场景不完整 | ✅ 可以进行拆解，需要标注缺失信息 |
| **一般** | 包含功能描述和部分业务场景，但业务规则、验收标准不完整 | ⚠️ 建议先进行需求澄清 |
| **不合格** | 只有简单的功能描述，缺少业务场景、业务规则、验收标准 | ❌ 无法进行拆解，建议先进行需求解读或澄清 |

**常见错误检查**:
- [ ] ❌ 错误 1: 未检查用户上下文就直接询问文档位置
  - 正确做法: 先检查用户在当前对话中是否已提供需求文档位置
- [ ] ❌ 错误 2: 忽略相关技能输出
  - 正确做法: 主动检查需求审查和需求解读技能的输出
- [ ] ❌ 错误 3: 文档质量不足仍继续拆解
  - 正确做法: 文档质量评估为"不合格"时，建议用户先完成需求解读或澄清

---

## 3. 步骤 1: 识别需求类型 - 质量检查

### 文档读取验证

**读取顺序正确性**:
- [ ] 优先读取用户指定文档（如果用户提供了具体的文档路径）
- [ ] 其次读取需求审查技能输出（如果存在）
- [ ] 最后读取需求解读技能输出（如果存在）
- [ ] 至少读取一个主要需求文档来源
- [ ] 已记录实际使用的文档来源，便于后续追溯

**文档读取策略**:
- [ ] 如果某个参考文档不存在，已跳过该文档，不影响拆解流程
- [ ] 如果所有文档来源都不存在，已提示用户提供需求文档
- [ ] 多个文档来源时，已相互补充和验证

### 需求类型识别完整性

**功能需求识别**（至少包含以下一种）:
- [ ] 用户管理需求（注册、登录、权限管理）
- [ ] 业务流程需求（订单处理、支付流程、审批流程）
- [ ] 数据管理需求（数据录入、查询、统计）
- [ ] 接口集成需求（第三方系统对接、API调用）
- [ ] 报表需求（数据展示、导出、分析）

**非功能需求识别**（至少包含以下一种）:
- [ ] 性能需求（响应时间、并发用户数、吞吐量）
- [ ] 安全需求（身份认证、数据加密、权限控制）
- [ ] 可用性需求（系统可用率、故障恢复时间）
- [ ] 兼容性需求（浏览器兼容、设备兼容）
- [ ] 可维护性需求（代码规范、文档要求、监控需求）

**业务规则需求识别**（至少包含以下一种）:
- [ ] 业务逻辑规则（计算规则、验证规则）
- [ ] 业务流程规则（审批规则、状态转换规则）
- [ ] 数据规则（数据格式、数据约束、数据关系）
- [ ] 权限规则（角色权限、操作权限、数据权限）

**用户体验需求识别**（至少包含以下一种）:
- [ ] 界面交互需求（页面布局、操作流程）
- [ ] 用户反馈需求（提示信息、错误处理）
- [ ] 易用性需求（操作简便性、学习成本）

**智能识别方法应用**:
- [ ] 已使用关键词识别功能需求（用户可以、系统应该、提供...功能）
- [ ] 已使用关键词识别非功能需求（性能、安全、可用性、响应时间、并发）
- [ ] 已使用关键词识别业务规则（必须、应当、规则、约束、限制、判重）
- [ ] 已使用关键词识别用户体验（界面、交互、提示、易用性、Loading）

**识别结果验证**:
- [ ] 所有需求类型都已识别
- [ ] 需求类型覆盖完整的业务场景
- [ ] 需求类型与需求文档一致
- [ ] 需求类型无遗漏

**常见错误检查**:
- [ ] ❌ 错误 1: 忽略非功能需求（只识别功能需求）
  - 正确做法: 同时识别功能需求和非功能需求
- [ ] ❌ 错误 2: 业务规则未单独识别（混入功能需求）
  - 正确做法: 业务规则单独分类，便于后续验证
- [ ] ❌ 错误 3: 用户体验需求遗漏
  - 正确做法: 识别界面交互、错误提示等用户体验需求

---

## 4. 步骤 2: 拆解需求（核心步骤）- 质量检查

### 原子化原则验证

**单一职责检查**:
- [ ] 每个需求只描述一个功能点
- [ ] 需求描述清晰，无歧义
- [ ] 需求不包含"和"、"以及"等连接词（表示多个功能）

**独立可理解检查**:
- [ ] 每个需求不依赖其他需求的描述就能理解
- [ ] 需求包含完整的业务背景和场景
- [ ] 需求可以独立进行业务验证

**完整性检查**:
- [ ] 需求描述包含输入、处理、输出
- [ ] 需求包含正常场景和异常场景
- [ ] 需求包含边界条件

**原子化反例检查**:
- [ ] ❌ 需求粒度过大（例如: "实现用户管理功能"包含注册、登录、信息管理等多个功能）
- [ ] ❌ 需求包含多个功能点（例如: "用户可以注册和登录"）
- [ ] ❌ 需求描述依赖其他需求（例如: "同上"）

### 可验证原则验证

**验收标准完整性**:
- [ ] 每个需求都有明确的验收标准列表
- [ ] 验收标准包含正常场景（至少 1 个）
- [ ] 验收标准包含异常场景（至少 2 个）
- [ ] 验收标准包含边界条件（至少 1 个）
- [ ] 验收标准具体可测（包含量化指标）

**验收标准质量检查**:
- [ ] 验收标准使用 `[ ]` 格式（便于后续勾选）
- [ ] 验收标准描述清晰，无歧义
- [ ] 验收标准可以通过测试验证
- [ ] 验收标准包含预期结果（例如: "显示错误提示"需要明确提示内容）

**验收标准示例对比**:

| ❌ 不好的验收标准 | ✅ 好的验收标准 |
|------------------|----------------|
| 用户可以注册 | 用户可以在注册页面填写手机号（11位中国大陆手机号） |
| 系统验证手机号 | 手机号格式错误时显示"请输入有效的手机号" |
| 注册成功 | 注册成功后发送欢迎短信并自动登录跳转到首页 |

**业务规则完整性**:
- [ ] 每个需求都列出了相关的业务规则
- [ ] 业务规则编号格式正确（例如: BR-001）
- [ ] 业务规则描述清晰准确（使用"必须"、"应当"、"禁止"等模态动词）
- [ ] 业务规则可量化（包含精确数字、时间、百分比、阈值）
- [ ] 业务规则无二义性（有唯一解释）

**业务规则清晰度验证**（参考 doc-code2req v5.0 标准）:
- [ ] **模态动词使用**: 业务规则使用"必须"、"应当"、"禁止"、"仅当...时"等明确的模态动词
- [ ] **量化指标**: 业务规则包含精确数字、时间、百分比、阈值等量化指标
- [ ] **时间点明确**: 业务规则包含精确时间、时间段、超时时间等时间点
- [ ] **条件和状态精确**: 业务规则包含枚举值、比较运算符等精确的条件和状态
- [ ] **业务术语具体**: 业务规则使用实际术语、业务动作、业务对象，避免模糊术语
- [ ] **无二义性**: 业务规则有唯一解释，可测试

### 可并行原则验证

**可并行需求标注**:
- [ ] 已识别可并行需求
- [ ] 可并行需求已标注 `[P]` 标记
- [ ] 可并行需求已分组管理（并行组 [P1]、[P2] 等）
- [ ] 可并行需求说明中已注明并行的原因（无业务依赖、无数据依赖、独立用户场景）

**可并行标准验证**:
- [ ] 无业务依赖: 需求之间不共享业务逻辑
- [ ] 无数据依赖: 需求不依赖相同的数据状态
- [ ] 独立用户场景: 需求面向不同的用户场景
- [ ] 可独立验证: 需求可以独立进行业务验证

**并行组结构验证**:
```markdown
并行组 [P1]: [组名称]
- [P] 需求 X.Y: [需求名称]
- [P] 需求 X.Z: [需求名称]
```

### 依赖关系验证

**依赖标注完整性**:
- [ ] 每个需求都标注了依赖关系（无依赖标注为"无"）
- [ ] 依赖格式正确（例如: `依赖: 需求 1.1（强依赖）`）
- [ ] 依赖类型明确（强依赖、弱依赖、可选依赖）
- [ ] 依赖关系合理（基于真实的业务约束）

**依赖类型验证**:

| 依赖类型 | 验证标准 | 示例 |
|---------|---------|------|
| **强依赖（Hard）** | 必须等待前置需求分析完成 | 用户登录 → 个人中心 |
| **弱依赖（Soft）** | 可以并行分析，但有逻辑顺序 | 商品管理 → 订单管理 |
| **可选依赖（Optional）** | 可以独立分析，但建议有顺序 | 基础功能 → 高级功能 |

**依赖图验证**（可选）:
- [ ] 已绘制依赖图（Mermaid 格式）
- [ ] 依赖图清晰展示需求之间的关系
- [ ] 依赖图无循环依赖
- [ ] 依赖图包含关键路径

**关键路径验证**:
- [ ] 已识别关键路径（依赖链最长的路径）
- [ ] 关键路径上的需求优先级为 P0
- [ ] 关键路径已在文档中明确标注

### 优先级评估验证

**优先级定义正确性**:
- [ ] **P0（必须有）**: 核心功能，系统无此功能无法运行
- [ ] **P1（应该有）**: 重要功能，显著影响用户体验
- [ ] **P2（可以有）**: 增强功能，锦上添花
- [ ] **P3（暂不需要）**: 未来功能，当前版本不实现

**优先级评估合理性**:
- [ ] 优先级基于业务价值和用户价值
- [ ] 被依赖的需求优先级高于依赖它的需求
- [ ] 关键路径上的需求优先级为 P0
- [ ] 优先级得到产品经理和业务方确认

**优先级分布验证**:
- [ ] P0 需求占比合理（建议 20%-40%）
- [ ] P1 需求占比合理（建议 40%-60%）
- [ ] P2 需求占比合理（建议 10%-30%）
- [ ] P3 需求占比合理（建议 0%-10%）

### 风险识别验证

**风险类型识别**:
- [ ] **技术风险**: 涉及不熟悉的技术或复杂算法
- [ ] **业务风险**: 业务规则复杂或不明确
- [ ] **依赖风险**: 依赖外部系统或第三方服务
- [ ] **数据风险**: 涉及大数据量或数据迁移
- [ ] **时间风险**: 时间紧迫或资源不足

**风险等级标注**:
- [ ] 每个需求都有风险等级标注（低/中/高）
- [ ] 风险因素描述清晰
- [ ] 高风险需求已特别标注
- [ ] 风险等级基于实际情况评估

**风险标注示例**:
```markdown
需求 1.1: 用户注册功能
- **风险等级**: 中等
- **风险因素**: 
  - 短信服务依赖第三方（依赖风险）
  - 手机号判重需要优化算法（技术风险）
```

**常见错误检查**:
- [ ] ❌ 错误 1: 需求粒度过大（未原子化）
  - 检查: 需求是否可以进一步拆分
- [ ] ❌ 错误 2: 验收标准模糊（不可测试）
  - 检查: 验收标准是否包含量化指标和预期结果
- [ ] ❌ 错误 3: 业务规则不清晰（有二义性）
  - 检查: 业务规则是否使用模态动词、量化指标、无二义性
- [ ] ❌ 错误 4: 依赖关系错误（循环依赖）
  - 检查: 依赖图是否无循环依赖
- [ ] ❌ 错误 5: 优先级不合理（被依赖的需求优先级低）
  - 检查: 被依赖的需求优先级是否高于依赖它的需求
- [ ] ❌ 错误 6: 忽略风险评估
  - 检查: 每个需求是否都有风险等级和风险因素

---

## 5. 步骤 3: 评估需求复杂度 - 质量检查

### 评估方法选择验证

**方法选择合理性**:
- [ ] 新团队或小型项目: 使用复杂度等级评估（简单/中等/复杂/非常复杂）
- [ ] 有经验的团队: 使用影响因子评估（数据、业务规则、交互、集成）
- [ ] 敏捷团队: 使用故事点评估（Fibonacci 数列）
- [ ] 团队成员对评估方法达成共识

### 复杂度等级评估验证

**等级定义正确性**:
- [ ] **简单（Simple）**: 标准的CRUD操作，业务逻辑简单
- [ ] **中等（Medium）**: 包含业务规则验证，有一定的逻辑复杂度
- [ ] **复杂（Complex）**: 涉及多个业务实体，复杂的业务流程
- [ ] **非常复杂（Very Complex）**: 跨系统集成，复杂的业务规则

**复杂度评估完整性**:
- [ ] 每个需求都有复杂度评估
- [ ] 复杂度评估包含评估理由
- [ ] 复杂度评估得到团队认可

### 影响因子评估验证

**影响因子考虑完整性**:
- [ ] **数据复杂度**: 涉及的数据实体数量和关系复杂度
- [ ] **业务规则复杂度**: 业务逻辑的复杂程度
- [ ] **用户交互复杂度**: 用户界面和交互的复杂程度
- [ ] **集成复杂度**: 与其他系统或服务的集成复杂度

**综合复杂度计算**:
- [ ] 综合复杂度基于各影响因子的综合评估
- [ ] 综合复杂度分级合理（简单/中等/复杂/非常复杂）

### 故事点评估验证

**Fibonacci 数列使用正确性**:
- [ ] 使用标准的 Fibonacci 数列（1、2、3、5、8、13）
- [ ] 故事点总计取最接近的 Fibonacci 数

**团队协作评估验证**:
- [ ] 使用 Planning Poker 或三点估算法
- [ ] 团队成员独立评估
- [ ] 差异较大时讨论原因
- [ ] 重新评估直到达成共识

**Planning Poker 流程验证**:
- [ ] 每个成员独立评估
- [ ] 同时亮牌
- [ ] 差异较大时讨论原因
- [ ] 重新评估直到达成共识

**三点估算法验证**:
- [ ] 最乐观估计（Best Case）
- [ ] 最可能估计（Most Likely）
- [ ] 最悲观估计（Worst Case）
- [ ] 期望值计算正确: (最乐观 + 4×最可能 + 最悲观) / 6

### 复杂度汇总验证

**总复杂度计算**:
- [ ] 已计算总复杂度
- [ ] 总复杂度计算方法正确（简单=2点、中等=5点、复杂=8点、非常复杂=13点）
- [ ] 已识别高复杂度需求（复杂、非常复杂）
- [ ] 已评估分析工作量

**高复杂度需求标识**:
- [ ] 高复杂度需求已特别标注
- [ ] 高复杂度需求的风险已评估
- [ ] 高复杂度需求的分析时间已预留

**常见错误检查**:
- [ ] ❌ 错误 1: 个人主观评估（未团队协作）
  - 正确做法: 使用 Planning Poker 或三点估算法进行团队协作评估
- [ ] ❌ 错误 2: 评估方法不一致
  - 正确做法: 团队统一使用同一种评估方法
- [ ] ❌ 错误 3: 忽略复杂度差异
  - 正确做法: 识别高复杂度需求，预留足够的分析时间

---

## 6. 步骤 4: 分配分析任务 - 质量检查

### 专业匹配验证

**专业领域匹配**:
- [ ] 用户体验专家负责用户相关功能（注册、登录、信息管理）
- [ ] 安全专家负责安全相关功能（登录、密码管理、权限控制）
- [ ] 电商业务专家负责电商功能（商品、订单、支付）
- [ ] 数据专家负责数据相关功能（统计、报表、分析）

**分配合理性**:
- [ ] 每个成员的分配需求与其专业背景匹配
- [ ] 每个成员都有明确的分析任务

### 负载均衡验证

**工作量计算**:
- [ ] 已计算每个成员的总复杂度
- [ ] 已计算每个成员的需求数量
- [ ] 已计算每个成员的平均复杂度

**工作量分配表格**:

| 成员 | 分配需求 | 总复杂度 | 需求数 | 平均复杂度 |
|------|---------|---------|--------|-----------|
| 张三 | 1.1, 1.3 | 7 点 | 2 个 | 3.5 点/需求 |
| 李四 | 1.2, 1.4 | 13 点 | 2 个 | 6.5 点/需求 |

**负载均衡调整**:
- [ ] 每个成员的工作量大致相当（差异 < 20%）
- [ ] 如果工作量差异较大，已提出调整建议
- [ ] 调整后的工作量大致均衡

### 依赖优先验证

**依赖链上游优先**:
- [ ] 依赖链上游的需求优先分配
- [ ] 关键路径上的需求优先分配
- [ ] 高优先级需求（P0）优先分配

**分析里程碑设置**:
- [ ] 已设置分析里程碑（第 1 周、第 2 周、第 3 周等）
- [ ] 里程碑与依赖关系对应
- [ ] 里程碑时间合理

**里程碑示例**:
```markdown
里程碑 1（第 1 周）: 用户注册功能分析完成（需求 1.1）
里程碑 2（第 2 周）: 用户登录功能分析完成（需求 1.2）
里程碑 3（第 3 周）: 用户信息管理和密码管理功能分析完成（需求 1.3、1.4）
```

**常见错误检查**:
- [ ] ❌ 错误 1: 忽略专业背景（将安全功能分配给用户体验专家）
  - 正确做法: 根据专业背景合理分配
- [ ] ❌ 错误 2: 工作量分配不均（某个成员负担过重）
  - 正确做法: 负载均衡，工作量大致相当
- [ ] ❌ 错误 3: 忽略依赖关系（下游需求优先分配）
  - 正确做法: 依赖链上游优先分配

---

## 7. 步骤 5: 输出需求拆解清单 - 质量检查

### 输出路径验证

**路径规范性**:
- [ ] 输出路径符合规范: `workspace/{变更ID}/requirements/breakdown.md`
- [ ] 变更 ID 格式正确: `YYYY-MM-DD-feature-name`
- [ ] 输出目录已创建

### YAML Frontmatter 验证

**必需字段完整性**:
- [ ] `change_id`: 变更 ID（格式: YYYY-MM-DD-feature-name）
- [ ] `change_title`: 变更标题
- [ ] `change_status`: 变更状态（analyzed）
- [ ] `document_type`: 文档类型（requirements-breakdown）
- [ ] `stage`: 阶段（requirements）
- [ ] `created_at`: 创建时间（ISO 8601 格式）
- [ ] `author`: 作者
- [ ] `source_documents`: 文档来源列表（包含 type 和 path）
- [ ] `version`: 版本号
- [ ] `compliance_checked`: 合规检查（true/false）
- [ ] `compliance_status`: 合规状态（passed/failed）

**source_documents 字段验证**:
- [ ] 包含所有实际使用的文档来源
- [ ] 每个文档来源包含 `type` 和 `path` 字段
- [ ] `type` 字段值正确（user_specified / req_review_output / req_explain_output）
- [ ] `path` 字段值为实际文件路径
- [ ] 可选: 包含 `quality` 字段（good / fair / poor）

**YAML Frontmatter 示例**:
```yaml
---
change_id: 2025-11-10-user-management
change_title: 用户管理功能需求拆解
change_status: analyzed
document_type: requirements-breakdown
stage: requirements
created_at: 2025-11-10T10:00:00Z
author: AI Assistant
source_documents: 
  - type: user_specified
    path: docs/requirements/user-management.md
    quality: good
  - type: req_review_output
    path: workspace/2025-11-10-user-management/requirements/requirement-review.md
  - type: req_explain_output
    path: workspace/2025-11-10-user-management/requirements/requirement.md
version: 1.0
compliance_checked: true
compliance_status: passed
---
```

### 文档结构验证（格式 1: 详细文档格式）

**章节完整性**:
- [ ] 文档标题（例如: "需求拆解清单：用户管理功能"）
- [ ] 需求分类章节（按功能模块分组）
- [ ] 每个需求的详细章节（包含完整的需求描述）
- [ ] 需求统计章节
- [ ] 分析里程碑章节
- [ ] 依赖图章节（可选）

**每个需求章节完整性**:
- [ ] 需求编号和名称（例如: "1.1 用户注册功能"）
- [ ] 负责人
- [ ] 复杂度
- [ ] 优先级
- [ ] 依赖关系
- [ ] 状态
- [ ] 可并行标注（如适用）
- [ ] 风险等级
- [ ] 风险因素
- [ ] 功能描述
- [ ] 业务场景
- [ ] 验收标准
- [ ] 业务规则

**需求统计章节完整性**:
- [ ] 总需求数
- [ ] 总复杂度
- [ ] 可并行需求数量
- [ ] 关键路径
- [ ] 高风险需求数量（可选）

**分析里程碑章节完整性**:
- [ ] 里程碑编号（例如: "里程碑 1"）
- [ ] 里程碑时间（例如: "第 1 周"）
- [ ] 里程碑内容（例如: "用户注册功能分析完成"）

**依赖图章节验证**（可选）:
- [ ] 使用 Mermaid 格式绘制
- [ ] 依赖图清晰展示需求之间的关系
- [ ] 依赖图无循环依赖

### 文档结构验证（格式 2: 表格格式）

**表格完整性**:
- [ ] 表格标题（例如: "需求拆解清单（表格格式）"）
- [ ] 表格列标题（需求ID、需求名称、负责人、复杂度、优先级、风险等级、依赖、状态、可并行）
- [ ] 表格数据完整（每个需求一行）
- [ ] 需求统计章节
- [ ] 分析任务分配章节
- [ ] 分析里程碑章节

**表格数据验证**:
- [ ] 需求 ID 格式正确（例如: 1.1）
- [ ] 需求名称简洁明确
- [ ] 负责人已明确
- [ ] 复杂度已评估（简单/中等/复杂/非常复杂 或 故事点）
- [ ] 优先级已评估（P0/P1/P2/P3）
- [ ] 风险等级已评估（低/中/高）
- [ ] 依赖关系已标注（无 或 需求 X.Y）
- [ ] 状态已标注（待分析/分析中/已完成/已阻塞）
- [ ] 可并行标注（否 或 [P] 与需求 X.Y 并行）

### 文档结构验证（格式 3: 看板格式）

**看板结构完整性**:
- [ ] 看板标题（例如: "需求拆解看板"）
- [ ] 待分析列（包含待分析的需求）
- [ ] 分析中列（包含正在分析的需求）
- [ ] 已完成列（包含已完成的需求）
- [ ] 并行组章节
- [ ] 依赖关系章节
- [ ] 需求统计章节

**看板格式验证**:
- [ ] 使用 `- [ ]` 格式标注待分析和分析中的需求
- [ ] 使用 `- [x]` 格式标注已完成的需求
- [ ] 需求标注包含负责人（例如: `@张三`）
- [ ] 需求标注包含优先级（例如: `#P0`）
- [ ] 需求标注包含复杂度（例如: `#中等`）
- [ ] 需求标注包含风险等级（例如: `#中等风险`）

### Markdown 格式验证

**标题层级验证**:
- [ ] 一级标题（#）: 文档标题
- [ ] 二级标题（##）: 主要章节（需求分类、需求统计、分析里程碑）
- [ ] 三级标题（###）: 需求章节（例如: "1.1 用户注册功能"）
- [ ] 四级标题（####）: 需求子章节（例如: "功能描述"）

**列表格式验证**:
- [ ] 使用 `-` 或 `*` 开头的无序列表
- [ ] 使用 `- [ ]` 格式的任务列表（验收标准）
- [ ] 列表缩进正确（2 个空格或 1 个 Tab）

**代码块格式验证**:
- [ ] 使用 ````mermaid` 格式的 Mermaid 代码块（依赖图）
- [ ] 使用 ````markdown` 格式的 Markdown 代码块（示例）

**表格格式验证**:
- [ ] 表格列对齐正确（使用 `|---|` 分隔符）
- [ ] 表格数据完整（每行数据对应表头）

### 内容准确性验证

**需求数量一致性**:
- [ ] 需求统计中的总需求数与实际需求章节数量一致
- [ ] 可并行需求数量与实际标注 `[P]` 的需求数量一致
- [ ] 分析任务分配中的需求数量与总需求数一致

**复杂度一致性**:
- [ ] 需求统计中的总复杂度与各需求复杂度之和一致
- [ ] 分析任务分配中的总复杂度与总需求复杂度一致

**依赖关系一致性**:
- [ ] 依赖图中的依赖关系与需求章节中的依赖标注一致
- [ ] 关键路径与依赖关系一致

**文档来源记录准确性**:
- [ ] YAML Frontmatter 中的 `source_documents` 字段与实际使用的文档来源一致
- [ ] 文档来源路径正确，可访问

**常见错误检查**:
- [ ] ❌ 错误 1: YAML Frontmatter 缺少必需字段
  - 正确做法: 确保所有必需字段都已填写
- [ ] ❌ 错误 2: 需求章节缺少必需字段（例如: 验收标准、业务规则）
  - 正确做法: 每个需求章节都包含完整的必需字段
- [ ] ❌ 错误 3: 需求统计数据不一致
  - 正确做法: 需求统计数据与实际需求章节一致
- [ ] ❌ 错误 4: 依赖图与依赖标注不一致
  - 正确做法: 依赖图与需求章节中的依赖标注一致
- [ ] ❌ 错误 5: 文档来源记录不准确
  - 正确做法: YAML Frontmatter 中的 `source_documents` 字段与实际使用的文档来源一致

---

## 8. 最终验证清单

### 功能完整性验证

- [ ] 所有需求都已拆解为原子化的功能点
- [ ] 所有需求都有明确的验收标准
- [ ] 所有需求都有复杂度评估
- [ ] 所有需求都有优先级评估（P0/P1/P2/P3）
- [ ] 所有需求都有风险识别和评估
- [ ] 所有需求都有负责人
- [ ] 所有需求的依赖关系都已标注
- [ ] 可并行需求已标注 `[P]`
- [ ] 关键路径已识别
- [ ] 分析里程碑已设置

### 业务完整性验证

- [ ] 需求覆盖完整的业务场景
- [ ] 包含正常场景和异常场景
- [ ] 业务规则明确定义
- [ ] 用户体验要求明确
- [ ] 非功能需求已识别

### 质量标准验证

- [ ] 需求原子化（每个需求不可再分）
- [ ] 验收标准可测试（具体、可量化）
- [ ] 业务规则清晰准确（使用模态动词、量化指标、无二义性）
- [ ] 依赖关系合理（无循环依赖）
- [ ] 优先级合理（被依赖的需求优先级高）
- [ ] 风险评估准确（基于实际情况）

### 团队协作验证

- [ ] 需求分配合理（专业匹配、负载均衡）
- [ ] 团队成员已确认分析任务
- [ ] 复杂度评估得到团队认可
- [ ] 分析里程碑得到团队认可

### 输出质量验证

- [ ] 需求拆解清单已生成
- [ ] 需求拆解清单格式正确（Markdown）
- [ ] YAML Frontmatter 完整
- [ ] 文档结构完整（详细文档/表格/看板格式）
- [ ] 内容准确性验证通过
- [ ] 依赖图已绘制（可选）

### 文档来源验证

- [ ] 文档来源已确定
- [ ] 文档来源已记录到 YAML Frontmatter
- [ ] 文档来源路径正确
- [ ] 文档质量评估结果已记录

---

## 9. 示例检查场景

### 场景 1: 电商用户管理模块（完整流程）

**验证要点**:
- [ ] 步骤 0: 文档来源确定验证（用户指定文档 + 技能输出）
- [ ] 步骤 1: 需求类型识别验证（功能需求、非功能需求、业务规则、用户体验）
- [ ] 步骤 2: 需求拆解验证（4 个需求，原子化、可验证、可并行、有依赖）
- [ ] 步骤 3: 复杂度评估验证（影响因子评估 + 故事点评估）
- [ ] 步骤 4: 任务分配验证（专业匹配、负载均衡、依赖优先）
- [ ] 步骤 5: 输出清单验证（详细文档格式，包含完整的需求描述）
- [ ] 最终验证: 功能完整性、业务完整性、质量标准、团队协作、输出质量

### 场景 2: 电商订单管理（表格格式）

**验证要点**:
- [ ] 步骤 0: 文档来源确定验证（需求解读技能输出）
- [ ] 步骤 5: 输出清单验证（表格格式，包含需求统计和任务分配）
- [ ] 表格格式验证（需求ID、需求名称、负责人、复杂度、优先级、风险等级、依赖、状态、可并行）
- [ ] 需求统计验证（总需求数、总复杂度、可并行需求、关键路径）
- [ ] 分析任务分配验证（成员、分配需求、总复杂度、平均复杂度）

### 场景 3: 内容管理系统（看板格式）

**验证要点**:
- [ ] 步骤 0: 文档来源确定验证（需求审查技能输出）
- [ ] 步骤 5: 输出清单验证（看板格式，包含待分析、分析中、已完成）
- [ ] 看板格式验证（使用 `- [ ]` 和 `- [x]` 格式）
- [ ] 并行组验证（并行组 [P1]、[P2]）
- [ ] 依赖关系验证（依赖图）

### 场景 4: 文档质量不足的处理

**验证要点**:
- [ ] 步骤 0: 文档质量评估验证（评估结果为"不合格"）
- [ ] AI 反馈验证（明确指出文档质量问题）
- [ ] 建议验证（建议用户先完成需求解读或澄清）
- [ ] 补充信息清单验证（列出需要补充的信息）

---

## 10. 常见问题排查

### 问题 1: 文档来源不明确

**症状**:
- 未检查用户上下文就直接询问文档位置
- 忽略相关技能输出

**检查点**:
- [ ] 是否先检查用户在当前对话中是否已提供需求文档位置
- [ ] 是否检查需求审查和需求解读技能的输出
- [ ] 是否记录实际使用的文档来源

**解决方案**:
1. 先检查用户上下文
2. 再检查相关技能输出
3. 建立文档使用策略
4. 记录文档来源到 YAML Frontmatter

---

### 问题 2: 需求粒度过大（未原子化）

**症状**:
- 需求"实现用户管理功能"包含注册、登录、信息管理等多个功能
- 需求包含"和"、"以及"等连接词

**检查点**:
- [ ] 每个需求是否只描述一个功能点
- [ ] 需求是否可以进一步拆分
- [ ] 需求是否包含多个业务场景

**解决方案**:
1. 按照原子化原则进一步拆分
2. 确保每个需求只描述一个功能点
3. 验证需求独立可理解

---

### 问题 3: 验收标准模糊（不可测试）

**症状**:
- 验收标准"用户体验良好"
- 验收标准"系统运行稳定"

**检查点**:
- [ ] 验收标准是否包含量化指标
- [ ] 验收标准是否包含预期结果
- [ ] 验收标准是否可以通过测试验证

**解决方案**:
1. 验收标准使用具体、可量化的描述
2. 验收标准包含预期结果
3. 验收标准可以通过测试验证

**示例**:
```markdown
❌ 不好: 用户体验良好

✅ 好: 
- [ ] 注册流程不超过3个步骤
- [ ] 每个步骤的响应时间不超过2秒
- [ ] 错误提示信息清晰明确
- [ ] 支持键盘快捷操作
```

---

### 问题 4: 业务规则不清晰（有二义性）

**症状**:
- 业务规则"密码需要一定的强度"
- 业务规则"验证码有效期不宜过短"

**检查点**:
- [ ] 业务规则是否使用模态动词（必须、应当、禁止）
- [ ] 业务规则是否包含量化指标（精确数字、时间、百分比）
- [ ] 业务规则是否无二义性（有唯一解释）

**解决方案**:
1. 使用模态动词明确业务规则
2. 使用量化指标替代模糊描述
3. 确保业务规则有唯一解释

**示例**:
```markdown
❌ 不好: 密码需要一定的强度

✅ 好: 密码必须为8-20位，包含字母、数字、特殊字符中的至少2种
```

---

### 问题 5: 依赖关系错误（循环依赖）

**症状**:
- 需求 A 依赖需求 B，需求 B 依赖需求 A
- 依赖图中存在循环

**检查点**:
- [ ] 依赖图是否无循环依赖
- [ ] 依赖关系是否基于真实的业务约束
- [ ] 依赖类型是否正确（强依赖、弱依赖、可选依赖）

**解决方案**:
1. 检查依赖图，识别循环依赖
2. 调整依赖关系，消除循环
3. 验证依赖关系的合理性

---

### 问题 6: 优先级不合理（被依赖的需求优先级低）

**症状**:
- 需求 A 依赖需求 B，但需求 A 优先级为 P0，需求 B 优先级为 P1

**检查点**:
- [ ] 被依赖的需求优先级是否高于依赖它的需求
- [ ] 关键路径上的需求优先级是否为 P0
- [ ] 优先级是否得到产品经理和业务方确认

**解决方案**:
1. 被依赖的需求优先级应高于或等于依赖它的需求
2. 关键路径上的需求优先级应为 P0
3. 与产品经理和业务方确认优先级

---

### 问题 7: 文档质量不足仍继续拆解

**症状**:
- 需求文档只有一句话描述
- 缺少业务场景、业务规则、验收标准

**检查点**:
- [ ] 是否评估了文档质量
- [ ] 文档质量评估结果是否为"不合格"
- [ ] 是否建议用户先完成需求解读或澄清

**解决方案**:
1. 评估文档质量
2. 如果文档质量不足（不合格），停止拆解
3. 建议用户先完成需求解读或澄清
4. 列出需要补充的信息清单

---

### 问题 8: 复杂度评估不一致

**症状**:
- 团队成员对同一需求的复杂度评估差异较大
- 评估方法不统一

**检查点**:
- [ ] 团队是否使用统一的评估方法
- [ ] 是否使用 Planning Poker 或三点估算法
- [ ] 差异较大时是否讨论原因

**解决方案**:
1. 团队统一使用同一种评估方法
2. 使用 Planning Poker 或三点估算法进行团队协作评估
3. 差异较大时讨论原因，重新评估直到达成共识

---

## AI 执行检查清单

完成需求拆解后，AI 应确认以下所有项目：

- [ ] 1. 文档来源已确定并记录到 YAML Frontmatter
- [ ] 2. 文档质量已评估，评估结果为"良好"或"优秀"
- [ ] 3. 需求类型已识别（功能需求、非功能需求、业务规则、用户体验）
- [ ] 4. 所有需求已拆解为原子化的功能点
- [ ] 5. 所有需求都有明确的验收标准（包含正常、异常、边界条件）
- [ ] 6. 所有需求都有业务规则（使用模态动词、量化指标、无二义性）
- [ ] 7. 可并行需求已标注 `[P]`
- [ ] 8. 依赖关系已标注（无循环依赖）
- [ ] 9. 优先级已评估（P0/P1/P2/P3，被依赖的需求优先级高）
- [ ] 10. 风险已识别和评估（低/中/高）
- [ ] 11. 复杂度已评估（使用统一的评估方法，团队协作评估）
- [ ] 12. 分析任务已分配（专业匹配、负载均衡、依赖优先）
- [ ] 13. 分析里程碑已设置（与依赖关系对应）
- [ ] 14. 需求拆解清单已生成（YAML Frontmatter 完整、文档结构完整）
- [ ] 15. 已通过最终验证清单（功能完整性、业务完整性、质量标准、团队协作、输出质量）
