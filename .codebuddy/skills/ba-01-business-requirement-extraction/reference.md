# 业务需求提取 - 参考资料

## 顶层用例法说明

### 什么是顶层用例？

**顶层用例（Business Use Case）** 是从业务视角描述的用户目标和业务流程，关注"业务要达成什么"而不是"系统如何实现"。

### 顶层用例 vs 系统用例

| 维度 | 顶层用例（Business Use Case） | 系统用例（System Use Case） |
|------|------------------------------|---------------------------|
| **关注点** | 业务目标和业务流程 | 系统功能和交互细节 |
| **抽象层次** | 顶层、业务层 | 低层、系统层 |
| **参与者** | 业务角色（访客、被访人） | 系统用户（登录用户、管理员） |
| **流程描述** | 业务活动序列（预约→审批→签到） | 系统交互步骤（点击按钮→调用API→显示结果） |
| **适用阶段** | 需求分析初期 | 详细设计阶段 |
| **输出物** | 业务需求文档、业务流程图 | 系统需求规格说明、用例规约 |

### 示例对比

❌ **系统用例（过早陷入细节）**:
```
用例：提交预约表单
1. 用户点击"预约访问"按钮
2. 系统显示预约表单页面
3. 用户在"姓名"输入框输入姓名
4. 用户在"手机号"输入框输入手机号
5. 系统实时验证手机号格式
6. 用户点击"上传照片"按钮
7. 系统调用相机API...
```

✅ **顶层用例（聚焦业务价值）**:
```
业务用例：管理访客预约申请
主要参与者：访客
业务目标：提前预约访问，避免现场等待，获得顺畅访问体验
主要业务流程：
1. 访客填写个人信息和来访信息
2. 系统验证信息完整性
3. 系统生成预约单号并推送通知给被访人
4. 访客获得预约确认
```

### 为什么使用顶层用例？

1. **避免过早设计**：需求分析阶段不应纠结于UI设计和技术实现
2. **聚焦业务价值**：明确"为什么做"而不仅仅是"做什么"
3. **便于沟通**：业务方更容易理解业务流程
4. **稳定性更高**：业务流程相对稳定，系统实现方式可能多次变化
5. **指导后续设计**：一个顶层用例可能对应多个系统用例和功能点

---

## SMART原则详解

| 原则 | 说明 | 示例 |
|------|------|------|
| **Specific（具体）** | 目标要明确具体，不能模糊 | ❌提升效率 ✅处理时间从30分钟降至5分钟 |
| **Measurable（可量化）** | 目标要有量化指标，可以衡量 | ❌响应快 ✅接口响应时间P95<3秒 |
| **Achievable（可实现）** | 目标要符合实际，可以达成 | 基于现有技术栈和团队能力评估 |
| **Relevant（相关性）** | 目标要与业务战略相关 | 解决当前业务痛点 |
| **Time-bound（有时限）** | 目标要有明确的时间期限 | Q2上线MVP，Q3全面推广 |

---

## MoSCoW优先级方法

| 优先级 | 说明 | 判断标准 |
|--------|------|----------|
| **Must Have** | 必须有，没有则项目失败 | 核心业务流程，影响所有用户 |
| **Should Have** | 应该有，重要但不是必需 | 重要业务场景，影响部分用户 |
| **Could Have** | 可以有，有更好但没有也可以 | 增值场景，影响少数用户 |
| **Won't Have** | 暂时不做，未来可能考虑 | 低价值或不紧急 |

---

## 需求分析相关标准

- **IEEE 29148**: 系统和软件需求工程标准
- **BABOK**: 业务分析知识体系
- **ISO/IEC 25010**: 软件质量模型
- **UML用例建模**: 顶层用例vs系统用例的区分和建模方法

---

## 使用流程

### Step 1: 准备原始材料

收集所有需求相关的原始信息：
- 会议记录（会议纪要、录音转文字）
- 访谈内容（用户访谈、利益相关者访谈）
- 需求文档（PRD初稿、业务方需求说明）
- 邮件往来（需求讨论邮件、需求变更邮件）
- 用户反馈（用户调研报告、问卷结果）

### Step 2: 预处理原始材料

- 去除无关信息（会议中的闲聊、重复内容）
- 标注关键段落（使用【重要】、【核心需求】等标记）
- 补充上下文（如果是片段，补充背景说明）

### Step 3: 执行需求提取

将原始材料粘贴到输入材料部分，执行提示词

### Step 4: 审核输出结果

检查输出的业务需求文档：
- 业务目标是否符合SMART原则
- 顶层用例是否完整
- 需求是否100%可追溯
- 优先级评估是否合理
- 是否标注了需要确认的事项

### Step 5: 与业务方确认

将输出文档发送给业务方，重点确认：
- 业务目标和量化指标是否准确
- 顶层用例是否完整覆盖业务场景
- 业务流程和业务规则是否符合实际
- 标注为"需确认"的事项

### Step 6: 迭代优化

根据业务方反馈更新需求文档，进入下一步需求分析流程。

---

## 非功能需求（NFR）分类说明

### 六类质量属性

| 质量属性 | 说明 | 典型指标 |
|---------|------|---------|
| **性能** | 系统响应速度和处理能力 | 响应时间、吞吐量、并发用户数 |
| **可用性** | 系统正常运行的能力 | SLA、故障恢复时间（RTO/RPO） |
| **安全性** | 保护数据和系统的能力 | 加密标准、认证方式、合规要求 |
| **可扩展性** | 系统应对增长的能力 | 水平扩展、数据增长、用户增长 |
| **可维护性** | 系统易于维护的程度 | 日志要求、配置管理、代码质量 |
| **可观测性** | 监控和诊断系统的能力 | 监控告警、链路追踪、日志分析 |

### NFR 描述模板

```markdown
### NFR{编号}：{质量属性类别}

- **需求描述**: {具体要求是什么}
- **量化指标**: {如何衡量，必须有具体数值}
- **验证方法**: {如何验证该需求已满足}
- **优先级**: High / Medium / Low
- **来源**: （引用自原始材料第X页/段落Y）
```

### NFR 优先级说明

| 优先级 | 说明 | 判断标准 |
|-------|------|---------|
| **High** | 系统上线必须满足 | 不满足则无法投产 |
| **Medium** | 重要但可分阶段实现 | 影响用户体验 |
| **Low** | 锦上添花 | 可在后续版本优化 |

---

## 信息不足处理

当原始材料信息不完整时，采用以下处理方式：

| 缺失信息 | 处理方式 | 标注方式 |
|---------|---------|---------| 
| **业务目标不明确** | 基于行业最佳实践推断目标 | 标注 `（推断，需确认）` |
| **量化指标缺失** | 参考行业基准补充 | 标注 `（建议指标，需确认）` |
| **业务规则不完整** | 基于常见业务场景补充 | 标注 `（基于行业经验推断）` |
| **优先级未明确** | 根据业务价值和用户影响评估 | 标注 `（建议优先级）` |

### 处理原则

1. **合理推断**: 基于行业最佳实践补充
2. **明确标注**: 使用 `（推断，需确认）` 等标记
3. **列入待确认清单**: 在第5部分列出
4. **提供确认建议**: 说明需要向谁确认

### 示例

```markdown
### 业务目标2：提升系统安全性（推断，需确认）

- **Specific**: 实现访客信息加密存储和传输
- **Measurable**: 
  - 敏感数据加密率：100%（建议指标，需确认）
  - 安全漏洞数：0个高危漏洞
- **来源**: （基于等保三级标准推断，需与安全团队确认）
```

---

## 需求冲突标注

当发现原始材料中存在需求冲突时，使用以下格式标注：

```markdown
⚠️ **需求冲突警告**
- **冲突点**: {描述冲突的具体内容}
- **冲突来源**: 需求A（引用自材料1）vs 需求B（引用自材料2）
- **冲突分析**: {为什么产生冲突，影响是什么}
- **建议解决方案**: 
  - 方案1（优先推荐）：{描述}
  - 方案2：{描述}
- **确认对象**: {需要谁来决策}
```

### 常见冲突类型

| 冲突类型 | 说明 | 解决思路 |
|---------|------|---------|
| **优先级冲突** | 不同干系人对优先级有不同看法 | 明确业务价值，由产品负责人决策 |
| **资源冲突** | 需求超出可用资源 | 分阶段实现，MVP 先行 |
| **技术冲突** | 需求与技术约束矛盾 | 与架构师协商可行方案 |
| **业务规则冲突** | 不同业务方提出矛盾规则 | 明确业务场景，分别处理 |

---

## 质量验证循环

完成初稿后，执行以下验证：

```
┌─────────────────────────────────────────────────┐
│                  质量验证循环                    │
├─────────────────────────────────────────────────┤
│  1. SMART 符合度检查                             │
│     └─ 每个业务目标是否满足 SMART 五要素？        │
│                                                 │
│  2. 来源追溯检查                                 │
│     └─ 每条需求是否标注了来源？                   │
│                                                 │
│  3. 用例完整性检查                               │
│     └─ 顶层用例是否包含所有11项必要要素？         │
│                                                 │
│  4. NFR 量化检查                                 │
│     └─ 每个 NFR 是否有具体的量化指标？            │
│                                                 │
│  验证 → 修正 → 重复                              │
│  全部通过后输出最终文档                          │
└─────────────────────────────────────────────────┘
```

---

## 成功标准

完成业务需求提取后，检查是否满足以下标准：

| 标准 | 检查项 | 状态 |
|------|--------|------|
| **业务目标完整** | 至少提取 1 个业务目标，100% 符合 SMART 原则 | ✅/❌ |
| **顶层用例完整** | 每个用例包含 11 项必要要素 | ✅/❌ |
| **NFR 量化** | 每个 NFR 有具体的量化指标和验证方法 | ✅/❌ |
| **来源可追溯** | 每条需求标注来源，推断需求明确标注 | ✅/❌ |
| **优先级明确** | 使用 MoSCoW 方法评估优先级 | ✅/❌ |
| **遗漏风险识别** | 识别可能遗漏的需求，列入待确认清单 | ✅/❌ |
| **冲突已标注** | 需求冲突已识别并标注解决方案 | ✅/❌ |

**全部 ✅ 才可输出最终文档**。

---

## 常见错误

### 错误1：业务目标不符合 SMART 原则

| 类型 | 示例 |
|------|------|
| ❌ 错误 | 提升系统效率 |
| ✅ 正确 | 将访客预约处理时间从 30 分钟降低到 5 分钟 |

**问题**：目标模糊，无法衡量是否达成。

### 错误2：顶层用例过于技术化

| 类型 | 示例 |
|------|------|
| ❌ 错误 | 用户点击提交按钮，系统调用 API 保存数据 |
| ✅ 正确 | 访客填写个人信息和来访信息，系统验证并生成预约单号 |

**问题**：过早陷入系统实现细节，应聚焦业务流程。

### 错误3：NFR 缺少量化指标

| 类型 | 示例 |
|------|------|
| ❌ 错误 | 系统响应要快 |
| ✅ 正确 | 接口响应时间 P95 < 3 秒 |

**问题**：无法验证需求是否满足。

### 错误4：需求来源不可追溯

| 类型 | 示例 |
|------|------|
| ❌ 错误 | 系统需要支持黑名单功能 |
| ✅ 正确 | 系统需要支持黑名单功能（引用自安保部门访谈"需要拒绝高风险访客"） |

**问题**：无法追溯需求来源，难以验证需求合理性。

---

## 技术协作接口

本技能输出需与以下角色协作确认：

| 协作角色 | 协作内容 | 协作时机 |
|---------|---------|---------|
| 架构师 | NFR 技术可行性评审、架构约束确认 | NFR 提取后 |
| 安全团队 | 安全合规要求确认 | 安全性 NFR 提取后 |
| 运维团队 | 可用性、可观测性要求确认 | 相关 NFR 提取后 |
| 业务方 | 业务目标和优先级确认 | 全部输出后 |

---

## 图例说明

| 图例 | 含义 | 适用场景 |
|------|------|---------| 
| ✅ | 符合要求 | 成功标准检查通过 |
| ⚠️ | 部分符合，需改进 | 有待完善项 |
| ❌ | 不符合要求 | 检查未通过 |
