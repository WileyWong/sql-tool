# API 文档生成验收清单

> 本清单按照 SKILL.md 中的执行步骤组织，每完成一个步骤后，请在对应章节中勾选验收项。

## 步骤 1: 扫描接口定义 - 验收标准

### 1.1 Controller 类识别
- [ ] 所有 Controller 类已识别（≥ 1 个）
- [ ] 所有 @RestController 类已识别
- [ ] 所有 @Controller 类已识别

### 1.2 接口方法识别
- [ ] 所有接口方法已识别（≥ 3 个）
- [ ] 所有 @GetMapping 已识别
- [ ] 所有 @PostMapping 已识别
- [ ] 所有 @PutMapping 已识别
- [ ] 所有 @DeleteMapping 已识别
- [ ] 所有 @PatchMapping 已识别

### 1.3 路径和模块信息
- [ ] 接口路径已完整提取（基础路径 + 方法路径）
- [ ] 基础路径已提取（@RequestMapping）
- [ ] 包路径和模块信息已记录
- [ ] JavaDoc 注释已提取

---

## 步骤 2: 提取接口详细信息 - 验收标准

### 2.1 参数提取
- [ ] 所有参数类型已提取（RequestBody、RequestParam、PathVariable）
- [ ] @RequestBody 参数已提取
- [ ] @RequestParam 参数已提取（含默认值和必需性）
- [ ] @PathVariable 参数已提取
- [ ] @RequestHeader 参数已提取
- [ ] 参数必需性和默认值已明确

### 2.2 返回值分析
- [ ] 返回值类型已定义
- [ ] 返回值类型已明确（User、List<User>、Page<User>）
- [ ] 响应状态码已确定
- [ ] 响应数据结构已定义

### 2.3 认证和权限
- [ ] 认证和权限要求已标注
- [ ] @PreAuthorize 注解已提取
- [ ] @Secured 注解已提取
- [ ] @RolesAllowed 注解已提取

### 2.4 DTO 验证规则
- [ ] DTO 验证规则已提取
- [ ] DTO 类的字段验证规则已提取（@NotNull、@Size 等）

### 2.5 统一响应格式
- [ ] 统一响应格式已识别（如存在）
- [ ] 响应格式的字段定义已提取（status、message、data 等）
- [ ] 成功和错误响应的结构差异已分析

---

## 步骤 2.5: 提取 DTO 类属性定义 - 验收标准

### 2.5.1 DTO 类识别
- [ ] 所有核心 DTO 类已识别（≥ 3 个）
- [ ] 每个 DTO 类的字段已完整提取

### 2.5.2 字段信息提取
- [ ] 字段类型、必需性、验证规则已明确
- [ ] 字段名已提取
- [ ] 字段类型已提取（String、Integer、Long、Boolean、List<T>、嵌套对象）
- [ ] 字段注释已提取（JavaDoc 或行内注释）
- [ ] 是否必需已判断（根据 @NotNull、@NotBlank 等注解）

### 2.5.3 验证规则提取
- [ ] @NotNull 注解已识别
- [ ] @NotBlank 注解已识别
- [ ] @Size 注解已识别（min、max）
- [ ] @Min/@Max 注解已识别
- [ ] @Email 注解已识别
- [ ] @Pattern 注解已识别（正则表达式）

### 2.5.4 嵌套对象和枚举
- [ ] 嵌套对象结构已识别（如存在）
- [ ] 嵌套对象的字段定义已递归提取
- [ ] 枚举类型的可选值已列出（如存在）

---

## 步骤 3: 模块化分组 - 验收标准

### 3.1 模块划分
- [ ] 所有接口已分类到对应模块
- [ ] 模块划分清晰合理（≥ 2 个模块）
- [ ] 按包路径分类合理
- [ ] 按 Controller 功能分类清晰

### 3.2 模块命名和完整性
- [ ] 模块命名符合业务语义
- [ ] 模块之间无重复或遗漏
- [ ] 用户管理模块完整（如存在）
- [ ] 订单管理模块完整（如存在）
- [ ] 商品管理模块完整（如存在）
- [ ] 其他业务模块完整

---

## 步骤 4: 生成请求/响应示例 - 验收标准

### 4.1 请求示例
- [ ] 每个接口包含完整的请求示例（含 DTO 属性说明）
- [ ] 请求示例基于真实的 DTO 类定义
- [ ] 请求示例包含必需的请求头（如 Authorization）

### 4.2 响应示例
- [ ] 每个接口包含成功响应示例（含字段说明）
- [ ] 每个接口包含错误响应示例
- [ ] 响应示例使用统一响应格式（包含 code/status、message、data）

### 4.3 HTTP 状态码
- [ ] HTTP 状态码已说明
- [ ] 使用正确的 HTTP 状态码

### 4.4 DTO 属性说明
- [ ] DTO 字段的类型、必需性、验证规则已在注释中说明
- [ ] 嵌套对象结构清晰展示（使用缩进）
- [ ] 枚举类型的可选值已列出

### 4.5 示例数据质量
- [ ] 示例数据真实可用
- [ ] 示例数据符合验证规则

---

## 步骤 5: 接口规范检查 - 验收标准

### 5.1 命名规范检查
- [ ] 命名规范检查完成
- [ ] 使用名词复数表示资源（/users 而非 /user）
- [ ] 不使用动词作为路径（无 /getUser、/createUser）
- [ ] 使用小写字母和连字符（kebab-case）
- [ ] 路径层级不超过 3 层

### 5.2 HTTP 方法使用检查
- [ ] HTTP 方法使用检查完成
- [ ] GET 用于查询操作
- [ ] POST 用于创建操作
- [ ] PUT 用于更新操作
- [ ] DELETE 用于删除操作
- [ ] PATCH 用于部分更新操作

### 5.3 HTTP 状态码使用检查
- [ ] HTTP 状态码使用检查完成
- [ ] 200 OK - 请求成功
- [ ] 201 Created - 创建成功
- [ ] 204 No Content - 删除成功
- [ ] 400 Bad Request - 参数错误
- [ ] 401 Unauthorized - 未认证
- [ ] 403 Forbidden - 无权限
- [ ] 404 Not Found - 资源不存在
- [ ] 409 Conflict - 资源冲突（如存在）
- [ ] 500 Internal Server Error - 服务器错误

### 5.4 规范检查报告
- [ ] 生成规范检查报告（符合项和待改进项）

---

## 步骤 6: 生成统计分析 - 验收标准

### 6.1 总体统计
- [ ] 总接口数量统计正确
- [ ] Controller 数量统计正确

### 6.2 按模块统计
- [ ] 按模块统计正确
- [ ] 涉及模块列表完整

### 6.3 按 HTTP 方法统计
- [ ] 按 HTTP 方法统计正确
- [ ] GET、POST、PUT、DELETE、PATCH 数量统计正确

### 6.4 按认证要求统计
- [ ] 按认证要求统计正确
- [ ] 需要认证和无需认证的接口数量统计正确

---

## 步骤 7: 输出 API 文档 - 验收标准

### 7.1 文件保存
- [ ] API 文档已输出到正确路径（`workspace/{变更ID}/docs/api/api-index.md`）
- [ ] 文件编码为 UTF-8
- [ ] 换行符格式正确（LF）

### 7.2 YAML Frontmatter
- [ ] YAML Frontmatter 完整
- [ ] 包含 title、description、created_at、updated_at、version、code_version

### 7.3 文档章节完整性
- [ ] 包含所有必需章节（概述、认证说明、统一响应格式、目录、详细清单、数据模型定义、统计、规范检查、错误码、使用建议）
- [ ] 包含概述章节（文档用途、接口统计）
- [ ] 包含认证说明章节
- [ ] 包含统一响应格式章节
- [ ] 包含接口目录索引
- [ ] 接口详细清单按模块分类
- [ ] 包含数据模型定义章节
- [ ] 包含接口统计分析
- [ ] 包含接口规范检查
- [ ] 包含错误码定义
- [ ] 包含使用建议

### 7.4 认证说明章节
- [ ] 认证说明章节包含全局认证策略和公开接口列表
- [ ] 全局认证策略已说明（如 JWT、OAuth2）
- [ ] 公开接口列表已列出（无需认证）
- [ ] 认证方式已说明（如 Authorization 请求头格式）

### 7.5 统一响应格式章节
- [ ] 统一响应格式章节包含成功、错误、分页响应格式
- [ ] 成功响应格式已说明
- [ ] 错误响应格式已说明
- [ ] 分页响应格式已说明（如存在）
- [ ] status/code 字段取值规则已说明

### 7.6 接口表格和详情
- [ ] 接口表格不包含【认证】列
- [ ] 接口详情中包含认证和权限要求说明
- [ ] 每个接口的请求/响应示例包含 DTO 属性说明（JSON 注释）

### 7.7 响应示例格式
- [ ] 响应示例使用统一响应格式（包含 status、message、data）
- [ ] 所有接口的响应示例都使用统一格式

### 7.8 数据模型定义
- [ ] 数据模型定义章节包含所有核心 DTO 类的字段表格
- [ ] 核心 DTO 类的详细字段表格已提供
- [ ] 嵌套对象的字段定义已单独列出
- [ ] 枚举类型的可选值列表已提供

### 7.9 错误码定义
- [ ] 错误码定义包含 status 字段取值规则
- [ ] 错误码列表完整
- [ ] 每个错误码包含 HTTP 状态码
- [ ] 每个错误码包含说明
- [ ] 错误码命名规范（UPPER_SNAKE_CASE）
- [ ] 错误码分类清晰（验证错误、权限错误、业务错误）

### 7.10 文档格式和质量
- [ ] 文档格式规范，易于阅读
- [ ] Markdown 格式正确
- [ ] 表格格式整齐
- [ ] 代码块语法高亮正确
- [ ] 链接有效

### 7.11 文档内容完整性
- [ ] 所有接口已包含，按模块清晰分类
- [ ] 参数和返回值已明确，包含完整示例
- [ ] 嵌套对象和枚举类型已完整展示
- [ ] HTTP 方法和完整路径已标注
- [ ] 功能说明简洁明了
- [ ] 请求参数完整（类型、必需性、默认值、验证规则）
- [ ] 返回值类型和结构清晰
- [ ] 认证和权限要求已标注

### 7.12 文档可读性
- [ ] 目录索引链接正常工作
- [ ] 章节层次清晰
- [ ] 易于快速查找
- [ ] 适合新人阅读
- [ ] 无拼写错误
- [ ] 无语法错误
- [ ] 描述清晰准确
- [ ] 术语使用一致

### 7.13 使用建议
- [ ] 提供快速查找接口的方法
- [ ] 提供前后端对齐建议
- [ ] 提供 API 测试指南
- [ ] 提供常见问题解答（可选）
- [ ] 提供文档更新建议（可选）

---

## 总体质量验收

### 完整性验证
- [ ] 所有 Controller 类已扫描（≥ 1 个）
- [ ] 所有接口方法已识别（≥ 3 个）
- [ ] 接口参数和返回值完整
- [ ] 文档已保存到正确路径

### 质量验证
- [ ] 接口按模块清晰分类（≥ 2 个模块）
- [ ] 文档格式规范，易于阅读
- [ ] 认证和权限要求已标注
- [ ] 包含完整的请求和响应示例
- [ ] DTO 属性信息完整（字段类型、必需性、验证规则）
- [ ] 嵌套对象结构清晰展示
- [ ] 枚举类型的可选值已列出

### 规范验证
- [ ] 接口命名符合 RESTful 规范
- [ ] HTTP 方法使用正确
- [ ] HTTP 状态码使用正确
- [ ] 响应格式统一

### 文档验证
- [ ] 包含接口统计分析
- [ ] 包含接口规范检查
- [ ] 包含错误码定义
- [ ] 包含数据模型定义章节（DTO 类字段表格）
- [ ] 文档包含生成时间和版本信息
- [ ] YAML Frontmatter 完整
