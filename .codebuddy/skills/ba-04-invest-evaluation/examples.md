# INVEST 评估与优先级排序 - 示例

---

## 简单案例：智能访客管理系统

### 输入材料

> 以下输入来自 ba-03 用户故事生成的输出

```
【故事ID】US001
【故事标题】填写预约基本信息
【用户故事】作为 访客，我希望 填写我的基本信息（姓名、手机号、身份证号），以便 系统能够识别我的身份并用于后续签到核验。
【功能要点】
- 输入姓名（必填，2-20个字符）
- 输入手机号（必填，11位手机号格式）
- 输入身份证号（必填，18位身份证格式）
- 系统自动校验格式正确性
【粒度评估】S - 纯表单录入，约2天工作量

【故事ID】US002
【故事标题】上传证件照片
【用户故事】作为 访客，我希望 上传我的身份证照片，以便 安保人员能够在签到时核验我的真实身份。
【功能要点】
- 支持拍照上传或从相册选择
- 支持身份证正反面上传
- 图片压缩处理（限制大小≤2MB）
- 上传进度显示
【粒度评估】S - 标准文件上传，约2天工作量

【故事ID】US003
【故事标题】搜索并选择被访人
【用户故事】作为 访客，我希望 通过姓名或工号搜索被访人，以便 准确选择我要拜访的企业员工。
【功能要点】
- 支持姓名模糊搜索
- 支持工号精确搜索
- 显示搜索结果列表（姓名、部门、工号）
- 选择被访人后显示确认信息
【粒度评估】M - 涉及搜索逻辑和员工数据查询，约3天工作量

【故事ID】US004
【故事标题】选择来访时间段
【用户故事】作为 访客，我希望 选择我的来访日期和时间段，以便 被访人能够提前安排接待。
【功能要点】
- 选择来访日期（日历选择器）
- 选择时间段（上午/下午/全天）
- 显示预计停留时长
- 支持多日访问预约
【粒度评估】S - 标准日期时间选择，约2天工作量

【故事ID】US005
【故事标题】提交预约申请
【用户故事】作为 访客，我希望 确认信息后提交预约申请，以便 被访人能够收到通知并进行审批。
【功能要点】
- 显示预约信息确认页
- 提交按钮和返回修改按钮
- 提交成功后显示预约单号
- 推送审批通知给被访人
【粒度评估】M - 涉及状态流转和通知推送，约3天工作量

【故事ID】US006
【故事标题】查看预约状态
【用户故事】作为 访客，我希望 查看我的预约审批状态，以便 了解预约是否通过以及后续签到安排。
【功能要点】
- 显示预约状态（待审批/已通过/已拒绝/已过期）
- 显示审批人和审批时间
- 通过后显示签到二维码
- 拒绝时显示拒绝原因
【粒度评估】S - 状态查询展示，约2天工作量

【故事ID】US007
【故事标题】接收预约审批通知
【用户故事】作为 被访人，我希望 收到访客预约的审批通知，以便 及时处理预约请求。
【功能要点】
- 微信/短信推送预约通知
- 通知内容包含访客姓名、来访时间、来访事由
- 点击通知跳转到审批页面
- 支持通知免打扰时段设置
【粒度评估】S - 通知推送功能，约2天工作量

【故事ID】US008
【故事标题】审批访客预约
【用户故事】作为 被访人，我希望 查看访客信息并审批预约，以便 确认是否接待该访客。
【功能要点】
- 查看访客详细信息（姓名、证件、来访事由）
- 审批操作：通过、拒绝
- 拒绝时填写原因（必填）
- 审批后自动通知访客
【粒度评估】M - 标准审批功能，约3天工作量

【故事ID】US009
【故事标题】配置自动审批规则
【用户故事】作为 被访人，我希望 配置自动审批规则，以便 常来访客无需每次手动审批。
【功能要点】
- 添加白名单访客（按手机号）
- 设置自动通过的时间范围
- 设置自动通过的来访事由类型
- 规则生效/失效开关
【粒度评估】M - 规则配置功能，约4天工作量

【故事ID】US010
【故事标题】扫码签到
【用户故事】作为 访客，我希望 在园区入口扫码签到，以便 快速完成入园登记。
【功能要点】
- 扫描预约二维码
- 显示签到成功页面
- 生成访客通行证（电子/打印）
- 记录签到时间
【粒度评估】M - 涉及二维码扫描和通行证生成，约3天工作量

【故事ID】US011
【故事标题】核验访客身份
【用户故事】作为 安保人员，我希望 核验访客的身份信息，以便 确保入园人员与预约信息一致。
【功能要点】
- 扫描访客二维码获取预约信息
- 比对访客证件与预约信息
- 确认放行或标记异常
- 记录核验结果
【粒度评估】M - 身份核验功能，约3天工作量

【故事ID】US012
【故事标题】处理异常访客
【用户故事】作为 安保人员，我希望 处理签到异常的访客，以便 确保园区安全。
【功能要点】
- 查看异常原因（超时、信息不符、黑名单）
- 联系被访人确认
- 手动放行或拒绝入园
- 记录处理结果和原因
【粒度评估】M - 异常处理流程，约4天工作量

【故事ID】US013
【故事标题】访客签退
【用户故事】作为 访客，我希望 在离开园区时签退，以便 完成本次访问记录。
【功能要点】
- 扫码签退或手动签退
- 记录签退时间
- 显示本次访问时长
- 通行证自动失效
【粒度评估】S - 简单签退操作，约2天工作量
```

### 输出示例

## 第一部分：INVEST 评估总览

| 故事ID | 故事标题 | I | N | V | E | S | T | 综合分 | 故事点 | 状态 |
|--------|---------|---|---|---|---|---|---|--------|--------|------|
| US001 | 填写预约基本信息 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 100 | 2 | 通过 |
| US002 | 上传证件照片 | ✅ | ✅ | ✅ | ✅ | ✅ | ⚠️ | 95 | 2 | 通过 |
| US003 | 搜索并选择被访人 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 95 | 3 | 通过 |
| US004 | 选择来访时间段 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 100 | 2 | 通过 |
| US005 | 提交预约申请 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ⚠️ | 90 | 3 | 通过 |
| US006 | 查看预约状态 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 95 | 2 | 通过 |
| US007 | 接收预约审批通知 | ✅ | ✅ | ✅ | ✅ | ✅ | ⚠️ | 95 | 2 | 通过 |
| US008 | 审批访客预约 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 95 | 3 | 通过 |
| US009 | 配置自动审批规则 | ✅ | ✅ | ✅ | ⚠️ | ✅ | ⚠️ | 90 | 5 | 通过 |
| US010 | 扫码签到 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 95 | 3 | 通过 |
| US011 | 核验访客身份 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 95 | 3 | 通过 |
| US012 | 处理异常访客 | ⚠️ | ✅ | ✅ | ⚠️ | ✅ | ⚠️ | 85 | 5 | 通过 |
| US013 | 访客签退 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 100 | 2 | 通过 |

**评估统计**:
- 通过（≥85分）: 13个
- 需改进（70-84分）: 0个
- 需重写（<70分）: 0个
- 故事点总计: 37点

**图例**: ✅符合要求(20分) ⚠️部分符合(15分) ❌不符合要求(5分)

## 第二部分：问题故事详细分析

> 本案例所有故事均通过评估（≥85分），以下对部分存在轻微问题的故事进行分析说明。

### US005: 提交预约申请
**综合评分**: 90分
**问题维度**: I(独立性)、T(可测试)

| 维度 | 得分 | 评估说明 |
|------|------|---------|
| I(独立性) | 15 | 依赖 US001-US004 的信息采集完成，但可 mock 数据独立开发 |
| N(可协商) | 20 | 提交流程细节可协商 |
| V(有价值) | 20 | 核心功能，预约流程的关键节点 |
| E(可估算) | 20 | 标准提交功能，工作量可估（3天） |
| S(规模适中) | 20 | M级别，适合单个迭代完成 |
| T(可测试) | 15 | 通知推送的验收标准可进一步明确 |

**评估说明**:
- 独立性：虽然依赖前置故事的数据，但可通过 mock 数据独立开发测试
- 可测试：建议补充"通知在提交后5分钟内送达"等量化标准

---

### US012: 处理异常访客
**综合评分**: 85分
**问题维度**: I(独立性)、E(可估算)、T(可测试)

| 维度 | 得分 | 评估说明 |
|------|------|---------|
| I(独立性) | 15 | 依赖 US011 核验结果产生异常记录 |
| N(可协商) | 20 | 异常处理流程可协商 |
| V(有价值) | 20 | 保障园区安全的关键功能 |
| E(可估算) | 15 | 异常场景多样，需进一步明确处理规则 |
| S(规模适中) | 20 | M级别，4天工作量合理 |
| T(可测试) | 15 | 黑名单处理的验收标准需细化 |

**评估说明**:
- 可估算：建议明确异常类型的完整列表和处理优先级
- 可测试：建议补充"黑名单访客需主管在30分钟内审批"等量化标准

---

## 第三部分：MoSCoW 优先级分类

**🔴 Must Have（必须有）- 第一优先级**

| 故事ID | 故事标题 | 故事点 | 排序理由 |
|--------|---------|--------|---------|
| US001 | 填写预约基本信息 | 2 | 核心功能，预约流程起点 |
| US003 | 搜索并选择被访人 | 3 | 核心功能，确定访问对象 |
| US005 | 提交预约申请 | 3 | 核心功能，预约流程关键节点 |
| US008 | 审批访客预约 | 3 | 核心功能，审批流程关键节点 |
| US010 | 扫码签到 | 3 | 核心功能，签到流程入口 |
| US011 | 核验访客身份 | 3 | 核心功能，安全核验关键环节 |

**Must Have 占比**: 6/13 = 46%（合理范围）
**Must Have 故事点**: 17点

**🟡 Should Have（应该有）- 第二优先级**

| 故事ID | 故事标题 | 故事点 | 排序理由 |
|--------|---------|--------|---------|
| US002 | 上传证件照片 | 2 | 增强安全核验，但非必须 |
| US004 | 选择来访时间段 | 2 | 提升用户体验，可后续迭代 |
| US006 | 查看预约状态 | 2 | 用户体验功能，MVP可简化 |
| US007 | 接收预约审批通知 | 2 | 提升审批效率，可后续优化 |
| US013 | 访客签退 | 2 | 完整流程闭环，MVP可手动处理 |

**Should Have 故事点**: 10点

**🟢 Could Have（可以有）- 第三优先级**

| 故事ID | 故事标题 | 故事点 | 排序理由 |
|--------|---------|--------|---------|
| US009 | 配置自动审批规则 | 5 | 效率提升功能，初期可手动审批 |
| US012 | 处理异常访客 | 5 | 异常场景，初期可线下处理 |

**Could Have 故事点**: 10点

**⚪ Won't Have（暂不实现）- 未来版本**

| 故事ID | 故事标题 | 故事点 | 排除理由 | 未来规划 |
|--------|---------|--------|---------|---------|
| - | - | - | 本次 MVP 无排除故事 | - |

---

## 第四部分：DoR 检查与迭代规划

**DoR 检查结果**:

| 故事ID | INVEST | AC | 依赖 | UX | 技术 | 团队 | DoR 状态 |
|--------|--------|----|----|----|----|------|---------|
| US001 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US002 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US003 | ✅ | ✅ | ⚠️ | ✅ | ✅ | ✅ | 待确认员工数据接口 |
| US004 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US005 | ✅ | ⚠️ | ✅ | ✅ | ✅ | ✅ | 待补充通知 AC |
| US006 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US007 | ✅ | ⚠️ | ⚠️ | N/A | ✅ | ✅ | 待确认推送渠道 |
| US008 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US009 | ✅ | ⚠️ | ✅ | ✅ | ✅ | ✅ | 待细化规则 AC |
| US010 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US011 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US012 | ✅ | ⚠️ | ✅ | ✅ | ✅ | ✅ | 待细化异常处理 AC |
| US013 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |

**建议迭代安排**:

| 迭代 | 故事ID | 故事点 | 预估工作量 | 累计完成度 | 关键里程碑 |
|------|--------|--------|-----------|-----------|-----------|
| Sprint 1 | US001, US003, US005, US008 | 11点 | 11天 | 30% | 预约+审批核心流程 |
| Sprint 2 | US010, US011, US002, US004 | 10点 | 10天 | 57% | 签到核验+预约增强 |
| Sprint 3 | US006, US007, US013 | 6点 | 6天 | 73% | 状态查看+通知+签退 |
| Sprint 4 | US009, US012 | 10点 | 10天 | 100% | 自动规则+异常处理 |

**依赖关系提醒**:

| 被依赖故事 | 依赖故事 | 依赖说明 |
|-----------|---------|---------|
| US001 | US005 | 提交依赖基本信息填写 |
| US003 | US005 | 提交依赖被访人选择 |
| US005 | US006 | 状态查看依赖预约提交 |
| US005 | US007 | 通知依赖预约提交 |
| US005 | US008 | 审批依赖预约提交 |
| US008 | US010 | 签到依赖审批通过 |
| US010 | US011 | 核验依赖签到 |
| US011 | US012 | 异常处理依赖核验结果 |

**风险提示**:
- **员工数据接口**：US003 依赖员工主数据系统接口，需提前确认接口规范
- **推送渠道**：US007 涉及微信/短信推送，需提前确认推送服务商
- **二维码生成**：US005/US010 涉及二维码生成和扫描，需确认技术方案

---

---

## 复杂案例：全球化员工入职管理平台 - 员工类型识别模块

### 输入材料

> 以下输入来自 ba-03 用户故事生成的输出

```
【故事ID】US-001
【故事标题】根据入职信息自动判定员工类型
【用户故事】作为 系统，我希望 根据合同类型、雇佣主体、用工方式、特殊条件4个维度自动判定员工类型，以便 减少SSC手动选择错误，提升员工类型判定准确率至99%。
【功能要点】
- 入职申请提交时，系统自动读取4维度信息
- 系统根据规则矩阵匹配对应员工类型
- 支持12种员工类型的精确判定
- 判定结果记录日志用于审计
【粒度评估】L - 涉及12种类型规则矩阵和多维度匹配逻辑，约8天工作量

【故事ID】US-002
【故事标题】查看员工类型判定结果
【用户故事】作为 新员工，我希望 查看系统判定的员工类型，以便 确认我的入职类型是否正确。
【功能要点】
- 显示判定的员工类型名称
- 显示判定依据（合同类型、雇佣主体等）
- 显示对应的入职流程说明
- 提供"类型有误"反馈入口
【粒度评估】S - 结果展示页面，约2天工作量

【故事ID】US-003
【故事标题】手动选择员工类型
【用户故事】作为 SSC专员，我希望 在系统无法自动判定时手动选择员工类型，以便 确保特殊情况下入职流程不被阻塞。
【功能要点】
- 显示待处理的判定失败列表
- 查看入职申请详细信息
- 从12种类型中手动选择
- 填写手动选择原因
【粒度评估】M - 手动兜底功能，约4天工作量

【故事ID】US-004
【故事标题】申诉员工类型判定
【用户故事】作为 新员工，我希望 对系统判定的员工类型提出申诉，以便 纠正可能的判定错误。
【功能要点】
- 发起类型申诉
- 填写申诉原因和期望类型
- 上传证明材料（可选）
- 查看申诉处理进度
【粒度评估】M - 申诉流程，约3天工作量

【故事ID】US-005
【故事标题】根据员工类型路由入职流程
【用户故事】作为 系统，我希望 根据员工类型自动路由到对应的入职流程，以便 不同类型员工按照差异化流程完成入职。
【功能要点】
- 根据员工类型加载对应流程模板
- 流程包含：信息采集、审批链、资源分配
- 支持12种员工类型的差异化流程
- 流程路由结果记录日志
【粒度评估】L - 涉及12种流程分支和流程引擎，约8天工作量

【故事ID】US-006
【故事标题】查看入职流程指引
【用户故事】作为 新员工，我希望 查看我的入职流程步骤和进度，以便 了解需要完成哪些事项以及当前进度。
【功能要点】
- 显示入职流程步骤列表
- 标识当前步骤和已完成步骤
- 显示每个步骤的预计时间
- 显示待办事项和截止时间
【粒度评估】S - 流程可视化展示，约2天工作量

【故事ID】US-007
【故事标题】配置员工类型判定规则
【用户故事】作为 COE专家，我希望 可视化配置员工类型判定规则，以便 业务规则变更时无需开发介入，快速响应政策调整。
【功能要点】
- 查看当前判定规则列表
- 新增/编辑/删除判定规则
- 规则条件配置：4维度条件组合
- 规则优先级配置
- 规则版本管理：保存草稿、发布、回滚
- 规则测试：输入条件，验证判定结果
【粒度评估】L - 规则引擎配置+版本管理，约10天工作量

【故事ID】US-008
【故事标题】查看员工类型判定日志
【用户故事】作为 SSC专员，我希望 查看员工类型判定的历史日志，以便 追溯判定过程和排查问题。
【功能要点】
- 按时间范围查询判定日志
- 按员工姓名/工号搜索
- 显示判定输入、规则匹配、判定结果
- 导出日志报表
【粒度评估】S - 日志查询功能，约2天工作量
```

### 输出示例

## 第一部分：INVEST 评估总览

| 故事ID | 故事标题 | I | N | V | E | S | T | 综合分 | 故事点 | 状态 |
|--------|---------|---|---|---|---|---|---|--------|--------|------|
| US-001 | 根据入职信息自动判定员工类型 | ⚠️ | ✅ | ✅ | ⚠️ | ❌ | ⚠️ | 70 | 13 | 需改进 |
| US-002 | 查看员工类型判定结果 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 95 | 2 | 通过 |
| US-003 | 手动选择员工类型 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 100 | 5 | 通过 |
| US-004 | 申诉员工类型判定 | ✅ | ✅ | ✅ | ✅ | ✅ | ⚠️ | 95 | 3 | 通过 |
| US-005 | 根据员工类型路由入职流程 | ⚠️ | ✅ | ✅ | ⚠️ | ❌ | ⚠️ | 70 | 13 | 需改进 |
| US-006 | 查看入职流程指引 | ⚠️ | ✅ | ✅ | ✅ | ✅ | ✅ | 95 | 2 | 通过 |
| US-007 | 配置员工类型判定规则 | ✅ | ✅ | ✅ | ⚠️ | ❌ | ⚠️ | 65 | 21 | 需拆分 |
| US-008 | 查看员工类型判定日志 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 100 | 2 | 通过 |

**评估统计**:
- 通过（≥85分）: 5个
- 需改进（70-84分）: 2个
- 需重写/拆分（<70分）: 1个
- 故事点总计: 61点（拆分后约 45点）

**图例**: ✅符合要求(20分) ⚠️部分符合(15分) ❌不符合要求(5分)

## 第二部分：问题故事详细分析

### US-001: 根据入职信息自动判定员工类型
**综合评分**: 70分
**问题维度**: I(独立性)、E(可估算)、S(规模适中)、T(可测试)

| 维度 | 得分 | 评估说明 |
|------|------|---------|
| I(独立性) | 15 | 依赖规则引擎基础设施、组织架构服务 |
| N(可协商) | 20 | 4维度规则可与业务协商调整 |
| V(有价值) | 20 | 核心功能，直接影响判定准确率 |
| E(可估算) | 15 | 12种类型规则矩阵复杂度高，需进一步评估 |
| S(规模适中) | 5 | L级别（8天），包含12种类型规则，建议拆分 |
| T(可测试) | 15 | 12种类型组合测试用例数量大，需参数化测试 |

**问题描述**:
- **规模问题**: 8天工作量偏大，包含12种员工类型的规则匹配逻辑
- **可估算问题**: 规则矩阵复杂度需进一步评估，4维度组合情况多
- **可测试问题**: 12种类型 × 多维度组合产生大量测试用例

**改进建议**:
1. 按员工类型分组拆分为3个独立故事
2. 明确规则引擎的技术选型
3. 设计参数化测试策略

**拆分后示例**:

| 故事ID | 故事标题 | 故事点 | 优先级 |
|--------|---------|--------|--------|
| US-001a | 基础类型判定（正式员工-社招/校招、实习生） | 3 | Must |
| US-001b | 外部人员类型判定（外包、派遣、返聘顾问） | 3 | Must |
| US-001c | 特殊类型判定（高管、博士后、海外、兼职、董事） | 5 | Should |

**改进后故事示例**:

```
【故事ID】US-001a
【故事标题】基础类型判定（正式员工-社招/校招、实习生）
【用户故事】作为 系统，我希望 根据合同类型和用工方式自动判定正式员工（社招/校招）和实习生类型，以便 覆盖80%的常规入职场景，减少SSC手动选择错误。
【功能要点】
- 入职申请提交时，系统读取合同类型（劳动合同/实习协议）和用工方式（全职/实习）
- 规则匹配：劳动合同+全职+社会招聘 → 正式员工-社招
- 规则匹配：劳动合同+全职+校园招聘 → 正式员工-校招
- 规则匹配：实习协议+实习 → 实习生
- 判定结果记录日志（输入条件、匹配规则、判定结果）
【验收标准】
- 正确判定正式员工-社招类型，准确率100%
- 正确判定正式员工-校招类型，准确率100%
- 正确判定实习生类型，准确率100%
- 判定日志包含完整的输入和输出信息
【粒度评估】S - 3种类型规则，约3天工作量

【故事ID】US-001b
【故事标题】外部人员类型判定（外包、派遣、返聘顾问）
【用户故事】作为 系统，我希望 根据用工方式和雇佣主体自动判定外包、派遣、返聘顾问类型，以便 确保外部人员入职流程正确路由。
【功能要点】
- 读取用工方式（外包/派遣/返聘）和雇佣主体（第三方公司/本公司）
- 规则匹配：外包+第三方公司 → 外包人员
- 规则匹配：派遣+第三方公司 → 派遣人员
- 规则匹配：返聘+本公司 → 返聘顾问
- 判定结果记录日志
【验收标准】
- 正确判定外包人员类型，准确率100%
- 正确判定派遣人员类型，准确率100%
- 正确判定返聘顾问类型，准确率100%
【粒度评估】S - 3种类型规则，约3天工作量

【故事ID】US-001c
【故事标题】特殊类型判定（高管、博士后、海外、兼职、董事）
【用户故事】作为 系统，我希望 根据特殊条件自动判定高管、博士后、海外员工、兼职、董事类型，以便 确保特殊人员入职流程正确路由。
【功能要点】
- 读取特殊条件（职级、学历、工作地点、工作时长、职务）
- 规则匹配：职级≥VP → 高管
- 规则匹配：博士后站+博士学历 → 博士后
- 规则匹配：工作地点=海外 → 海外员工
- 规则匹配：工作时长<标准工时 → 兼职
- 规则匹配：职务=董事 → 董事
- 特殊条件优先级：董事 > 高管 > 海外 > 博士后 > 兼职
【验收标准】
- 正确判定5种特殊类型，准确率100%
- 多条件匹配时按优先级判定
- 无法匹配时标记为"待人工判定"
【粒度评估】M - 5种类型规则+优先级逻辑，约5天工作量
```

---

### US-005: 根据员工类型路由入职流程
**综合评分**: 70分
**问题维度**: I(独立性)、E(可估算)、S(规模适中)、T(可测试)

| 维度 | 得分 | 评估说明 |
|------|------|---------|
| I(独立性) | 15 | 依赖 US-001 员工类型判定结果 |
| N(可协商) | 20 | 流程差异化规则可协商 |
| V(有价值) | 20 | 核心功能，确保差异化入职体验 |
| E(可估算) | 15 | 12种流程分支复杂度高，需进一步评估 |
| S(规模适中) | 5 | L级别（8天），包含12种流程分支，建议拆分 |
| T(可测试) | 15 | 12种流程路由的验收标准需细化 |

**问题描述**:
- **规模问题**: 8天工作量偏大，包含12种员工类型的差异化流程
- **独立性问题**: 强依赖 US-001 的类型判定结果
- **可测试问题**: 每种流程的验收标准需明确

**改进建议**:
1. 按流程复杂度拆分为3个独立故事
2. 与 US-001 拆分策略对齐，便于并行开发
3. 为每种流程类型定义验收标准

**拆分后示例**:

| 故事ID | 故事标题 | 故事点 | 优先级 |
|--------|---------|--------|--------|
| US-005a | 标准流程路由（正式员工-社招/校招） | 3 | Must |
| US-005b | 简化流程路由（实习生、兼职） | 2 | Must |
| US-005c | 特殊流程路由（高管、海外、外包、派遣） | 5 | Should |

**改进后故事示例**:

```
【故事ID】US-005a
【故事标题】标准流程路由（正式员工-社招/校招）
【用户故事】作为 系统，我希望 根据正式员工类型（社招/校招）自动路由到标准入职流程，以便 正式员工按照完整流程完成入职。
【功能要点】
- 识别员工类型为"正式员工-社招"或"正式员工-校招"
- 加载标准入职流程模板（7步骤）
- 流程步骤：信息采集→背调→合同签署→部门审批→IT资源→工位分配→入职培训
- 社招/校招差异：校招增加"导师分配"步骤
- 路由结果记录日志
【验收标准】
- 正式员工-社招正确路由到7步标准流程
- 正式员工-校招正确路由到8步标准流程（含导师分配）
- 流程步骤按顺序展示，无遗漏
【粒度评估】S - 2种类型流程路由，约3天工作量

【故事ID】US-005b
【故事标题】简化流程路由（实习生、兼职）
【用户故事】作为 系统，我希望 根据实习生/兼职类型自动路由到简化入职流程，以便 非全职人员快速完成入职。
【功能要点】
- 识别员工类型为"实习生"或"兼职"
- 加载简化入职流程模板（4步骤）
- 流程步骤：信息采集→部门审批→IT资源→入职培训
- 跳过背调、合同签署（改为实习协议/兼职协议）、工位分配
- 路由结果记录日志
【验收标准】
- 实习生正确路由到4步简化流程
- 兼职正确路由到4步简化流程
- 简化流程平均完成时间≤2天
【粒度评估】S - 2种类型简化流程，约2天工作量

【故事ID】US-005c
【故事标题】特殊流程路由（高管、海外、外包、派遣）
【用户故事】作为 系统，我希望 根据特殊员工类型自动路由到差异化入职流程，以便 特殊人员按照定制流程完成入职。
【功能要点】
- 识别员工类型为"高管/海外员工/外包/派遣"
- 高管流程：增加"高管审批"+"行政特殊安排"步骤
- 海外流程：增加"签证办理"+"海外HR对接"步骤
- 外包/派遣流程：简化为"第三方公司确认"+"权限开通"
- 路由结果记录日志
【验收标准】
- 高管正确路由到9步高管流程
- 海外员工正确路由到9步海外流程
- 外包/派遣正确路由到3步简化流程
【粒度评估】M - 4种类型差异化流程，约5天工作量
```

---

### US-007: 配置员工类型判定规则
**综合评分**: 65分
**问题维度**: E(可估算)、S(规模适中)、T(可测试)

| 维度 | 得分 | 评估说明 |
|------|------|---------|
| I(独立性) | 20 | 可独立开发，不依赖其他故事 |
| N(可协商) | 20 | 配置功能范围可协商 |
| V(有价值) | 20 | 减少开发依赖，提升业务响应速度 |
| E(可估算) | 15 | 规则引擎+可视化配置+版本管理，复杂度高 |
| S(规模适中) | 5 | L级别（10天），必须拆分 |
| T(可测试) | 15 | 规则配置的验收标准需细化 |

**问题描述**:
- **规模问题**: 10天工作量过大，包含规则CRUD+条件配置+版本管理+测试功能
- **可估算问题**: 可视化规则配置器的复杂度需进一步评估
- **可测试问题**: "规则测试"功能的成功标准不明确

**改进建议**:
1. 拆分为4个独立故事
2. 明确可视化配置器的技术选型
3. 补充规则测试功能的验收标准

**拆分后示例**:

| 故事ID | 故事标题 | 故事点 | 优先级 |
|--------|---------|--------|--------|
| US-007a | 规则列表与查看 | 2 | Must |
| US-007b | 规则条件配置（4维度） | 5 | Must |
| US-007c | 规则版本管理（草稿/发布/回滚） | 3 | Should |
| US-007d | 规则测试功能 | 3 | Could |

**改进后故事示例**:

```
【故事ID】US-007a
【故事标题】规则列表与查看
【用户故事】作为 COE专家，我希望 查看当前所有员工类型判定规则，以便 了解现有规则配置和判定逻辑。
【功能要点】
- 显示规则列表（规则名称、员工类型、状态、更新时间）
- 支持按员工类型筛选
- 支持按状态筛选（草稿/已发布/已停用）
- 点击规则查看详细条件配置
【验收标准】
- 规则列表正确显示所有12种员工类型的规则
- 筛选功能正常工作
- 规则详情页显示完整的4维度条件
【粒度评估】S - 列表查询功能，约2天工作量

【故事ID】US-007b
【故事标题】规则条件配置（4维度）
【用户故事】作为 COE专家，我希望 可视化配置员工类型判定的4维度条件，以便 业务规则变更时无需开发介入。
【功能要点】
- 新增规则：选择目标员工类型
- 配置4维度条件：合同类型（下拉）、雇佣主体（下拉）、用工方式（下拉）、特殊条件（多选）
- 条件组合：支持 AND/OR 逻辑组合
- 规则优先级：拖拽调整优先级顺序
- 保存为草稿
【验收标准】
- 成功创建新规则并保存为草稿
- 4维度条件配置正确保存
- 条件组合逻辑正确（AND/OR）
- 优先级调整后正确保存
【粒度评估】M - 可视化配置器，约5天工作量

【故事ID】US-007c
【故事标题】规则版本管理（草稿/发布/回滚）
【用户故事】作为 COE专家，我希望 管理规则的版本（草稿/发布/回滚），以便 安全地发布规则变更并在出问题时快速回滚。
【功能要点】
- 发布草稿：草稿规则发布为正式版本
- 版本历史：查看规则的历史版本列表
- 版本对比：对比两个版本的差异
- 回滚操作：选择历史版本进行回滚
- 发布审批：发布前需主管审批（可配置）
【验收标准】
- 草稿发布后立即生效
- 版本历史保留最近10个版本
- 回滚操作在1分钟内生效
- 发布审批流程正常工作
【粒度评估】S - 版本管理功能，约3天工作量

【故事ID】US-007d
【故事标题】规则测试功能
【用户故事】作为 COE专家，我希望 在发布前测试规则配置的判定结果，以便 确保规则变更不会导致判定错误。
【功能要点】
- 输入测试条件：4维度条件值
- 执行测试：显示匹配的规则和判定结果
- 批量测试：上传测试用例文件（Excel）
- 测试报告：显示测试通过率和失败用例
【验收标准】
- 单条测试在1秒内返回结果
- 批量测试支持最多100条用例
- 测试报告显示每条用例的判定结果
- 失败用例显示期望结果与实际结果对比
【粒度评估】S - 测试功能，约3天工作量
```

---

## 第三部分：MoSCoW 优先级分类

### 企业级优先级考量因素

| 考量因素 | 说明 |
|---------|------|
| 业务价值 | 对入职效率、判定准确率的影响 |
| 技术依赖 | 是否阻塞其他功能开发 |
| 合规要求 | 是否涉及劳动法、数据合规 |
| 风险等级 | 实现风险、集成风险 |

**🔴 Must Have（必须有）- 第一优先级**

| 故事ID | 故事标题 | 故事点 | 排序理由 |
|--------|---------|--------|---------|
| US-001a | 基础类型判定（正式员工、实习生） | 3 | 核心功能，覆盖80%入职场景 |
| US-001b | 外部人员类型判定（外包、派遣） | 3 | 核心功能，外部人员入职必需 |
| US-003 | 手动选择员工类型 | 5 | 兜底机制，确保流程不阻塞 |
| US-005a | 标准流程路由（正式员工） | 3 | 核心功能，正式员工入职必需 |
| US-005b | 简化流程路由（实习生、兼职） | 2 | 核心功能，实习生入职必需 |
| US-007a | 规则列表与查看 | 2 | 规则可见性，COE基础操作 |
| US-007b | 规则条件配置 | 5 | 规则可配置，减少开发依赖 |

**Must Have 占比**: 7/14 = 50%（合理范围）
**Must Have 故事点**: 23点

**🟡 Should Have（应该有）- 第二优先级**

| 故事ID | 故事标题 | 故事点 | 排序理由 |
|--------|---------|--------|---------|
| US-001c | 特殊类型判定（高管、海外等） | 5 | 增强功能，特殊类型占比较小 |
| US-002 | 查看员工类型判定结果 | 2 | 用户体验，新员工自助确认 |
| US-005c | 特殊流程路由（高管、海外等） | 5 | 增强功能，特殊流程可后续迭代 |
| US-006 | 查看入职流程指引 | 2 | 用户体验，新员工自助查看 |
| US-007c | 规则版本管理 | 3 | 增强功能，初期可无版本管理 |

**Should Have 故事点**: 17点

**🟢 Could Have（可以有）- 第三优先级**

| 故事ID | 故事标题 | 故事点 | 排序理由 |
|--------|---------|--------|---------|
| US-004 | 申诉员工类型判定 | 3 | 增强功能，初期可线下处理 |
| US-007d | 规则测试功能 | 3 | 增强功能，初期可手动验证 |
| US-008 | 查看员工类型判定日志 | 2 | 审计功能，初期可数据库查询 |

**Could Have 故事点**: 8点

**⚪ Won't Have（暂不实现）- 未来版本**

| 故事ID | 故事标题 | 故事点 | 排除理由 | 未来规划 |
|--------|---------|--------|---------|---------|
| - | - | - | 本次 MVP 无排除故事 | - |

---

## 第四部分：DoR 检查与迭代规划

**DoR 检查结果**:

| 故事ID | INVEST | AC | 依赖 | UX | 技术 | 团队 | DoR 状态 |
|--------|--------|----|----|----|----|------|---------|
| US-001a | ✅ | ⚠️ | ⚠️ | N/A | ⚠️ | ✅ | 待确认规则引擎 |
| US-001b | ✅ | ⚠️ | ⚠️ | N/A | ⚠️ | ✅ | 待确认规则引擎 |
| US-001c | ✅ | ⚠️ | ⚠️ | N/A | ⚠️ | ✅ | 待确认规则引擎 |
| US-002 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US-003 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US-004 | ✅ | ⚠️ | ✅ | ✅ | ✅ | ✅ | 待细化申诉 AC |
| US-005a | ✅ | ⚠️ | ⚠️ | N/A | ⚠️ | ✅ | 待确认流程引擎 |
| US-005b | ✅ | ⚠️ | ⚠️ | N/A | ⚠️ | ✅ | 待确认流程引擎 |
| US-005c | ✅ | ⚠️ | ⚠️ | N/A | ⚠️ | ✅ | 待确认流程引擎 |
| US-006 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US-007a | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US-007b | ✅ | ⚠️ | ✅ | ⚠️ | ⚠️ | ✅ | 待确认配置器方案 |
| US-007c | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |
| US-007d | ✅ | ⚠️ | ✅ | ✅ | ✅ | ✅ | 待细化测试 AC |
| US-008 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | Ready |

**建议迭代安排**:

| 迭代 | 故事ID | 故事点 | 预估工作量 | 累计完成度 | 关键里程碑 |
|------|--------|--------|-----------|-----------|-----------|
| Sprint 1 | US-001a, US-001b, US-003 | 11点 | 11天 | 23% | 基础类型判定+兜底 |
| Sprint 2 | US-005a, US-005b, US-007a | 7点 | 7天 | 38% | 标准流程路由+规则查看 |
| Sprint 3 | US-007b, US-002, US-006 | 9点 | 9天 | 56% | 规则配置+结果展示 |
| Sprint 4 | US-001c, US-005c | 10点 | 10天 | 77% | 特殊类型+特殊流程 |
| Sprint 5 | US-007c, US-004, US-007d, US-008 | 11点 | 11天 | 100% | 版本管理+申诉+日志 |

**依赖关系提醒**:

| 被依赖故事 | 依赖故事 | 依赖说明 |
|-----------|---------|---------|
| US-001a | US-005a | 流程路由依赖类型判定 |
| US-001b | US-005c | 外部人员流程依赖类型判定 |
| US-001c | US-005c | 特殊类型流程依赖类型判定 |
| US-001a/b/c | US-002 | 结果展示依赖类型判定 |
| US-001a/b/c | US-004 | 申诉依赖类型判定 |
| US-007a | US-007b | 条件配置依赖规则列表 |
| US-007b | US-007c | 版本管理依赖规则存在 |
| US-007b | US-007d | 规则测试依赖规则配置 |

**风险提示**:
- **规则引擎技术选型**：US-001 系列依赖规则引擎，需提前评估（Drools/Easy Rules/自研）
- **流程引擎技术选型**：US-005 系列依赖流程引擎，需提前评估（Camunda/Flowable/自研）
- **12种员工类型规则收集**：需与各BG COE 提前确认规则细节
- **可视化规则配置器**：US-007b 技术复杂度高，建议技术预研

**跨团队协调**:

| 协调事项 | 相关团队 | 时间节点 |
|---------|---------|---------|
| 规则引擎技术选型 | 架构组、平台组 | Sprint 1 前 |
| 流程引擎技术选型 | 架构组、平台组 | Sprint 2 前 |
| 12种员工类型规则确认 | 各BG COE | Sprint 1 前 |
| 可视化配置器技术预研 | 前端架构组 | Sprint 2 前 |
