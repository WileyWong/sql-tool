# INVEST 原则参考指南

## INVEST 原则详解

### I - Independent（独立性）

**定义**：用户故事应该尽可能独立，可以独立开发、测试和交付。

**评估标准**：
| 分数 | 标准 | 示例 |
|------|------|------|
| 20分 | 完全独立，无任何依赖 | 独立的查询功能 |
| 15分 | 弱依赖，可并行开发 | 依赖公共组件，但可 mock |
| 10分 | 中等依赖，需协调 | 依赖另一个故事的接口 |
| 5分 | 强依赖，必须顺序开发 | 必须等另一个故事完成 |
| 0分 | 完全依赖，无法独立 | 与另一个故事强耦合 |

**改进方法**：
- 识别依赖关系，考虑是否可以解耦
- 使用 mock 或 stub 降低依赖
- 重新划分故事边界

---

### N - Negotiable（可协商）

**定义**：用户故事的细节应该是可协商的，不是固定的合同条款。

**评估标准**：
| 分数 | 标准 | 示例 |
|------|------|------|
| 20分 | 高度灵活，细节可调整 | "展示订单列表" |
| 15分 | 大部分可调整 | 有建议的排序方式，但可改 |
| 10分 | 部分固定 | 必须显示特定字段 |
| 5分 | 大部分固定 | 格式和内容都有严格要求 |
| 0分 | 完全固定 | 法规要求，不可更改 |

**改进方法**：
- 区分"必须实现"与"建议实现"的细节
- 将固定需求（如法规要求）单独标注，其他细节保持灵活
- 用"例如"替代"必须"来描述实现细节
- 与产品经理确认哪些是核心需求，哪些可以协商

---

### V - Valuable（有价值）

**定义**：用户故事必须对用户或业务有明确的价值。

**评估标准**：
| 分数 | 标准 | 示例 |
|------|------|------|
| 20分 | 价值量化明确 | "减少处理时间50%" |
| 15分 | 价值清晰 | "提升用户体验" |
| 10分 | 价值模糊 | "优化系统" |
| 5分 | 价值不明 | 纯技术任务 |
| 0分 | 无价值 | 无法说明为什么需要 |

**改进方法**：
- 补充"以便"部分，明确业务价值
- 与业务方确认价值点
- 考虑是否可以合并到其他故事

---

### E - Estimable（可估算）

**定义**：团队应该能够估算用户故事的工作量。

**评估标准**：
| 分数 | 标准 | 示例 |
|------|------|------|
| 20分 | 可准确估算 | 类似功能做过，很清楚 |
| 15分 | 大致估算 | 有参考，误差在20%内 |
| 10分 | 需澄清后估算 | 有些细节不清楚 |
| 5分 | 难以估算 | 技术方案不明确 |
| 0分 | 无法估算 | 完全未知领域 |

**改进方法**：
- 拆分为更小的故事
- 进行技术调研（Spike）
- 补充技术细节

---

### S - Small（小粒度）

**定义**：用户故事应该足够小，可以在一个迭代内完成。

**评估标准**：
| 分数 | 标准 | 工作量 |
|------|------|--------|
| 20分 | 理想粒度 | 1-3天 |
| 15分 | 可接受 | 3-5天 |
| 10分 | 偏大 | 5-8天 |
| 5分 | 过大 | 8-10天 |
| 0分 | 必须拆分 | >10天 |

**改进方法**：
- 按业务规则拆分
- 按数据变体拆分
- 按操作类型拆分

---

### T - Testable（可测试）

**定义**：用户故事必须有明确的验收标准，可以验证是否完成。

**评估标准**：
| 分数 | 标准 | 示例 |
|------|------|------|
| 20分 | AC 完整清晰 | Given-When-Then 完整 |
| 15分 | AC 基本完整 | 有主要场景，缺少边界 |
| 10分 | AC 模糊 | 只有大概描述 |
| 5分 | AC 缺失 | 没有验收标准 |
| 0分 | 无法测试 | 主观性描述 |

**改进方法**：
- 补充 Given-When-Then 验收标准
- 明确边界条件和异常场景
- 量化预期结果

---

## MoSCoW 优先级方法

| 优先级 | 含义 | 占比建议 |
|--------|------|----------|
| **Must Have** | 必须有，没有则项目失败 | ≤60% |
| **Should Have** | 应该有，重要但非致命 | 20-30% |
| **Could Have** | 可以有，锦上添花 | 10-20% |
| **Won't Have** | 暂不做，未来版本考虑 | 标记即可 |

## 综合评分说明

- **≥85分**：通过，可进入开发
- **70-84分**：需改进，修正后再评估
- **<70分**：需重写，问题较多

---

## 故事点估算指南

### Fibonacci 故事点参考

| 故事点 | 复杂度 | 不确定性 | 工作量参考 | 典型场景 |
|--------|--------|----------|-----------|----------|
| 1 | 低 | 低 | 半天 | 简单配置、文案修改 |
| 2 | 低 | 低 | 1天 | 简单 CRUD、表单验证 |
| 3 | 中 | 低 | 2天 | 标准表单、简单查询 |
| 5 | 中 | 中 | 3-4天 | 复杂业务逻辑、多条件查询 |
| 8 | 高 | 中 | 5-7天 | 跨模块功能、复杂计算 |
| 13 | 高 | 高 | 8-10天 | 需拆分，跨系统集成 |
| 21+ | 极高 | 极高 | >10天 | 必须拆分为多个故事 |

### 估算原则

| 原则 | 说明 |
|------|------|
| **相对估算** | 使用团队已完成的故事作为基准，进行相对比较 |
| **三维度考量** | 综合考虑复杂度、不确定性、工作量 |
| **团队共识** | 通过 Planning Poker 等方式达成团队共识 |
| **拆分阈值** | 超过 13 点的故事应拆分为多个小故事 |

### 常见估算误区

| 误区 | 正确做法 |
|------|---------|
| 只考虑工作量 | 同时考虑复杂度和不确定性 |
| 个人估算 | 团队共同估算，取共识值 |
| 精确到小时 | 使用 Fibonacci 数列，接受模糊性 |
| 忽略测试时间 | 包含开发、测试、联调的完整时间 |

---

## DoR（Definition of Ready）检查清单

故事进入开发前，必须满足以下条件：

### 检查项说明

| 检查项 | 状态 | 说明 | 责任人 |
|--------|------|------|--------|
| INVEST 评估通过（≥85分） | ✅/❌ | 六维度评估全部通过 | BA/PO |
| 验收标准已定义 | ✅/❌ | 至少 3 条 GWT 格式的 AC | BA |
| 依赖已识别并解决 | ✅/❌ | 无阻塞性依赖或已有解决方案 | Tech Lead |
| UX 设计已完成（如需要） | ✅/❌ | 界面原型已确认 | UX Designer |
| 技术方案已评审 | ✅/❌ | Tech Lead 已确认可行性 | Tech Lead |
| 团队已理解并估算 | ✅/❌ | 团队成员无重大疑问 | Scrum Master |
| 测试策略已明确 | ✅/❌ | 测试类型和方法已确定 | QA |

### DoR 状态判定

| 状态 | 条件 | 说明 |
|------|------|------|
| **Ready** | 全部 ✅ | 可进入 Sprint Backlog |
| **Almost Ready** | 1-2 项 ⚠️ | 需在 Sprint 开始前解决 |
| **Not Ready** | 3+ 项 ❌ | 不可进入 Sprint，需继续完善 |

### 常见阻塞项及解决方案

| 阻塞项 | 解决方案 |
|--------|---------|
| AC 未定义 | 安排 BA 与 PO 澄清会议 |
| 技术方案不明 | 安排技术 Spike |
| UX 设计未完成 | 协调 UX 资源，或先开发后端 |
| 依赖未解决 | 调整故事顺序或拆分依赖 |

---

## 优先级排序考量因素

### 业务维度

| 因素 | 高优先级特征 | 低优先级特征 |
|------|-------------|-------------|
| 业务价值 | 直接产生收入或降低成本 | 间接价值或锦上添花 |
| 用户使用频率 | 每日使用的核心功能 | 偶尔使用的辅助功能 |
| 紧急程度 | 有明确的截止日期 | 无时间压力 |
| 干系人关注度 | 高层或关键客户关注 | 一般用户需求 |

### 技术维度

| 因素 | 高优先级特征 | 低优先级特征 |
|------|-------------|-------------|
| 技术复杂度 | 简单明确，风险低 | 复杂度高，需要探索 |
| 技术依赖关系 | 被其他故事依赖 | 依赖其他故事 |
| 技术风险 | 使用成熟技术 | 需要新技术或 POC |
| 开发成本 | 投入产出比高 | 成本高但价值有限 |

### 策略维度

| 因素 | 高优先级特征 | 低优先级特征 |
|------|-------------|-------------|
| 市场竞争 | 竞争对手已有，必须跟进 | 差异化功能，可延后 |
| 合规性要求 | 法规强制要求 | 建议性规范 |
| 战略一致性 | 与公司战略高度一致 | 与战略关联度低 |

### 优先级决策矩阵

| 业务价值 | 技术复杂度 | 建议优先级 |
|---------|-----------|-----------|
| 高 | 低 | **Must Have** - 快速交付高价值 |
| 高 | 高 | **Must Have** - 需早期投入 |
| 低 | 低 | **Could Have** - 有空再做 |
| 低 | 高 | **Won't Have** - 投入产出比低 |

---

## 图例说明

| 图例 | 含义 | 适用场景 |
|------|------|---------|
| ✅ | 符合要求 | INVEST 评分 ≥15，DoR 检查通过 |
| ⚠️ | 部分符合，需改进 | INVEST 评分 10-14，DoR 有待完善项 |
| ❌ | 不符合要求 | INVEST 评分 <10，DoR 检查未通过 |
