---
name: ba-04-evaluating-invest
description: 对用户故事进行 INVEST 原则评估和 MoSCoW 优先级排序，识别质量问题并提出改进建议，支持迭代规划决策。触发词：INVEST 评估、故事评估、优先级排序、故事质量检查、需求评审、MoSCoW 排序。
---

# INVEST评估与优先级排序

对用户故事进行全面的 INVEST 原则评估，识别质量问题并提出改进建议，同时按 MoSCoW 方法进行优先级排序。

## 工作流位置

```
ba-01 业务需求提取
    ↓ 输出：业务目标、顶层用例、非功能需求
ba-02 Epic 分析
    ↓ 输出：拆解策略、用户角色分析、MVP 定义
ba-03 用户故事生成
    ↓ 输出：用户故事列表
ba-04 INVEST 评估 ← 当前技能
    ↓ 输出：评估报告、优先级排序
ba-05 验收标准
```

**上游依赖**: ba-03 输出的用户故事列表
**下游使用**: ba-05 将为高优先级（Must Have）故事编写验收标准

## 输入材料

```
【故事ID】US001
【故事标题】
【用户故事】作为...我希望...以便...
【功能要点】
- 
- 

【故事ID】US002
...

【项目约束（可选）】
- 时间约束：
- 技术约束：
- 资源约束：

【业务优先级指引（可选）】
- 核心业务流程：
- 关键干系人关注点：

【技术依赖说明（可选）】
- 
```

## 核心输出

### 第一部分：INVEST评估总览

| 故事ID | 故事标题 | I | N | V | E | S | T | 综合分 | 故事点 | 状态 |
|--------|---------|---|---|---|---|---|---|--------|--------|------|
| US001 | {标题} | ✅ | ✅ | ✅ | ✅ | ✅ | ⚠️ | 85 | 5 | 需改进 |
| US002 | {标题} | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | 95 | 3 | 通过 |

**评估统计**:
- 通过（≥85分）: {n}个
- 需改进（70-84分）: {n}个
- 需重写（<70分）: {n}个
- 故事点总计: {n}点

**图例**: ✅符合要求 ⚠️部分符合，需改进 ❌不符合要求

### 第二部分：问题故事详细分析

```markdown
### US003: {故事标题}
**综合评分**: 70分
**问题维度**: I(独立性)、E(可估算)

**问题描述**:
- **独立性问题**: {具体描述为什么不独立}
- **可估算问题**: {具体描述为什么难以估算}

**改进建议**:
1. {具体改进建议1}
2. {具体改进建议2}

**改进后示例**:
> 作为 {角色}，
> 我希望 {改进后的功能描述}，
> 以便 {业务价值}。
```

### 第三部分：MoSCoW优先级分类

**🔴 Must Have（必须有）- 第一优先级**

| 故事ID | 故事标题 | 排序理由 |
|--------|---------|---------|
| US001 | {标题} | {为什么是Must Have} |

**Must Have占比**: {n}/{total} = {百分比}%

**🟡 Should Have（应该有）- 第二优先级**

| 故事ID | 故事标题 | 排序理由 |
|--------|---------|---------|

**🟢 Could Have（可以有）- 第三优先级**

| 故事ID | 故事标题 | 排序理由 |
|--------|---------|---------|

**⚪ Won't Have（暂不实现）- 未来版本**

| 故事ID | 故事标题 | 排除理由 | 未来规划 |
|--------|---------|---------|---------|

### 第四部分：DoR 检查与迭代规划

**DoR 检查结果**:

| 故事ID | INVEST | AC | 依赖 | UX | 技术 | 团队 | DoR 状态 |
|--------|--------|----|----|----|----|------|---------|
| US001 | ✅ | ✅ | ✅ | N/A | ✅ | ✅ | Ready |
| US002 | ✅ | ⚠️ | ✅ | ✅ | ✅ | ✅ | 待 AC |

**建议迭代安排**:

| 迭代 | 故事ID | 故事点 | 预估工作量 | 累计完成度 |
|------|--------|--------|-----------|-----------|
| Sprint 1 | US001, US002, US003 | {n}点 | {n}天 | {百分比}% |

**依赖关系提醒**:

| 被依赖故事 | 依赖故事 | 依赖说明 |
|-----------|---------|---------|
| US001 | US005, US006 | {依赖原因} |

**风险提示**:
- {风险1及建议}
- {风险2及建议}

## INVEST 评估标准（量化评分）

| 维度 | 20分 | 15分 | 10分 | 5分 | 0分 |
|------|------|------|------|-----|-----|
| **I** 独立性 | 完全独立 | 弱依赖可并行 | 中等依赖 | 强依赖 | 完全依赖 |
| **N** 可协商 | 高度灵活 | 大部分可调 | 部分固定 | 大部分固定 | 完全固定 |
| **V** 有价值 | 价值量化明确 | 价值清晰 | 价值模糊 | 价值不明 | 无价值 |
| **E** 可估算 | 可准确估算 | 大致估算 | 需澄清后估算 | 难以估算 | 无法估算 |
| **S** 小粒度 | 1-3天 | 3-5天 | 5-8天 | 8-10天 | >10天 |
| **T** 可测试 | AC 完整清晰 | AC 基本完整 | AC 模糊 | AC 缺失 | 无法测试 |

**综合评分说明**：
- ≥85分：通过，可进入开发
- 70-84分：需改进，修正后再评估
- <70分：需重写，问题较多

## 故事点估算指南

**Fibonacci 故事点参考**：

| 故事点 | 复杂度 | 不确定性 | 工作量参考 | 典型场景 |
|--------|--------|----------|-----------|----------|
| 1 | 低 | 低 | 半天 | 简单配置、文案修改 |
| 2 | 低 | 低 | 1天 | 简单 CRUD、表单验证 |
| 3 | 中 | 低 | 2天 | 标准表单、简单查询 |
| 5 | 中 | 中 | 3-4天 | 复杂业务逻辑、多条件查询 |
| 8 | 高 | 中 | 5-7天 | 跨模块功能、复杂计算 |
| 13 | 高 | 高 | 8-10天 | 需拆分，跨系统集成 |
| 21+ | 极高 | 极高 | >10天 | 必须拆分为多个故事 |

**估算原则**：
- 使用相对估算，以团队已完成的故事作为基准
- 考虑复杂度、不确定性、工作量三个维度
- 超过 13 点的故事应拆分

## DoR（Definition of Ready）检查清单

故事进入开发前，必须满足以下条件：

| 检查项 | 状态 | 说明 |
|--------|------|------|
| INVEST 评估通过（≥85分） | ✅/❌ | 六维度评估全部通过 |
| 验收标准已定义 | ✅/❌ | 至少 3 条 GWT 格式的 AC |
| 依赖已识别并解决 | ✅/❌ | 无阻塞性依赖或已有解决方案 |
| UX 设计已完成（如需要） | ✅/❌ | 界面原型已确认 |
| 技术方案已评审 | ✅/❌ | Tech Lead 已确认可行性 |
| 团队已理解并估算 | ✅/❌ | 团队成员无重大疑问 |
| 测试策略已明确 | ✅/❌ | 测试类型和方法已确定 |

## 优先级排序考量因素

**业务维度**:
- 业务价值高低
- 用户使用频率
- 紧急程度
- 干系人关注度

**技术维度**:
- 技术复杂度
- 技术依赖关系
- 技术风险
- 开发成本

**策略维度**:
- 市场竞争需要
- 合规性要求
- 战略一致性

## 质量要求

### 评估客观性（强制）
- 每个维度评估有具体依据，不是主观判断
- 评分标准一致，同类问题扣分相同
- 问题描述具体，指出具体是什么问题

### 建议可行性（强制）
- 改进建议具体可执行，不是空泛的"需要改进"
- 提供改进后的故事示例
- 考虑改进的成本和收益

### 优先级合理性（强制）
- 每个优先级分类有明确的排序理由
- Must Have占比不超过60%
- 考虑业务价值、技术依赖、风险等多维度

## 常见评估错误

❌ **错误1**: 评估过于主观
```
错误：这个故事写得不好
正确：这个故事独立性不足，因为它依赖US003的用户认证功能完成后才能开发
```

❌ **错误2**: Must Have过多
```
错误：80%的故事都是Must Have
正确：Must Have应控制在60%以内
```

❌ **错误3**: 改进建议空泛
```
错误：需要改进故事的可测试性
正确：建议增加验收标准，例如"当用户输入正确订单号时，系统在3秒内返回订单状态"
```

## 成功标准

- ✅ 每个故事都有完整的INVEST六维度评估
- ✅ 评估结果客观准确，有评分依据
- ✅ 问题故事有具体可行的改进建议
- ✅ 优先级分类合理，理由充分
- ✅ Must Have故事占比不超过60%

## 质量验证循环

完成初稿后，执行以下验证：

1. **评分一致性检查**：同类问题是否扣分相同？
2. **改进可行性检查**：改进建议是否具体可执行？
3. **优先级合理性检查**：Must Have 占比是否超过 60%？

**验证→修正→重复**：如发现问题，修正后重新检查，只有全部通过才输出最终文档。

## 详细参考

- **完整示例**: 见 [examples.md](examples.md)
- **INVEST 原则详解**: 见 [reference.md](reference.md)

## 输出格式

直接输出完整的评估报告，包含4个部分。不要有任何前言或解释。

## 技术协作接口

本技能输出需与以下角色协作确认：

| 协作角色 | 协作内容 | 协作时机 |
|---------|---------|---------|
| Tech Lead | 故事点估算确认、技术风险评估 | 评估完成后 |
| Scrum Master | 迭代规划确认、团队容量评估 | 迭代规划前 |
| 产品经理 | 优先级确认、业务价值评估 | MoSCoW 分类后 |
| 测试团队 | 测试复杂度评估、测试资源规划 | DoR 检查时 |

## 📝 版本历史

- **v1.0** (2025-12-17): 初始版本
  - INVEST 六维度量化评估
  - MoSCoW 优先级分类
  - Fibonacci 故事点估算指南
  - DoR 检查清单

---

**作者**: johnsonyang
