# Skill: discovering-project-insights
**项目洞察挖掘 - 结构化项目诊断和规划**

## 🎯 目的

使用 CodeBuddy 内置工具进行**结构化项目诊断**，快速发现潜在问题、需求缺陷、技术债，生成可执行的改进方案和演进规划。

## 📚 文档结构

```
discovering-project-insights/
├── SKILL.md                           # 技能核心内容
├── tools-integration-guide.md         # 工具使用指南
├── examples.md                        # 3 个真实诊断案例
├── README.md                          # 本文件
├── templates/
│   ├── diagnostic-report-template.md  # 诊断报告模板
│   └── diagnostic-questionnaire.md    # 诊断问卷
├── scripts/
│   ├── quick-scan.sh                  # 快速扫描脚本
│   ├── quality-metrics.sh             # 质量指标收集
│   └── dependency-audit.sh            # 依赖审计
└── reference.md                       # 参考资料和工具对照表
```

## 🚀 快速开始

### 方式 1: 快速体检 (30 分钟)

适合: 新项目、融资前审查、定期检查

```
目标: 快速了解项目状态，发现 P0 问题

步骤:
1. 使用 Task (Explore Agent) 快速扫描架构
2. 运行 scripts/quality-metrics.sh 获取质量指标
3. 使用 Grep 搜索常见风险
4. 使用 TodoWrite 组织问题
5. 生成 1 页摘要报告

输出: 核心问题清单 (5-10 个) + 优先级 + 改进建议
```

### 方式 2: 标准诊断 (2-4 小时)

适合: 季度评估、改进规划、成熟项目

```
目标: 全面诊断，生成改进方案

步骤:
1. 采集基本信息 (AskUserQuestion)
2. 架构分析 (Task Explore + Read)
3. 代码质量扫描 (Bash + Grep)
4. 需求验证 (Read + Grep)
5. 技术栈评估 (Read + Glob)
6. 方案生成 (综合分析)

输出: 完整诊断报告 + 改进方案清单 + 优先级排序
```

### 方式 3: 深度诊断 (1 天)

适合: 重构规划、关键决策、技术评估

```
目标: 深度分析，生成 6-12 个月规划

步骤:
1. 所有标准诊断项
2. 关键模块深度分析
3. 性能基准测试
4. 安全审计
5. 团队访谈 (多轮 AskUserQuestion)
6. 演进规划生成

输出: 完整诊断报告 + 详细方案 + 12 个月路线图 + 资源预估
```

## 💡 常见使用场景

| 场景 | 诊断焦点 | 耗时 | 工具组合 | 输出 |
|------|---------|------|---------|------|
| 融资前审查 | 代码质量/架构 | 1 小时 | Explore+Bash+Grep | 问题清单 |
| 年度评估 | 全面诊断 | 2-4 小时 | 全套工具 | 诊断报告 |
| 重构规划 | 技术债/架构 | 1 天 | 深度分析 | 规划方案 |
| 需求验证 | 需求覆盖度 | 2 小时 | Read+Grep+Ask | 遗漏项清单 |
| 技术规划 | 技术栈/演进 | 半天工作坊 | Ask+Explore+Read | 演进路线图 |
| 团队能力评估 | 技术深度/培训需求 | 1 小时 | Ask+Read | 培训计划 |

## 📖 核心概念

### 诊断维度

1. **架构诊断** - 系统设计、分层、模块划分
2. **代码质量** - 技术债、安全风险、性能问题
3. **需求诊断** - 完整性、验收标准、一致性
4. **技术栈** - 框架版本、依赖、现代化程度
5. **团队能力** - 技术深度、流程成熟度
6. **规划能力** - 未来方向、技术演进

### 优先级分类

- **P0 (高)** - 立即处理，影响系统安全/可用
- **P1 (中)** - 近期处理，影响开发效率
- **P2 (低)** - 计划处理，长期优化

## 🛠️ 工具使用

### 核心工具矩阵

| 工具 | 用途 | 常见问题 |
|------|------|---------|
| **Task (Explore)** | 快速架构扫描 | 架构分层、模块关系 |
| **Grep** | 风险模式搜索 | 安全漏洞、技术债 |
| **Glob** | 文件组织检查 | 结构完整性、缺失模块 |
| **Read** | 深度文件分析 | 需求、配置、文档 |
| **AskUserQuestion** | 采集专家意见 | 业务背景、需求变化 |
| **Bash** | 质量指标收集 | lint、test、覆盖率 |
| **TodoWrite** | 组织问题和方案 | 任务追踪、优先级 |

详见 **tools-integration-guide.md**

## 📝 使用模板

### 诊断报告模板
- 执行摘要 (1 页)
- 详细分析 (4 维度)
- 改进方案 (具体步骤)
- 任务清单 (优先级排序)
- 成功指标 (量化目标)

详见 **templates/diagnostic-report-template.md**

### 诊断问卷
- 基本情况
- 当前困境
- 技术栈评估
- 需求规划
- 资源约束
- 成功标准

详见 **templates/diagnostic-questionnaire.md**

## 📊 案例参考

### 案例 1: 快速体检 (30 分钟)
新创公司融资前审查，快速发现 P0 问题

### 案例 2: 深度诊断 (1 天)
遗留系统的全面诊断和重构规划

### 案例 3: 规划工作坊 (半天)
技术栈演进和 12 个月技术规划

详见 **examples.md**

## 🎯 诊断流程

```
┌─────────────────────────────────────────┐
│  阶段 1: 准备 (5 分钟)                  │
│  - 收集基本信息                         │
│  - 确定诊断焦点                         │
└────────────┬────────────────────────────┘
             ↓
┌─────────────────────────────────────────┐
│  阶段 2: 多维诊断 (15-30 分钟)          │
│  - 架构分析                             │
│  - 代码质量扫描                         │
│  - 需求验证                             │
│  - 技术栈评估                           │
└────────────┬────────────────────────────┘
             ↓
┌─────────────────────────────────────────┐
│  阶段 3: 聚类和排序 (10 分钟)           │
│  - 整理问题                             │
│  - 按优先级排序                         │
└────────────┬────────────────────────────┘
             ↓
┌─────────────────────────────────────────┐
│  阶段 4: 方案生成 (20 分钟)             │
│  - 改进方案                             │
│  - 任务清单                             │
│  - 资源预估                             │
└────────────┬────────────────────────────┘
             ↓
┌─────────────────────────────────────────┐
│  阶段 5: 规划生成 (20 分钟)             │
│  - 演进方向                             │
│  - 时间表                               │
│  - 成功指标                             │
└─────────────────────────────────────────┘
```

## ✅ 诊断检查清单

### 快速诊断 (30 分钟)

- [ ] 项目整体架构 (Task Explore)
- [ ] 主要文件组织 (Glob)
- [ ] 代码质量指标 (Bash)
- [ ] 明显的问题 (Grep)
- [ ] 技术栈现状 (Read)

### 标准诊断 (2-4 小时)

- [ ] 详细架构分析
- [ ] 代码债务清单
- [ ] 需求覆盖度
- [ ] 技术栈评估
- [ ] 改进方案生成

### 完整诊断 (1 天)

- [ ] 所有标准诊断项
- [ ] 关键模块深度分析
- [ ] 性能基准测试
- [ ] 安全审计
- [ ] 团队访谈
- [ ] 完整报告和规划

## 🔗 相关资源

| 资源 | 说明 |
|------|------|
| [SKILL.md](./SKILL.md) | 技能完整文档 |
| [工具指南](./tools-integration-guide.md) | 工具使用方法 |
| [案例分析](./examples.md) | 3 个真实案例 |
| [报告模板](./templates/diagnostic-report-template.md) | 标准输出格式 |
| [问卷模板](./templates/diagnostic-questionnaire.md) | 采集问卷 |
| [快速脚本](./scripts/) | 自动化脚本 |

## 💻 集成 CodeBuddy 工具

### 推荐工具组合

```
快速诊断:
  Task (Explore) → Bash → Grep → TodoWrite

标准诊断:
  Task + Read → Bash + Grep → AskUserQuestion → TodoWrite

深度诊断:
  全套工具深度使用 (>1 天)
```

### 工具调用示例

```python
# 1. 快速探索
task = Task(
    subagent_type="Explore",
    prompt="分析项目架构..."
)

# 2. 搜索风险
grep = Grep(
    pattern="SQL.*拼接|TODO|FIXME",
    output_mode="content"
)

# 3. 采集意见
ask = AskUserQuestion(
    questions=[{
        question: "项目主要痛点是什么?",
        options: [...]
    }]
)

# 4. 组织方案
todo = TodoWrite(
    newTodos=[...],
    oldTodos=[...]
)
```

## 🎓 最佳实践

### Do's ✅

- ✅ 分阶段诊断，逐步深入
- ✅ 根据发现不断调整诊断方向
- ✅ 采集多角色的见解（架构师、产品、运维等）
- ✅ 用量化指标支撑结论
- ✅ 将诊断结果转化为具体任务

### Don'ts ❌

- ❌ 一次诊断所有维度（应该分次深入）
- ❌ 仅基于代码诊断（应该采集业务背景）
- ❌ 过度分析而不行动（设定明确的下一步）
- ❌ 诊断后没有跟踪（建立执行和验证机制）

## 📈 预期收益

使用这个技能可以获得：

1. **问题清晰化** - 系统化发现潜在问题
2. **优先级清晰** - 按重要性排序改进项
3. **方案可行** - 具体、可量化的改进方案
4. **执行有序** - 清晰的任务清单和时间表
5. **规划前瞻** - 6-12 个月的技术演进规划
6. **团队对齐** - 多角色统一的认识和目标

## 🔄 后续行动

诊断完成后：

1. **评审** - 与关键利益相关者评审诊断结果
2. **确认** - 确认优先级和改进方案
3. **规划** - 将诊断结果转入项目规划
4. **执行** - 按优先级逐步执行改进
5. **追踪** - 定期评估改进效果
6. **迭代** - 3-6 个月后进行再诊断

## 📞 支持

- 工具问题: 参考 tools-integration-guide.md
- 案例参考: 查看 examples.md
- 模板使用: 参考 templates/ 目录
- 详细内容: 见 SKILL.md

---

**版本**: v1.0  
**最后更新**: 2025-01-05  
**维护者**: [项目团队]

