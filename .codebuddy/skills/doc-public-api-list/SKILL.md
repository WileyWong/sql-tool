---
name: doc-public-api-list
description: 为指定模块生成面向第三方开发者的详细API使用文档，确保第三方开发者仅依赖此文档即可完成集成开发
category: documentation
keywords: [公共API, 外部接口, API文档, 接口规范, SDK文档]
---

# Skill: 第三方API使用文档生成器

为指定模块生成面向第三方开发者的详细API使用文档，确保在没有源码访问权限的情况下仅依赖文档即可完成集成开发。

## 核心原则（15 秒速查）

1. **第三方视角** - 避免内部术语，提供外部开发者能理解的说明
2. **完整自洽** - 仅凭文档即可完成集成，无需查看源码
3. **分层示例** - 核心接口提供基础/进阶/完整 3 层代码示例
4. **智能分卷** - 接口 ≤ 5 单文档，> 5 自动分卷（800-1200 行/卷）
5. **运行时优先** - 聚焦幂等性、事务、异步等运行时特性说明

## 🎯 目标

解决软件研发中 **如何为第三方开发者提供完整可用的 API 集成文档** 的问题。

**目标用户**: 第三方开发者、系统集成工程师（无源码访问权限）

**必须包含的核心内容**:
- 所有对外接口的完整定义（方法签名、参数、返回值）
- 接口间的依赖关系和调用时序
- 数据契约（请求/响应对象、枚举类型、数据字典）
- 运行时特性（幂等性、事务、并发安全、异步）
- 错误处理机制（异常类型、错误码、重试策略）
- 完整可执行的代码示例

**应避免的内容**:
- 内部实现细节（Service 层业务逻辑、DAO 层数据访问代码）
- 内部调试信息和开发者注释
- 未经解释的内部术语和代号

## 📋 前置条件

- [ ] 目标模块的完整代码
- [ ] 对外暴露的接口定义
- [ ] 配置文件和实际使用示例
- [ ] （可选）现有文档、测试用例、变更记录

## 🔄 执行步骤

### 步骤 1: 自动代码分析

**扫描 Controller 文件**:
- 搜索所有 `*Controller.java` 文件
- 统计每个 Controller 的接口数量（通过 `@RequestMapping`、`@GetMapping` 等注解）
- 按接口数量降序排列

**检查现有文档**:
- 搜索是否存在 API 文档（如 `*api-guide*.md`、`*api-doc*.md`）
- 如果存在，记录路径（后续重新生成）

**确定文档策略**:
- **接口 ≤ 5 个**: 生成单文档（1500-2000 行）
- **接口 6-15 个**: 生成主文档 + 2-3 个分卷
- **接口 > 15 个**: 生成主文档 + 4-5 个分卷
- 每个分卷控制在 800-1200 行

**验收标准**:
- [ ] 所有 Controller 已识别并统计
- [ ] 文档策略已确定（单文档 vs 分卷）

### 步骤 2: 生成文档内容

**文档结构**（参考 `reference.md` 的完整结构）:
- **第一部分**: 接入概览（基础信息、功能概述、快速开始、技术要求）
- **第二部分**: 接口详细说明（接口清单、核心接口详情）
- **第三部分**: 代码示例集合（多语言分层示例、场景化示例）
- **第四部分**: 数据模型定义（枚举定义 + 状态流转图、数据结构、数据字典）
- **第五部分**: 集成指南（接入步骤、依赖关系、最佳实践、反模式警告）
- **第六部分**: 错误处理指南（常见错误场景、错误码表、重试策略、降级策略）
- **第七部分**: 配置说明（环境配置、配置参数）
- **第八部分**: FAQ 和故障排查

**代码示例分层策略**:
- **P0 核心接口**: cURL + JavaScript + Python（基础/进阶/完整 3 层）
- **P1 重要接口**: cURL + JavaScript（基础/完整 2 层）
- **P2 次要接口**: cURL（基础 1 层）

**验收标准**:
- [ ] 文档包含所有对外接口的完整定义
- [ ] 核心接口提供 3 层代码示例（基础/进阶/完整）
- [ ] 状态枚举包含流转图
- [ ] 至少一个端到端业务流程示例
- [ ] 所有代码示例可直接运行

### 步骤 3: 输出文档

**单文档模式**（接口 ≤ 5）:
- 文件名: `workspace/docs/api/{module-name}-api-guide.md`
- 包含: P0 + P1 内容，选择性包含 P2

**分卷模式**（接口 > 5）:
- 主文档: `workspace/docs/api/{module-name}-api-guide.md`（概述 + 快速开始 + 导航）
- 分卷: `workspace/docs/api/{module-name}-api-guide-part1.md`, `part2.md`, ...
- 分卷结构: Part1（接口清单 + 核心接口详情）、Part2（代码示例）、Part3（数据模型 + 集成指南）、Part4（错误处理 + 配置）、Part5（FAQ + 附录）

**验收标准**:
- [ ] 文档已保存到 `workspace/docs/api/` 目录
- [ ] 分卷文档包含导航链接
- [ ] 格式规范，易于阅读

---

## ✅ 最佳实践

1. **第三方友好** - 避免内部术语，提供充分注释和清晰的错误处理指南
2. **状态可视化** - 状态枚举必须包含流转图（使用 Mermaid）
3. **示例完整** - 所有代码示例包含环境准备、变量说明、错误处理

## ❌ 常见错误

1. **包含内部实现细节** - 应聚焦对外接口，避免暴露 Service 层逻辑
2. **示例不可执行** - 所有代码示例必须可直接运行，包含必要的导入和配置
3. **缺少运行时特性说明** - 应明确说明幂等性、事务支持、异步特性

## 🔍 验证清单

详细的质量检查清单请查看 `checklist.md`。

核心验证项:
- [ ] 所有对外接口已完整记录
- [ ] 核心接口提供 3 层代码示例
- [ ] 状态枚举包含流转图
- [ ] 至少一个端到端业务流程示例
- [ ] 无内部术语，第三方开发者可理解

## 📚 可重用资源

详细的脚本、模板和参考文档请查看:
- `checklist.md` - 完整的质量检查清单（10 大类验证项）
- `examples.md` - 完整的文档生成示例（3 个典型场景）
- `reference.md` - 文档结构模板和最佳实践（9 个章节）

## 🔗 相关技能

- `doc-api-list` - 扫描代码生成内部 API 接口清单（面向项目或同一团队内部开发者）
- `doc-code-generation` - 基于设计文档生成代码实现
