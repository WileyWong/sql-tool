# 套件审查规范

> ⚠️ **本文档为强制规范，非建议性指引。所有内容必须严格遵循。**

## 输入

| 类型 | 必需 | 说明 |
|------|------|------|
| 测试套件 | 是 | YAML 或 Excel 文件 |

## 审查维度

### 1. 结构校验

- [ ] 必填字段完整（id, name, steps）
- [ ] ID 唯一性
- [ ] 外键引用有效（元素ID存在于POM）

### 2. 命名规范

- [ ] 用例ID 格式正确：`TC-{系统}-{模块}-{场景}-{序号}`
- [ ] 元素ID 引用存在于 POM
- [ ] 命名语义清晰

### 3. 步骤合理性

- [ ] 动作类型有效（navigate/click/input/assert/wait）
- [ ] 参数完整（必需参数不缺失）
- [ ] 断言可验证（有明确预期值）
- [ ] 步骤顺序合理

### 4. 覆盖度评估

- [ ] 正向场景覆盖（Happy Path）
- [ ] 异常场景覆盖（边界、错误）
- [ ] 优先级分布合理（P0 占比 20-30%）

### 5. 测试数据

- [ ] 数据格式正确
- [ ] 变量引用有效
- [ ] 敏感数据脱敏

## 问题分类

| 级别 | 说明 | 处理 |
|------|------|------|
| 🔴 Error | 必须修复，阻塞执行 | 不通过 |
| 🟡 Warning | 建议修复，可继续 | 警告 |
| 🔵 Info | 优化建议，可忽略 | 提示 |

## 常见问题

| 问题 | 级别 | 修复建议 |
|------|------|---------|
| 缺少必填字段 | 🔴 | 补充字段 |
| ID 重复 | 🔴 | 修改为唯一ID |
| 元素引用不存在 | 🔴 | 检查 POM 或修正引用 |
| 断言缺少预期值 | 🔴 | 补充 expected |
| 命名不规范 | 🟡 | 按规范修改 |
| 缺少描述 | 🟡 | 补充描述 |
| P0 用例过少 | 🔵 | 考虑增加核心用例 |
| 无异常场景 | 🔵 | 建议补充异常用例 |

## 输出格式

```markdown
## 审查报告

**文件**: test-suite.yaml
**审查时间**: 2025-12-31 10:30:00

### 统计

| 指标 | 值 |
|------|-----|
| 用例数 | 10 |
| 步骤数 | 45 |
| 问题数 | 3 (1 Error, 2 Warning) |

### 优先级分布

| 优先级 | 数量 | 占比 |
|--------|------|------|
| P0 | 3 | 30% |
| P1 | 5 | 50% |
| P2 | 2 | 20% |

### 问题列表

1. 🔴 **TC-OA-登录-001** Step 3: 缺少 `element` 字段
   - 位置: cases[0].steps[2]
   - 修复: 添加 `element: submitBtn`

2. 🟡 **TC-OA-登录-002**: 描述过于简短
   - 当前: "测试登录"
   - 建议: 补充具体测试目的

3. 🔵 建议增加密码复杂度验证的异常场景

### 审查结论

- [ ] 通过（无 Error）
- [x] 不通过（有 1 个 Error 需修复）
```

## 自动修复

对于部分问题，可提供自动修复建议：

```yaml
# 修复建议
fixes:
  - case: TC-OA-登录-001
    step: 3
    field: element
    action: add
    value: submitBtn
    reason: "click 动作必须指定 element"
```

## 参考

- YAML 格式：[yaml-rules.md](yaml-rules.md)
- Excel 格式：[excel-rules.md](excel-rules.md)
